!function(){var e=this,t=e._,n={},i=Array.prototype,s=Object.prototype,r=Function.prototype,o=i.push,a=i.slice,l=i.concat,c=s.toString,u=s.hasOwnProperty,h=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,b=i.lastIndexOf,_=Array.isArray,w=Object.keys,x=r.bind,k=function(e){return e instanceof k?e:this instanceof k?(this._wrapped=e,void 0):new k(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):e._=k,k.VERSION="1.4.4";var S=k.each=k.forEach=function(e,t,i){if(null!=e)if(h&&e.forEach===h)e.forEach(t,i);else if(e.length===+e.length){for(var s=0,r=e.length;r>s;s++)if(t.call(i,e[s],s,e)===n)return}else for(var o in e)if(k.has(e,o)&&t.call(i,e[o],o,e)===n)return};k.map=k.collect=function(e,t,n){var i=[];return null==e?i:d&&e.map===d?e.map(t,n):(S(e,function(e,s,r){i[i.length]=t.call(n,e,s,r)}),i)};var C="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=k.bind(t,i)),s?e.reduce(t,n):e.reduce(t);if(S(e,function(e,r,o){s?n=t.call(i,n,e,r,o):(n=e,s=!0)}),!s)throw new TypeError(C);return n},k.reduceRight=k.foldr=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=k.bind(t,i)),s?e.reduceRight(t,n):e.reduceRight(t);var r=e.length;if(r!==+r){var o=k.keys(e);r=o.length}if(S(e,function(a,l,c){l=o?o[--r]:--r,s?n=t.call(i,n,e[l],l,c):(n=e[l],s=!0)}),!s)throw new TypeError(C);return n},k.find=k.detect=function(e,t,n){var i;return T(e,function(e,s,r){return t.call(n,e,s,r)?(i=e,!0):void 0}),i},k.filter=k.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(S(e,function(e,s,r){t.call(n,e,s,r)&&(i[i.length]=e)}),i)},k.reject=function(e,t,n){return k.filter(e,function(e,i,s){return!t.call(n,e,i,s)},n)},k.every=k.all=function(e,t,i){t||(t=k.identity);var s=!0;return null==e?s:m&&e.every===m?e.every(t,i):(S(e,function(e,r,o){return(s=s&&t.call(i,e,r,o))?void 0:n}),!!s)};var T=k.some=k.any=function(e,t,i){t||(t=k.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,i):(S(e,function(e,r,o){return s||(s=t.call(i,e,r,o))?n:void 0}),!!s)};k.contains=k.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):T(e,function(e){return e===t})},k.invoke=function(e,t){var n=a.call(arguments,2),i=k.isFunction(t);return k.map(e,function(e){return(i?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,function(e){return e[t]})},k.where=function(e,t,n){return k.isEmpty(t)?n?null:[]:k[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},k.findWhere=function(e,t){return k.where(e,t,!0)},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&k.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return S(e,function(e,s,r){var o=t?t.call(n,e,s,r):e;o>=i.computed&&(i={value:e,computed:o})}),i.value},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&k.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return S(e,function(e,s,r){var o=t?t.call(n,e,s,r):e;o<i.computed&&(i={value:e,computed:o})}),i.value},k.shuffle=function(e){var t,n=0,i=[];return S(e,function(e){t=k.random(n++),i[n-1]=i[t],i[t]=e}),i};var P=function(e){return k.isFunction(e)?e:function(t){return t[e]}};k.sortBy=function(e,t,n){var i=P(t);return k.pluck(k.map(e,function(e,t,s){return{value:e,index:t,criteria:i.call(n,e,t,s)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index<t.index?-1:1}),"value")};var E=function(e,t,n,i){var s={},r=P(t||k.identity);return S(e,function(t,o){var a=r.call(n,t,o,e);i(s,a,t)}),s};k.groupBy=function(e,t,n){return E(e,t,n,function(e,t,n){(k.has(e,t)?e[t]:e[t]=[]).push(n)})},k.countBy=function(e,t,n){return E(e,t,n,function(e,t){k.has(e,t)||(e[t]=0),e[t]++})},k.sortedIndex=function(e,t,n,i){n=null==n?k.identity:P(n);for(var s=n.call(i,t),r=0,o=e.length;o>r;){var a=r+o>>>1;n.call(i,e[a])<s?r=a+1:o=a}return r},k.toArray=function(e){return e?k.isArray(e)?a.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:a.call(e,0,t)},k.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var N=function(e,t,n){return S(e,function(e){k.isArray(e)?t?o.apply(n,e):N(e,t,n):n.push(e)}),n};k.flatten=function(e,t){return N(e,t,[])},k.without=function(e){return k.difference(e,a.call(arguments,1))},k.uniq=k.unique=function(e,t,n,i){k.isFunction(t)&&(i=n,n=t,t=!1);var s=n?k.map(e,n,i):e,r=[],o=[];return S(s,function(n,i){(t?i&&o[o.length-1]===n:k.contains(o,n))||(o.push(n),r.push(e[i]))}),r},k.union=function(){return k.uniq(l.apply(i,arguments))},k.intersection=function(e){var t=a.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.indexOf(t,e)>=0})})},k.difference=function(e){var t=l.apply(i,a.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=a.call(arguments),t=k.max(k.pluck(e,"length")),n=new Array(t),i=0;t>i;i++)n[i]=k.pluck(e,""+i);return n},k.object=function(e,t){if(null==e)return{};for(var n={},i=0,s=e.length;s>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var i=0,s=e.length;if(n){if("number"!=typeof n)return i=k.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,s+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;s>i;i++)if(e[i]===t)return i;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(b&&e.lastIndexOf===b)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var s=i?n:e.length;s--;)if(e[s]===t)return s;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=0,r=new Array(i);i>s;)r[s++]=e,e+=n;return r},k.bind=function(e,t){if(e.bind===x&&x)return x.apply(e,a.call(arguments,1));var n=a.call(arguments,2);return function(){return e.apply(t,n.concat(a.call(arguments)))}},k.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},k.bindAll=function(e){var t=a.call(arguments,1);return 0===t.length&&(t=k.functions(e)),S(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var i=t.apply(this,arguments);return k.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},k.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(a.call(arguments,1)))},k.throttle=function(e,t){var n,i,s,r,o=0,a=function(){o=new Date,s=null,r=e.apply(n,i)};return function(){var l=new Date,c=t-(l-o);return n=this,i=arguments,0>=c?(clearTimeout(s),s=null,o=l,r=e.apply(n,i)):s||(s=setTimeout(a,c)),r}},k.debounce=function(e,t,n){var i,s;return function(){var r=this,o=arguments,a=function(){i=null,n||(s=e.apply(r,o))},l=n&&!i;return clearTimeout(i),i=setTimeout(a,t),l&&(s=e.apply(r,o)),s}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=w||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)k.has(e,n)&&(t[t.length]=n);return t},k.values=function(e){var t=[];for(var n in e)k.has(e,n)&&t.push(e[n]);return t},k.pairs=function(e){var t=[];for(var n in e)k.has(e,n)&&t.push([n,e[n]]);return t},k.invert=function(e){var t={};for(var n in e)k.has(e,n)&&(t[e[n]]=n);return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return S(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=l.apply(i,a.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=l.apply(i,a.call(arguments,1));for(var s in e)k.contains(n,s)||(t[s]=e[s]);return t},k.defaults=function(e){return S(a.call(arguments,1),function(t){if(t)for(var n in t)null==e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var s=c.call(e);if(s!=c.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=n.length;r--;)if(n[r]==e)return i[r]==t;n.push(e),i.push(t);var o=0,a=!0;if("[object Array]"==s){if(o=e.length,a=o==t.length)for(;o--&&(a=A(e[o],t[o],n,i)););}else{var l=e.constructor,u=t.constructor;if(l!==u&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(u)&&u instanceof u))return!1;for(var h in e)if(k.has(e,h)&&(o++,!(a=k.has(t,h)&&A(e[h],t[h],n,i))))break;if(a){for(h in t)if(k.has(t,h)&&!o--)break;a=!o}}return n.pop(),i.pop(),a};k.isEqual=function(e,t){return A(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=_||function(e){return"[object Array]"==c.call(e)},k.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==c.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return u.call(e,t)},k.noConflict=function(){return e._=t,this},k.identity=function(e){return e},k.times=function(e,t,n){for(var i=Array(e),s=0;e>s;s++)i[s]=t.call(n,s);return i},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=k.invert(M.escape);var L={escape:new RegExp("["+k.keys(M.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(M.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(L[e],function(t){return M[e][t]})}}),k.result=function(e,t){if(null==e)return null;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){S(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),H.call(this,n.apply(k,e))}})};var I=0;k.uniqueId=function(e){var t=++I+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var i;n=k.defaults({},n,k.templateSettings);var s=new RegExp([(n.escape||$).source,(n.interpolate||$).source,(n.evaluate||$).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(s,function(t,n,i,s,a){return o+=e.slice(r,a).replace(D,function(e){return"\\"+O[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),r=a+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return i(t,k);var l=function(e){return i.call(this,e,k)};return l.source="function("+(n.variable||"obj")+"){\n"+o+"}",l},k.chain=function(e){return k(e).chain()};var H=function(e){return this._chain?k(e).chain():e};k.mixin(k),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],H.call(this,n)}}),S(["concat","join","slice"],function(e){var t=i[e];k.prototype[e]=function(){return H.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}.call(this),function(e,t){function n(e){var t=e.length,n=lt.type(e);return lt.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=kt[e]={};return lt.each(e.match(ut)||[],function(e,n){t[n]=!0}),t}function s(e,n,i,s){if(lt.acceptData(e)){var r,o,a=lt.expando,l="string"==typeof n,c=e.nodeType,u=c?lt.cache:e,h=c?e[a]:e[a]&&a;if(h&&u[h]&&(s||u[h].data)||!l||i!==t)return h||(c?e[a]=h=Z.pop()||lt.guid++:h=a),u[h]||(u[h]={},c||(u[h].toJSON=lt.noop)),("object"==typeof n||"function"==typeof n)&&(s?u[h]=lt.extend(u[h],n):u[h].data=lt.extend(u[h].data,n)),r=u[h],s||(r.data||(r.data={}),r=r.data),i!==t&&(r[lt.camelCase(n)]=i),l?(o=r[n],null==o&&(o=r[lt.camelCase(n)])):o=r,o}}function r(e,t,n){if(lt.acceptData(e)){var i,s,r,o=e.nodeType,l=o?lt.cache:e,c=o?e[lt.expando]:lt.expando;if(l[c]){if(t&&(r=n?l[c]:l[c].data)){lt.isArray(t)?t=t.concat(lt.map(t,lt.camelCase)):t in r?t=[t]:(t=lt.camelCase(t),t=t in r?[t]:t.split(" "));for(i=0,s=t.length;s>i;i++)delete r[t[i]];if(!(n?a:lt.isEmptyObject)(r))return}(n||(delete l[c].data,a(l[c])))&&(o?lt.cleanData([e],!0):lt.support.deleteExpando||l!=l.window?delete l[c]:l[c]=null)}}}function o(e,n,i){if(i===t&&1===e.nodeType){var s="data-"+n.replace(Ct,"-$1").toLowerCase();if(i=e.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:St.test(i)?lt.parseJSON(i):i}catch(r){}lt.data(e,n,i)}else i=t}return i}function a(e){var t;for(t in e)if(("data"!==t||!lt.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function c(){return!1}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function h(e,t,n){if(t=t||0,lt.isFunction(t))return lt.grep(e,function(e,i){var s=!!t.call(e,i,e);return s===n});if(t.nodeType)return lt.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=lt.grep(e,function(e){return 1===e.nodeType});if(qt.test(t))return lt.filter(t,i,!n);t=lt.filter(t,i)}return lt.grep(e,function(e){return lt.inArray(e,t)>=0===n})}function d(e){var t=Ut.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function p(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function f(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function g(e){var t=rn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function m(e,t){for(var n,i=0;null!=(n=e[i]);i++)lt._data(n,"globalEval",!t||lt._data(t[i],"globalEval"))}function v(e,t){if(1===t.nodeType&&lt.hasData(e)){var n,i,s,r=lt._data(e),o=lt._data(t,r),a=r.events;if(a){delete o.handle,o.events={};for(n in a)for(i=0,s=a[n].length;s>i;i++)lt.event.add(t,n,a[n][i])}o.data&&(o.data=lt.extend({},o.data))}}function y(e,t){var n,i,s;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!lt.support.noCloneEvent&&t[lt.expando]){s=lt._data(t);for(i in s.events)lt.removeEvent(t,i,s.handle);t.removeAttribute(lt.expando)}"script"===n&&t.text!==e.text?(f(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),lt.support.html5Clone&&e.innerHTML&&!lt.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tn.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function b(e,n){var i,s,r=0,o=typeof e.getElementsByTagName!==G?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==G?e.querySelectorAll(n||"*"):t;if(!o)for(o=[],i=e.childNodes||e;null!=(s=i[r]);r++)!n||lt.nodeName(s,n)?o.push(s):lt.merge(o,b(s,n));return n===t||n&&lt.nodeName(e,n)?lt.merge([e],o):o}function _(e){tn.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,s=Cn.length;s--;)if(t=Cn[s]+n,t in e)return t;return i}function x(e,t){return e=t||e,"none"===lt.css(e,"display")||!lt.contains(e.ownerDocument,e)}function k(e,t){for(var n,i,s,r=[],o=0,a=e.length;a>o;o++)i=e[o],i.style&&(r[o]=lt._data(i,"olddisplay"),n=i.style.display,t?(r[o]||"none"!==n||(i.style.display=""),""===i.style.display&&x(i)&&(r[o]=lt._data(i,"olddisplay",P(i.nodeName)))):r[o]||(s=x(i),(n&&"none"!==n||!s)&&lt._data(i,"olddisplay",s?n:lt.css(i,"display"))));for(o=0;a>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?r[o]||"":"none"));return e}function S(e,t,n){var i=yn.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function C(e,t,n,i,s){for(var r=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>r;r+=2)"margin"===n&&(o+=lt.css(e,n+Sn[r],!0,s)),i?("content"===n&&(o-=lt.css(e,"padding"+Sn[r],!0,s)),"margin"!==n&&(o-=lt.css(e,"border"+Sn[r]+"Width",!0,s))):(o+=lt.css(e,"padding"+Sn[r],!0,s),"padding"!==n&&(o+=lt.css(e,"border"+Sn[r]+"Width",!0,s)));return o}function T(e,t,n){var i=!0,s="width"===t?e.offsetWidth:e.offsetHeight,r=hn(e),o=lt.support.boxSizing&&"border-box"===lt.css(e,"boxSizing",!1,r);if(0>=s||null==s){if(s=dn(e,t,r),(0>s||null==s)&&(s=e.style[t]),bn.test(s))return s;i=o&&(lt.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+C(e,t,n||(o?"border":"content"),i,r)+"px"}function P(e){var t=X,n=wn[e];return n||(n=E(e,t),"none"!==n&&n||(un=(un||lt("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(un[0].contentWindow||un[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=E(e,t),un.detach()),wn[e]=n),n}function E(e,t){var n=lt(t.createElement(e)).appendTo(t.body),i=lt.css(n[0],"display");return n.remove(),i}function N(e,t,n,i){var s;if(lt.isArray(t))lt.each(t,function(t,s){n||Pn.test(e)?i(e,s):N(e+"["+("object"==typeof s?t:"")+"]",s,n,i)});else if(n||"object"!==lt.type(t))i(e,t);else for(s in t)N(e+"["+s+"]",t[s],n,i)}function A(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,s=0,r=t.toLowerCase().match(ut)||[];if(lt.isFunction(n))for(;i=r[s++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function M(e,t,n,i){function s(a){var l;return r[a]=!0,lt.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||o||r[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),s(c),!1)}),l}var r={},o=e===Wn;return s(t.dataTypes[0])||!r["*"]&&s("*")}function L(e,n){var i,s,r=lt.ajaxSettings.flatOptions||{};for(s in n)n[s]!==t&&((r[s]?e:i||(i={}))[s]=n[s]);return i&&lt.extend(!0,e,i),e}function I(e,n,i){var s,r,o,a,l=e.contents,c=e.dataTypes,u=e.responseFields;for(a in u)a in i&&(n[u[a]]=i[a]);for(;"*"===c[0];)c.shift(),r===t&&(r=e.mimeType||n.getResponseHeader("Content-Type"));if(r)for(a in l)if(l[a]&&l[a].test(r)){c.unshift(a);break}if(c[0]in i)o=c[0];else{for(a in i){if(!c[0]||e.converters[a+" "+c[0]]){o=a;break}s||(s=a)}o=o||s}return o?(o!==c[0]&&c.unshift(o),i[o]):void 0}function $(e,t){var n,i,s,r,o={},a=0,l=e.dataTypes.slice(),c=l[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l[1])for(s in e.converters)o[s.toLowerCase()]=e.converters[s];for(;i=l[++a];)if("*"!==i){if("*"!==c&&c!==i){if(s=o[c+" "+i]||o["* "+i],!s)for(n in o)if(r=n.split(" "),r[1]===i&&(s=o[c+" "+r[0]]||o["* "+r[0]])){s===!0?s=o[n]:o[n]!==!0&&(i=r[0],l.splice(a--,0,i));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+c+" to "+i}}}c=i}return{state:"success",data:t}}function O(){try{return new e.XMLHttpRequest}catch(t){}}function D(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function H(){return setTimeout(function(){Zn=t}),Zn=lt.now()}function j(e,t){lt.each(t,function(t,n){for(var i=(ri[t]||[]).concat(ri["*"]),s=0,r=i.length;r>s;s++)if(i[s].call(e,t,n))return})}function R(e,t,n){var i,s,r=0,o=si.length,a=lt.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var t=Zn||H(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,r=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(r);return a.notifyWith(e,[c,r,n]),1>r&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:lt.extend({},t),opts:lt.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zn||H(),duration:n.duration,tweens:[],createTween:function(t,n){var i=lt.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(s)return this;for(s=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(F(u,c.opts.specialEasing);o>r;r++)if(i=si[r].call(c,e,u,c.opts))return i;return j(c,u),lt.isFunction(c.opts.start)&&c.opts.start.call(e,c),lt.fx.timer(lt.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function F(e,t){var n,i,s,r,o;for(s in e)if(i=lt.camelCase(s),r=t[i],n=e[s],lt.isArray(n)&&(r=n[1],n=e[s]=n[0]),s!==i&&(e[i]=n,delete e[s]),o=lt.cssHooks[i],o&&"expand"in o){n=o.expand(n),delete e[i];for(s in n)s in e||(e[s]=n[s],t[s]=r)}else t[i]=r}function z(e,t,n){var i,s,r,o,a,l,c,u,h,d=this,p=e.style,f={},g=[],m=e.nodeType&&x(e);n.queue||(u=lt._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,h=u.empty.fire,u.empty.fire=function(){u.unqueued||h()}),u.unqueued++,d.always(function(){d.always(function(){u.unqueued--,lt.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===lt.css(e,"display")&&"none"===lt.css(e,"float")&&(lt.support.inlineBlockNeedsLayout&&"inline"!==P(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",lt.support.shrinkWrapBlocks||d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(s in t)if(o=t[s],ti.exec(o)){if(delete t[s],l=l||"toggle"===o,o===(m?"hide":"show"))continue;g.push(s)}if(r=g.length){a=lt._data(e,"fxshow")||lt._data(e,"fxshow",{}),"hidden"in a&&(m=a.hidden),l&&(a.hidden=!m),m?lt(e).show():d.done(function(){lt(e).hide()}),d.done(function(){var t;lt._removeData(e,"fxshow");for(t in f)lt.style(e,t,f[t])});for(s=0;r>s;s++)i=g[s],c=d.createTween(i,m?a[i]:0),f[i]=a[i]||lt.style(e,i),i in a||(a[i]=c.start,m&&(c.end=c.start,c.start="width"===i||"height"===i?1:0))}}function B(e,t,n,i,s){return new B.prototype.init(e,t,n,i,s)}function q(e,t){var n,i={height:e},s=0;for(t=t?1:0;4>s;s+=2-t)n=Sn[s],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function W(e){return lt.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var V,U,G=typeof t,X=e.document,Y=e.location,K=e.jQuery,J=e.$,Q={},Z=[],et="1.9.1",tt=Z.concat,nt=Z.push,it=Z.slice,st=Z.indexOf,rt=Q.toString,ot=Q.hasOwnProperty,at=et.trim,lt=function(e,t){return new lt.fn.init(e,t,U)},ct=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ut=/\S+/g,ht=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,dt=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,pt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ft=/^[\],:{}\s]*$/,gt=/(?:^|:|,)(?:\s*\[)+/g,mt=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,vt=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,yt=/^-ms-/,bt=/-([\da-z])/gi,_t=function(e,t){return t.toUpperCase()},wt=function(e){(X.addEventListener||"load"===e.type||"complete"===X.readyState)&&(xt(),lt.ready())},xt=function(){X.addEventListener?(X.removeEventListener("DOMContentLoaded",wt,!1),e.removeEventListener("load",wt,!1)):(X.detachEvent("onreadystatechange",wt),e.detachEvent("onload",wt))};lt.fn=lt.prototype={jquery:et,constructor:lt,init:function(e,n,i){var s,r;if(!e)return this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:dt.exec(e),!s||!s[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(s[1]){if(n=n instanceof lt?n[0]:n,lt.merge(this,lt.parseHTML(s[1],n&&n.nodeType?n.ownerDocument||n:X,!0)),pt.test(s[1])&&lt.isPlainObject(n))for(s in n)lt.isFunction(this[s])?this[s](n[s]):this.attr(s,n[s]);return this}if(r=X.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return i.find(e);this.length=1,this[0]=r}return this.context=X,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):lt.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),lt.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return it.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=lt.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return lt.each(this,e,t)},ready:function(e){return lt.ready.promise().done(e),this},slice:function(){return this.pushStack(it.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(lt.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:nt,sort:[].sort,splice:[].splice},lt.fn.init.prototype=lt.fn,lt.extend=lt.fn.extend=function(){var e,n,i,s,r,o,a=arguments[0]||{},l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),"object"==typeof a||lt.isFunction(a)||(a={}),c===l&&(a=this,--l);c>l;l++)if(null!=(r=arguments[l]))for(s in r)e=a[s],i=r[s],a!==i&&(u&&i&&(lt.isPlainObject(i)||(n=lt.isArray(i)))?(n?(n=!1,o=e&&lt.isArray(e)?e:[]):o=e&&lt.isPlainObject(e)?e:{},a[s]=lt.extend(u,o,i)):i!==t&&(a[s]=i));return a},lt.extend({noConflict:function(t){return e.$===lt&&(e.$=J),t&&e.jQuery===lt&&(e.jQuery=K),lt},isReady:!1,readyWait:1,holdReady:function(e){e?lt.readyWait++:lt.ready(!0)},ready:function(e){if(e===!0?!--lt.readyWait:!lt.isReady){if(!X.body)return setTimeout(lt.ready);lt.isReady=!0,e!==!0&&--lt.readyWait>0||(V.resolveWith(X,[lt]),lt.fn.trigger&&lt(X).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===lt.type(e)},isArray:Array.isArray||function(e){return"array"===lt.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?Q[rt.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==lt.type(e)||e.nodeType||lt.isWindow(e))return!1;try{if(e.constructor&&!ot.call(e,"constructor")&&!ot.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||ot.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||X;var i=pt.exec(e),s=!n&&[];return i?[t.createElement(i[1])]:(i=lt.buildFragment([e],t,s),s&&lt(s).remove(),lt.merge([],i.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=lt.trim(t),t&&ft.test(t.replace(mt,"@").replace(vt,"]").replace(gt,"")))?new Function("return "+t)():(lt.error("Invalid JSON: "+t),void 0)},parseXML:function(n){var i,s;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||lt.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&lt.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(yt,"ms-").replace(bt,_t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var s,r=0,o=e.length,a=n(e);if(i){if(a)for(;o>r&&(s=t.apply(e[r],i),s!==!1);r++);else for(r in e)if(s=t.apply(e[r],i),s===!1)break}else if(a)for(;o>r&&(s=t.call(e[r],r,e[r]),s!==!1);r++);else for(r in e)if(s=t.call(e[r],r,e[r]),s===!1)break;return e},trim:at&&!at.call("﻿ ")?function(e){return null==e?"":at.call(e)}:function(e){return null==e?"":(e+"").replace(ht,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?lt.merge(i,"string"==typeof e?[e]:e):nt.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(st)return st.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=n.length,s=e.length,r=0;if("number"==typeof i)for(;i>r;r++)e[s++]=n[r];else for(;n[r]!==t;)e[s++]=n[r++];return e.length=s,e},grep:function(e,t,n){var i,s=[],r=0,o=e.length;for(n=!!n;o>r;r++)i=!!t(e[r],r),n!==i&&s.push(e[r]);return s},map:function(e,t,i){var s,r=0,o=e.length,a=n(e),l=[];if(a)for(;o>r;r++)s=t(e[r],r,i),null!=s&&(l[l.length]=s);else for(r in e)s=t(e[r],r,i),null!=s&&(l[l.length]=s);return tt.apply([],l)},guid:1,proxy:function(e,n){var i,s,r;return"string"==typeof n&&(r=e[n],n=e,e=r),lt.isFunction(e)?(i=it.call(arguments,2),s=function(){return e.apply(n||this,i.concat(it.call(arguments)))},s.guid=e.guid=e.guid||lt.guid++,s):t},access:function(e,n,i,s,r,o,a){var l=0,c=e.length,u=null==i;if("object"===lt.type(i)){r=!0;for(l in i)lt.access(e,n,l,i[l],!0,o,a)}else if(s!==t&&(r=!0,lt.isFunction(s)||(a=!0),u&&(a?(n.call(e,s),n=null):(u=n,n=function(e,t,n){return u.call(lt(e),n)})),n))for(;c>l;l++)n(e[l],i,a?s:s.call(e[l],l,n(e[l],i)));return r?e:u?n.call(e):c?n(e[0],i):o},now:function(){return(new Date).getTime()}}),lt.ready.promise=function(t){if(!V)if(V=lt.Deferred(),"complete"===X.readyState)setTimeout(lt.ready);else if(X.addEventListener)X.addEventListener("DOMContentLoaded",wt,!1),e.addEventListener("load",wt,!1);else{X.attachEvent("onreadystatechange",wt),e.attachEvent("onload",wt);var n=!1;try{n=null==e.frameElement&&X.documentElement}catch(i){}n&&n.doScroll&&function s(){if(!lt.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}xt(),lt.ready()}}()}return V.promise(t)},lt.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Q["[object "+t+"]"]=t.toLowerCase()}),U=lt(X);var kt={};lt.Callbacks=function(e){e="string"==typeof e?kt[e]||i(e):lt.extend({},e);var n,s,r,o,a,l,c=[],u=!e.once&&[],h=function(t){for(s=e.memory&&t,r=!0,a=l||0,l=0,o=c.length,n=!0;c&&o>a;a++)if(c[a].apply(t[0],t[1])===!1&&e.stopOnFalse){s=!1;break}n=!1,c&&(u?u.length&&h(u.shift()):s?c=[]:d.disable())
},d={add:function(){if(c){var t=c.length;!function i(t){lt.each(t,function(t,n){var s=lt.type(n);"function"===s?e.unique&&d.has(n)||c.push(n):n&&n.length&&"string"!==s&&i(n)})}(arguments),n?o=c.length:s&&(l=t,h(s))}return this},remove:function(){return c&&lt.each(arguments,function(e,t){for(var i;(i=lt.inArray(t,c,i))>-1;)c.splice(i,1),n&&(o>=i&&o--,a>=i&&a--)}),this},has:function(e){return e?lt.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],this},disable:function(){return c=u=s=t,this},disabled:function(){return!c},lock:function(){return u=t,s||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!c||r&&!u||(n?u.push(t):h(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},lt.extend({Deferred:function(e){var t=[["resolve","done",lt.Callbacks("once memory"),"resolved"],["reject","fail",lt.Callbacks("once memory"),"rejected"],["notify","progress",lt.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var e=arguments;return lt.Deferred(function(n){lt.each(t,function(t,r){var o=r[0],a=lt.isFunction(e[t])&&e[t];s[r[1]](function(){var e=a&&a.apply(this,arguments);e&&lt.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?lt.extend(e,i):i}},s={};return i.pipe=i.then,lt.each(t,function(e,r){var o=r[2],a=r[3];i[r[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?i:this,arguments),this},s[r[0]+"With"]=o.fireWith}),i.promise(s),e&&e.call(s,s),s},when:function(e){var t,n,i,s=0,r=it.call(arguments),o=r.length,a=1!==o||e&&lt.isFunction(e.promise)?o:0,l=1===a?e:lt.Deferred(),c=function(e,n,i){return function(s){n[e]=this,i[e]=arguments.length>1?it.call(arguments):s,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>s;s++)r[s]&&lt.isFunction(r[s].promise)?r[s].promise().done(c(s,i,r)).fail(l.reject).progress(c(s,n,t)):--a;return a||l.resolveWith(i,r),l.promise()}}),lt.support=function(){var t,n,i,s,r,o,a,l,c,u,h=X.createElement("div");if(h.setAttribute("className","t"),h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=h.getElementsByTagName("*"),i=h.getElementsByTagName("a")[0],!n||!i||!n.length)return{};r=X.createElement("select"),a=r.appendChild(X.createElement("option")),s=h.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==h.className,leadingWhitespace:3===h.firstChild.nodeType,tbody:!h.getElementsByTagName("tbody").length,htmlSerialize:!!h.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!s.value,optSelected:a.selected,enctype:!!X.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==X.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===X.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},s.checked=!0,t.noCloneChecked=s.cloneNode(!0).checked,r.disabled=!0,t.optDisabled=!a.disabled;try{delete h.test}catch(d){t.deleteExpando=!1}s=X.createElement("input"),s.setAttribute("value",""),t.input=""===s.getAttribute("value"),s.value="t",s.setAttribute("type","radio"),t.radioValue="t"===s.value,s.setAttribute("checked","t"),s.setAttribute("name","t"),o=X.createDocumentFragment(),o.appendChild(s),t.appendChecked=s.checked,t.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,h.attachEvent&&(h.attachEvent("onclick",function(){t.noCloneEvent=!1}),h.cloneNode(!0).click());for(u in{submit:!0,change:!0,focusin:!0})h.setAttribute(l="on"+u,"t"),t[u+"Bubbles"]=l in e||h.attributes[l].expando===!1;return h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===h.style.backgroundClip,lt(function(){var n,i,s,r="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",o=X.getElementsByTagName("body")[0];o&&(n=X.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(h),h.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s=h.getElementsByTagName("td"),s[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",t.reliableHiddenOffsets=c&&0===s[0].offsetHeight,h.innerHTML="",h.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===h.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(h,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(h,null)||{width:"4px"}).width,i=h.appendChild(X.createElement("div")),i.style.cssText=h.style.cssText=r,i.style.marginRight=i.style.width="0",h.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),typeof h.style.zoom!==G&&(h.innerHTML="",h.style.cssText=r+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===h.offsetWidth,h.style.display="block",h.innerHTML="<div></div>",h.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==h.offsetWidth,t.inlineBlockNeedsLayout&&(o.style.zoom=1)),o.removeChild(n),n=h=s=i=null)}),n=r=o=a=i=s=null,t}();var St=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ct=/([A-Z])/g;lt.extend({cache:{},expando:"jQuery"+(et+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?lt.cache[e[lt.expando]]:e[lt.expando],!!e&&!a(e)},data:function(e,t,n){return s(e,t,n)},removeData:function(e,t){return r(e,t)},_data:function(e,t,n){return s(e,t,n,!0)},_removeData:function(e,t){return r(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&lt.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),lt.fn.extend({data:function(e,n){var i,s,r=this[0],a=0,l=null;if(e===t){if(this.length&&(l=lt.data(r),1===r.nodeType&&!lt._data(r,"parsedAttrs"))){for(i=r.attributes;a<i.length;a++)s=i[a].name,s.indexOf("data-")||(s=lt.camelCase(s.slice(5)),o(r,s,l[s]));lt._data(r,"parsedAttrs",!0)}return l}return"object"==typeof e?this.each(function(){lt.data(this,e)}):lt.access(this,function(n){return n===t?r?o(r,e,lt.data(r,e)):null:(this.each(function(){lt.data(this,e,n)}),void 0)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){lt.removeData(this,e)})}}),lt.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=lt._data(e,t),n&&(!i||lt.isArray(n)?i=lt._data(e,t,lt.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=lt.queue(e,t),i=n.length,s=n.shift(),r=lt._queueHooks(e,t),o=function(){lt.dequeue(e,t)};"inprogress"===s&&(s=n.shift(),i--),r.cur=s,s&&("fx"===t&&n.unshift("inprogress"),delete r.stop,s.call(e,o,r)),!i&&r&&r.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return lt._data(e,n)||lt._data(e,n,{empty:lt.Callbacks("once memory").add(function(){lt._removeData(e,t+"queue"),lt._removeData(e,n)})})}}),lt.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?lt.queue(this[0],e):n===t?this:this.each(function(){var t=lt.queue(this,e,n);lt._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&lt.dequeue(this,e)})},dequeue:function(e){return this.each(function(){lt.dequeue(this,e)})},delay:function(e,t){return e=lt.fx?lt.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,s=1,r=lt.Deferred(),o=this,a=this.length,l=function(){--s||r.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";a--;)i=lt._data(o[a],e+"queueHooks"),i&&i.empty&&(s++,i.empty.add(l));return l(),r.promise(n)}});var Tt,Pt,Et=/[\t\r\n]/g,Nt=/\r/g,At=/^(?:input|select|textarea|button|object)$/i,Mt=/^(?:a|area)$/i,Lt=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,It=/^(?:checked|selected)$/i,$t=lt.support.getSetAttribute,Ot=lt.support.input;lt.fn.extend({attr:function(e,t){return lt.access(this,lt.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){lt.removeAttr(this,e)})},prop:function(e,t){return lt.access(this,lt.prop,e,t,arguments.length>1)},removeProp:function(e){return e=lt.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,s,r,o=0,a=this.length,l="string"==typeof e&&e;if(lt.isFunction(e))return this.each(function(t){lt(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ut)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Et," "):" ")){for(r=0;s=t[r++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");n.className=lt.trim(i)}return this},removeClass:function(e){var t,n,i,s,r,o=0,a=this.length,l=0===arguments.length||"string"==typeof e&&e;if(lt.isFunction(e))return this.each(function(t){lt(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(ut)||[];a>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Et," "):"")){for(r=0;s=t[r++];)for(;i.indexOf(" "+s+" ")>=0;)i=i.replace(" "+s+" "," ");n.className=e?lt.trim(i):""}return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return lt.isFunction(e)?this.each(function(n){lt(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var s,r=0,o=lt(this),a=t,l=e.match(ut)||[];s=l[r++];)a=i?a:!o.hasClass(s),o[a?"addClass":"removeClass"](s);else(n===G||"boolean"===n)&&(this.className&&lt._data(this,"__className__",this.className),this.className=this.className||e===!1?"":lt._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Et," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,i,s,r=this[0];{if(arguments.length)return s=lt.isFunction(e),this.each(function(n){var r,o=lt(this);1===this.nodeType&&(r=s?e.call(this,n,o.val()):e,null==r?r="":"number"==typeof r?r+="":lt.isArray(r)&&(r=lt.map(r,function(e){return null==e?"":e+""})),i=lt.valHooks[this.type]||lt.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=lt.valHooks[r.type]||lt.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(Nt,""):null==n?"":n)}}}),lt.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,i=e.options,s=e.selectedIndex,r="select-one"===e.type||0>s,o=r?null:[],a=r?s+1:i.length,l=0>s?a:r?s:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==s||(lt.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&lt.nodeName(n.parentNode,"optgroup"))){if(t=lt(n).val(),r)return t;o.push(t)}return o},set:function(e,t){var n=lt.makeArray(t);return lt(e).find("option").each(function(){this.selected=lt.inArray(lt(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,i){var s,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===G?lt.prop(e,n,i):(r=1!==a||!lt.isXMLDoc(e),r&&(n=n.toLowerCase(),s=lt.attrHooks[n]||(Lt.test(n)?Pt:Tt)),i===t?s&&r&&"get"in s&&null!==(o=s.get(e,n))?o:(typeof e.getAttribute!==G&&(o=e.getAttribute(n)),null==o?t:o):null!==i?s&&r&&"set"in s&&(o=s.set(e,i,n))!==t?o:(e.setAttribute(n,i+""),i):(lt.removeAttr(e,n),void 0))},removeAttr:function(e,t){var n,i,s=0,r=t&&t.match(ut);if(r&&1===e.nodeType)for(;n=r[s++];)i=lt.propFix[n]||n,Lt.test(n)?!$t&&It.test(n)?e[lt.camelCase("default-"+n)]=e[i]=!1:e[i]=!1:lt.attr(e,n,""),e.removeAttribute($t?n:i)},attrHooks:{type:{set:function(e,t){if(!lt.support.radioValue&&"radio"===t&&lt.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var s,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!lt.isXMLDoc(e),o&&(n=lt.propFix[n]||n,r=lt.propHooks[n]),i!==t?r&&"set"in r&&(s=r.set(e,i,n))!==t?s:e[n]=i:r&&"get"in r&&null!==(s=r.get(e,n))?s:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):At.test(e.nodeName)||Mt.test(e.nodeName)&&e.href?0:t}}}}),Pt={get:function(e,n){var i=lt.prop(e,n),s="boolean"==typeof i&&e.getAttribute(n),r="boolean"==typeof i?Ot&&$t?null!=s:It.test(n)?e[lt.camelCase("default-"+n)]:!!s:e.getAttributeNode(n);return r&&r.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?lt.removeAttr(e,n):Ot&&$t||!It.test(n)?e.setAttribute(!$t&&lt.propFix[n]||n,n):e[lt.camelCase("default-"+n)]=e[n]=!0,n}},Ot&&$t||(lt.attrHooks.value={get:function(e,n){var i=e.getAttributeNode(n);return lt.nodeName(e,"input")?e.defaultValue:i&&i.specified?i.value:t},set:function(e,t,n){return lt.nodeName(e,"input")?(e.defaultValue=t,void 0):Tt&&Tt.set(e,t,n)}}),$t||(Tt=lt.valHooks.button={get:function(e,n){var i=e.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:t},set:function(e,n,i){var s=e.getAttributeNode(i);return s||e.setAttributeNode(s=e.ownerDocument.createAttribute(i)),s.value=n+="","value"===i||n===e.getAttribute(i)?n:t}},lt.attrHooks.contenteditable={get:Tt.get,set:function(e,t,n){Tt.set(e,""===t?!1:t,n)}},lt.each(["width","height"],function(e,t){lt.attrHooks[t]=lt.extend(lt.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})})),lt.support.hrefNormalized||(lt.each(["href","src","width","height"],function(e,n){lt.attrHooks[n]=lt.extend(lt.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null==i?t:i}})}),lt.each(["href","src"],function(e,t){lt.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),lt.support.style||(lt.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),lt.support.optSelected||(lt.propHooks.selected=lt.extend(lt.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),lt.support.enctype||(lt.propFix.enctype="encoding"),lt.support.checkOn||lt.each(["radio","checkbox"],function(){lt.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),lt.each(["radio","checkbox"],function(){lt.valHooks[this]=lt.extend(lt.valHooks[this],{set:function(e,t){return lt.isArray(t)?e.checked=lt.inArray(lt(e).val(),t)>=0:void 0}})});var Dt=/^(?:input|select|textarea)$/i,Ht=/^key/,jt=/^(?:mouse|contextmenu)|click/,Rt=/^(?:focusinfocus|focusoutblur)$/,Ft=/^([^.]*)(?:\.(.+)|)$/;lt.event={global:{},add:function(e,n,i,s,r){var o,a,l,c,u,h,d,p,f,g,m,v=lt._data(e);if(v){for(i.handler&&(c=i,i=c.handler,r=c.selector),i.guid||(i.guid=lt.guid++),(a=v.events)||(a=v.events={}),(h=v.handle)||(h=v.handle=function(e){return typeof lt===G||e&&lt.event.triggered===e.type?t:lt.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(ut)||[""],l=n.length;l--;)o=Ft.exec(n[l])||[],f=m=o[1],g=(o[2]||"").split(".").sort(),u=lt.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,u=lt.event.special[f]||{},d=lt.extend({type:f,origType:m,data:s,handler:i,guid:i.guid,selector:r,needsContext:r&&lt.expr.match.needsContext.test(r),namespace:g.join(".")},c),(p=a[f])||(p=a[f]=[],p.delegateCount=0,u.setup&&u.setup.call(e,s,g,h)!==!1||(e.addEventListener?e.addEventListener(f,h,!1):e.attachEvent&&e.attachEvent("on"+f,h))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=i.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),lt.event.global[f]=!0;e=null}},remove:function(e,t,n,i,s){var r,o,a,l,c,u,h,d,p,f,g,m=lt.hasData(e)&&lt._data(e);if(m&&(u=m.events)){for(t=(t||"").match(ut)||[""],c=t.length;c--;)if(a=Ft.exec(t[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(h=lt.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,d=u[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=r=d.length;r--;)o=d[r],!s&&g!==o.origType||n&&n.guid!==o.guid||a&&!a.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(d.splice(r,1),o.selector&&d.delegateCount--,h.remove&&h.remove.call(e,o));l&&!d.length&&(h.teardown&&h.teardown.call(e,f,m.handle)!==!1||lt.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)lt.event.remove(e,p+t[c],n,i,!0);lt.isEmptyObject(u)&&(delete m.handle,lt._removeData(e,"events"))}},trigger:function(n,i,s,r){var o,a,l,c,u,h,d,p=[s||X],f=ot.call(n,"type")?n.type:n,g=ot.call(n,"namespace")?n.namespace.split("."):[];if(l=h=s=s||X,3!==s.nodeType&&8!==s.nodeType&&!Rt.test(f+lt.event.triggered)&&(f.indexOf(".")>=0&&(g=f.split("."),f=g.shift(),g.sort()),a=f.indexOf(":")<0&&"on"+f,n=n[lt.expando]?n:new lt.Event(f,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=s),i=null==i?[n]:lt.makeArray(i,[n]),u=lt.event.special[f]||{},r||!u.trigger||u.trigger.apply(s,i)!==!1)){if(!r&&!u.noBubble&&!lt.isWindow(s)){for(c=u.delegateType||f,Rt.test(c+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),h=l;h===(s.ownerDocument||X)&&p.push(h.defaultView||h.parentWindow||e)}for(d=0;(l=p[d++])&&!n.isPropagationStopped();)n.type=d>1?c:u.bindType||f,o=(lt._data(l,"events")||{})[n.type]&&lt._data(l,"handle"),o&&o.apply(l,i),o=a&&l[a],o&&lt.acceptData(l)&&o.apply&&o.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!(r||n.isDefaultPrevented()||u._default&&u._default.apply(s.ownerDocument,i)!==!1||"click"===f&&lt.nodeName(s,"a")||!lt.acceptData(s)||!a||!s[f]||lt.isWindow(s))){h=s[a],h&&(s[a]=null),lt.event.triggered=f;try{s[f]()}catch(m){}lt.event.triggered=t,h&&(s[a]=h)}return n.result}},dispatch:function(e){e=lt.event.fix(e);var n,i,s,r,o,a=[],l=it.call(arguments),c=(lt._data(this,"events")||{})[e.type]||[],u=lt.event.special[e.type]||{};if(l[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=lt.event.handlers.call(this,e,c),n=0;(r=a[n++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(s=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((lt.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),i!==t&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,n){var i,s,r,o,a=[],l=n.delegateCount,c=e.target;if(l&&c.nodeType&&(!e.button||"click"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||"click"!==e.type)){for(r=[],o=0;l>o;o++)s=n[o],i=s.selector+" ",r[i]===t&&(r[i]=s.needsContext?lt(i,this).index(c)>=0:lt.find(i,this,null,[c]).length),r[i]&&r.push(s);r.length&&a.push({elem:c,handlers:r})}return l<n.length&&a.push({elem:this,handlers:n.slice(l)}),a},fix:function(e){if(e[lt.expando])return e;var t,n,i,s=e.type,r=e,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=jt.test(s)?this.mouseHooks:Ht.test(s)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new lt.Event(r),t=i.length;t--;)n=i[t],e[n]=r[n];return e.target||(e.target=r.srcElement||X),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,r):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,s,r,o=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(s=e.target.ownerDocument||X,r=s.documentElement,i=s.body,e.pageX=n.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=n.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return lt.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==X.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===X.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var s=lt.extend(new lt.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?lt.event.trigger(s,null,t):lt.event.dispatch.call(t,s),s.isDefaultPrevented()&&n.preventDefault()}},lt.removeEvent=X.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===G&&(e[i]=null),e.detachEvent(i,n))},lt.Event=function(e,t){return this instanceof lt.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?l:c):this.type=e,t&&lt.extend(this,t),this.timeStamp=e&&e.timeStamp||lt.now(),this[lt.expando]=!0,void 0):new lt.Event(e,t)},lt.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},lt.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){lt.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,s=e.relatedTarget,r=e.handleObj;return(!s||s!==i&&!lt.contains(i,s))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),lt.support.submitBubbles||(lt.event.special.submit={setup:function(){return lt.nodeName(this,"form")?!1:(lt.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=lt.nodeName(n,"input")||lt.nodeName(n,"button")?n.form:t;i&&!lt._data(i,"submitBubbles")&&(lt.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),lt._data(i,"submitBubbles",!0))}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&lt.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return lt.nodeName(this,"form")?!1:(lt.event.remove(this,"._submit"),void 0)}}),lt.support.changeBubbles||(lt.event.special.change={setup:function(){return Dt.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(lt.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),lt.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),lt.event.simulate("change",this,e,!0)})),!1):(lt.event.add(this,"beforeactivate._change",function(e){var t=e.target;Dt.test(t.nodeName)&&!lt._data(t,"changeBubbles")&&(lt.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||lt.event.simulate("change",this.parentNode,e,!0)}),lt._data(t,"changeBubbles",!0))}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return lt.event.remove(this,"._change"),!Dt.test(this.nodeName)}}),lt.support.focusinBubbles||lt.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){lt.event.simulate(t,e.target,lt.event.fix(e),!0)};lt.event.special[t]={setup:function(){0===n++&&X.addEventListener(e,i,!0)},teardown:function(){0===--n&&X.removeEventListener(e,i,!0)}}}),lt.fn.extend({on:function(e,n,i,s,r){var o,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(o in e)this.on(o,n,i,e[o],r);return this}if(null==i&&null==s?(s=n,i=n=t):null==s&&("string"==typeof n?(s=i,i=t):(s=i,i=n,n=t)),s===!1)s=c;else if(!s)return this;return 1===r&&(a=s,s=function(e){return lt().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=lt.guid++)),this.each(function(){lt.event.add(this,e,s,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var s,r;if(e&&e.preventDefault&&e.handleObj)return s=e.handleObj,lt(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof e){for(r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=c),this.each(function(){lt.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){lt.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?lt.event.trigger(e,t,n,!0):void 0}}),function(e,t){function n(e){return ft.test(e+"")}function i(){var e,t=[];return e=function(n,i){return t.push(n+=" ")>S.cacheLength&&delete e[t.shift()],e[n]=i}}function s(e){return e[R]=!0,e}function r(e){var t=M.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function o(e,t,n,i){var s,r,o,a,l,c,u,p,f,g;if((t?t.ownerDocument||t:F)!==M&&A(t),t=t||M,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(!I&&!i){if(s=gt.exec(e))if(o=s[1]){if(9===a){if(r=t.getElementById(o),!r||!r.parentNode)return n;if(r.id===o)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(o))&&H(t,r)&&r.id===o)return n.push(r),n}else{if(s[2])return J.apply(n,Q.call(t.getElementsByTagName(e),0)),n;if((o=s[3])&&z.getByClassName&&t.getElementsByClassName)return J.apply(n,Q.call(t.getElementsByClassName(o),0)),n}if(z.qsa&&!$.test(e)){if(u=!0,p=R,f=t,g=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=h(e),(u=t.getAttribute("id"))?p=u.replace(yt,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=c.length;l--;)c[l]=p+d(c[l]);f=pt.test(e)&&t.parentNode||t,g=c.join(",")}if(g)try{return J.apply(n,Q.call(f.querySelectorAll(g),0)),n}catch(m){}finally{u||t.removeAttribute("id")}}}return _(e.replace(ot,"$1"),t,n,i)}function a(e,t){var n=t&&e,i=n&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function l(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return s(function(t){return t=+t,s(function(n,i){for(var s,r=e([],n.length,t),o=r.length;o--;)n[s=r[o]]&&(n[s]=!(i[s]=n[s]))})})}function h(e,t){var n,i,s,r,a,l,c,u=V[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=S.preFilter;a;){(!n||(i=at.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),l.push(s=[])),n=!1,(i=ct.exec(a))&&(n=i.shift(),s.push({value:n,type:i[0].replace(ot," ")}),a=a.slice(n.length));for(r in S.filter)!(i=dt[r].exec(a))||c[r]&&!(i=c[r](i))||(n=i.shift(),s.push({value:n,type:r,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?o.error(e):V(e,l).slice(0)}function d(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,s=n&&"parentNode"===i,r=q++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||s)return e(t,n,r)}:function(t,n,o){var a,l,c,u=B+" "+r;if(o){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(c=t[R]||(t[R]={}),(l=c[i])&&l[0]===u){if((a=l[1])===!0||a===k)return a===!0}else if(l=c[i]=[u],l[1]=e(t,n,o)||k,l[1]===!0)return!0}}function f(e){return e.length>1?function(t,n,i){for(var s=e.length;s--;)if(!e[s](t,n,i))return!1;return!0}:e[0]}function g(e,t,n,i,s){for(var r,o=[],a=0,l=e.length,c=null!=t;l>a;a++)(r=e[a])&&(!n||n(r,i,s))&&(o.push(r),c&&t.push(a));return o}function m(e,t,n,i,r,o){return i&&!i[R]&&(i=m(i)),r&&!r[R]&&(r=m(r,o)),s(function(s,o,a,l){var c,u,h,d=[],p=[],f=o.length,m=s||b(t||"*",a.nodeType?[a]:a,[]),v=!e||!s&&t?m:g(m,d,e,a,l),y=n?r||(s?e:f||i)?[]:o:v;if(n&&n(v,y,a,l),i)for(c=g(y,p),i(c,[],a,l),u=c.length;u--;)(h=c[u])&&(y[p[u]]=!(v[p[u]]=h));if(s){if(r||e){if(r){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(v[u]=h);r(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=r?Z.call(s,h):d[u])>-1&&(s[c]=!(o[c]=h))}}else y=g(y===o?y.splice(f,y.length):y),r?r(null,o,y,l):J.apply(o,y)})}function v(e){for(var t,n,i,s=e.length,r=S.relative[e[0].type],o=r||S.relative[" "],a=r?1:0,l=p(function(e){return e===t},o,!0),c=p(function(e){return Z.call(t,e)>-1},o,!0),u=[function(e,n,i){return!r&&(i||n!==N)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];s>a;a++)if(n=S.relative[e[a].type])u=[p(f(u),n)];else{if(n=S.filter[e[a].type].apply(null,e[a].matches),n[R]){for(i=++a;s>i&&!S.relative[e[i].type];i++);return m(a>1&&f(u),a>1&&d(e.slice(0,a-1)).replace(ot,"$1"),n,i>a&&v(e.slice(a,i)),s>i&&v(e=e.slice(i)),s>i&&d(e))}u.push(n)}return f(u)}function y(e,t){var n=0,i=t.length>0,r=e.length>0,a=function(s,a,l,c,u){var h,d,p,f=[],m=0,v="0",y=s&&[],b=null!=u,_=N,w=s||r&&S.find.TAG("*",u&&a.parentNode||a),x=B+=null==_?1:Math.random()||.1;for(b&&(N=a!==M&&a,k=n);null!=(h=w[v]);v++){if(r&&h){for(d=0;p=e[d++];)if(p(h,a,l)){c.push(h);break}b&&(B=x,k=++n)}i&&((h=!p&&h)&&m--,s&&y.push(h))}if(m+=v,i&&v!==m){for(d=0;p=t[d++];)p(y,f,a,l);if(s){if(m>0)for(;v--;)y[v]||f[v]||(f[v]=K.call(c));f=g(f)}J.apply(c,f),b&&!s&&f.length>0&&m+t.length>1&&o.uniqueSort(c)}return b&&(B=x,N=_),y};return i?s(a):a}function b(e,t,n){for(var i=0,s=t.length;s>i;i++)o(e,t[i],n);return n}function _(e,t,n,i){var s,r,o,a,l,c=h(e);if(!i&&1===c.length){if(r=c[0]=c[0].slice(0),r.length>2&&"ID"===(o=r[0]).type&&9===t.nodeType&&!I&&S.relative[r[1].type]){if(t=S.find.ID(o.matches[0].replace(_t,wt),t)[0],!t)return n;e=e.slice(r.shift().value.length)}for(s=dt.needsContext.test(e)?0:r.length;s--&&(o=r[s],!S.relative[a=o.type]);)if((l=S.find[a])&&(i=l(o.matches[0].replace(_t,wt),pt.test(r[0].type)&&t.parentNode||t))){if(r.splice(s,1),e=i.length&&d(r),!e)return J.apply(n,Q.call(i,0)),n;break}}return P(e,c)(i,t,I,n,pt.test(e)),n}function w(){}var x,k,S,C,T,P,E,N,A,M,L,I,$,O,D,H,j,R="sizzle"+-new Date,F=e.document,z={},B=0,q=0,W=i(),V=i(),U=i(),G=typeof t,X=1<<31,Y=[],K=Y.pop,J=Y.push,Q=Y.slice,Z=Y.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},et="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nt=tt.replace("w","w#"),it="([*^$|!~]?=)",st="\\["+et+"*("+tt+")"+et+"*(?:"+it+et+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+nt+")|)|)"+et+"*\\]",rt=":("+tt+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+st.replace(3,8)+")*)|.*)\\)|)",ot=new RegExp("^"+et+"+|((?:^|[^\\\\])(?:\\\\.)*)"+et+"+$","g"),at=new RegExp("^"+et+"*,"+et+"*"),ct=new RegExp("^"+et+"*([\\x20\\t\\r\\n\\f>+~])"+et+"*"),ut=new RegExp(rt),ht=new RegExp("^"+nt+"$"),dt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),NAME:new RegExp("^\\[name=['\"]?("+tt+")['\"]?\\]"),TAG:new RegExp("^("+tt.replace("w","w*")+")"),ATTR:new RegExp("^"+st),PSEUDO:new RegExp("^"+rt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+et+"*(even|odd|(([+-]|)(\\d*)n|)"+et+"*(?:([+-]|)"+et+"*(\\d+)|))"+et+"*\\)|)","i"),needsContext:new RegExp("^"+et+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+et+"*((?:-\\d)?\\d*)"+et+"*\\)|)(?=[^-]|$)","i")},pt=/[\x20\t\r\n\f]*[+~]/,ft=/^[^{]+\{\s*\[native code/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,yt=/'|\\/g,bt=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,_t=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,wt=function(e,t){var n="0x"+t-65536;
return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{Q.call(F.documentElement.childNodes,0)[0].nodeType}catch(xt){Q=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}T=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},A=o.setDocument=function(e){var i=e?e.ownerDocument||e:F;return i!==M&&9===i.nodeType&&i.documentElement?(M=i,L=i.documentElement,I=T(i),z.tagNameNoComments=r(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),z.attributes=r(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),z.getByClassName=r(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),z.getByName=r(function(e){e.id=R+0,e.innerHTML="<a name='"+R+"'></a><div name='"+R+"'></div>",L.insertBefore(e,L.firstChild);var t=i.getElementsByName&&i.getElementsByName(R).length===2+i.getElementsByName(R+0).length;return z.getIdNotName=!i.getElementById(R),L.removeChild(e),t}),S.attrHandle=r(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==G&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},z.getIdNotName?(S.find.ID=function(e,t){if(typeof t.getElementById!==G&&!I){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(e){var t=e.replace(_t,wt);return function(e){return e.getAttribute("id")===t}}):(S.find.ID=function(e,n){if(typeof n.getElementById!==G&&!I){var i=n.getElementById(e);return i?i.id===e||typeof i.getAttributeNode!==G&&i.getAttributeNode("id").value===e?[i]:t:[]}},S.filter.ID=function(e){var t=e.replace(_t,wt);return function(e){var n=typeof e.getAttributeNode!==G&&e.getAttributeNode("id");return n&&n.value===t}}),S.find.TAG=z.tagNameNoComments?function(e,t){return typeof t.getElementsByTagName!==G?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],s=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[s++];)1===n.nodeType&&i.push(n);return i}return r},S.find.NAME=z.getByName&&function(e,t){return typeof t.getElementsByName!==G?t.getElementsByName(name):void 0},S.find.CLASS=z.getByClassName&&function(e,t){return typeof t.getElementsByClassName===G||I?void 0:t.getElementsByClassName(e)},O=[],$=[":focus"],(z.qsa=n(i.querySelectorAll))&&(r(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||$.push("\\["+et+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||$.push(":checked")}),r(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&$.push("[*^$]="+et+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),$.push(",.*:")})),(z.matchesSelector=n(D=L.matchesSelector||L.mozMatchesSelector||L.webkitMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&r(function(e){z.disconnectedMatch=D.call(e,"div"),D.call(e,"[s!='']:x"),O.push("!=",rt)}),$=new RegExp($.join("|")),O=new RegExp(O.join("|")),H=n(L.contains)||L.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},j=L.compareDocumentPosition?function(e,t){var n;return e===t?(E=!0,0):(n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&n||e.parentNode&&11===e.parentNode.nodeType?e===i||H(F,e)?-1:t===i||H(F,t)?1:0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,s=0,r=e.parentNode,o=t.parentNode,l=[e],c=[t];if(e===t)return E=!0,0;if(!r||!o)return e===i?-1:t===i?1:r?-1:o?1:0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[s]===c[s];)s++;return s?a(l[s],c[s]):l[s]===F?-1:c[s]===F?1:0},E=!1,[0,0].sort(j),z.detectDuplicates=E,M):M},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==M&&A(e),t=t.replace(bt,"='$1']"),!(!z.matchesSelector||I||O&&O.test(t)||$.test(t)))try{var n=D.call(e,t);if(n||z.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(i){}return o(t,M,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==M&&A(e),H(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==M&&A(e),I||(t=t.toLowerCase()),(n=S.attrHandle[t])?n(e):I||z.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],i=1,s=0;if(E=!z.detectDuplicates,e.sort(j),E){for(;t=e[i];i++)t===e[i-1]&&(s=n.push(i));for(;s--;)e.splice(n[s],1)}return e},C=o.getText=function(e){var t,n="",i=0,s=e.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===s||4===s)return e.nodeValue}else for(;t=e[i];i++)n+=C(t);return n},S=o.selectors={cacheLength:50,createPseudo:s,match:dt,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_t,wt),e[3]=(e[4]||e[5]||"").replace(_t,wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return dt.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ut.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(_t,wt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+et+")"+e+"("+et+"|$)"))&&W(e,function(e){return t.test(e.className||typeof e.getAttribute!==G&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i){var s=o.attr(i,e);return null==s?"!="===t:t?(s+="","="===t?s===n:"!="===t?s!==n:"^="===t?n&&0===s.indexOf(n):"*="===t?n&&s.indexOf(n)>-1:"$="===t?n&&s.slice(-n.length)===n:"~="===t?(" "+s+" ").indexOf(n)>-1:"|="===t?s===n||s.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,i,s){var r="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===s?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,p,f,g=r!==o?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!l&&!a;if(m){if(r){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=g="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&y){for(u=m[R]||(m[R]={}),c=u[e]||[],p=c[0]===B&&c[1],d=c[0]===B&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[g]||(d=p=0)||f.pop();)if(1===h.nodeType&&++d&&h===t){u[e]=[B,p,d];break}}else if(y&&(c=(t[R]||(t[R]={}))[e])&&c[0]===B)d=c[1];else for(;(h=++p&&h&&h[g]||(d=p=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(y&&((h[R]||(h[R]={}))[e]=[B,d]),h!==t)););return d-=s,d===i||0===d%i&&d/i>=0}}},PSEUDO:function(e,t){var n,i=S.pseudos[e]||S.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return i[R]?i(t):i.length>1?(n=[e,e,"",t],S.setFilters.hasOwnProperty(e.toLowerCase())?s(function(e,n){for(var s,r=i(e,t),o=r.length;o--;)s=Z.call(e,r[o]),e[s]=!(n[s]=r[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:s(function(e){var t=[],n=[],i=P(e.replace(ot,"$1"));return i[R]?s(function(e,t,n,s){for(var r,o=i(e,null,s,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,s,r){return t[0]=e,i(t,null,r,n),!n.pop()}}),has:s(function(e){return function(t){return o(e,t).length>0}}),contains:s(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:s(function(e){return ht.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(_t,wt).toLowerCase(),function(t){var n;do if(n=I?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===M.activeElement&&(!M.hasFocus||M.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return vt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}};for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[x]=l(x);for(x in{submit:!0,reset:!0})S.pseudos[x]=c(x);P=o.compile=function(e,t){var n,i=[],s=[],r=U[e+" "];if(!r){for(t||(t=h(e)),n=t.length;n--;)r=v(t[n]),r[R]?i.push(r):s.push(r);r=U(e,y(s,i))}return r},S.pseudos.nth=S.pseudos.eq,S.filters=w.prototype=S.pseudos,S.setFilters=new w,A(),o.attr=lt.attr,lt.find=o,lt.expr=o.selectors,lt.expr[":"]=lt.expr.pseudos,lt.unique=o.uniqueSort,lt.text=o.getText,lt.isXMLDoc=o.isXML,lt.contains=o.contains}(e);var zt=/Until$/,Bt=/^(?:parents|prev(?:Until|All))/,qt=/^.[^:#\[\.,]*$/,Wt=lt.expr.match.needsContext,Vt={children:!0,contents:!0,next:!0,prev:!0};lt.fn.extend({find:function(e){var t,n,i,s=this.length;if("string"!=typeof e)return i=this,this.pushStack(lt(e).filter(function(){for(t=0;s>t;t++)if(lt.contains(i[t],this))return!0}));for(n=[],t=0;s>t;t++)lt.find(e,this[t],n);return n=this.pushStack(s>1?lt.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=lt(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(lt.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(h(this,e,!1))},filter:function(e){return this.pushStack(h(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?Wt.test(e)?lt(e,this.context).index(this[0])>=0:lt.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,i=0,s=this.length,r=[],o=Wt.test(e)||"string"!=typeof e?lt(e,t||this.context):0;s>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(o?o.index(n)>-1:lt.find.matchesSelector(n,e)){r.push(n);break}n=n.parentNode}return this.pushStack(r.length>1?lt.unique(r):r)},index:function(e){return e?"string"==typeof e?lt.inArray(this[0],lt(e)):lt.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?lt(e,t):lt.makeArray(e&&e.nodeType?[e]:e),i=lt.merge(this.get(),n);return this.pushStack(lt.unique(i))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),lt.fn.andSelf=lt.fn.addBack,lt.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return lt.dir(e,"parentNode")},parentsUntil:function(e,t,n){return lt.dir(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return lt.dir(e,"nextSibling")},prevAll:function(e){return lt.dir(e,"previousSibling")},nextUntil:function(e,t,n){return lt.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return lt.dir(e,"previousSibling",n)},siblings:function(e){return lt.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return lt.sibling(e.firstChild)},contents:function(e){return lt.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:lt.merge([],e.childNodes)}},function(e,t){lt.fn[e]=function(n,i){var s=lt.map(this,t,n);return zt.test(e)||(i=n),i&&"string"==typeof i&&(s=lt.filter(i,s)),s=this.length>1&&!Vt[e]?lt.unique(s):s,this.length>1&&Bt.test(e)&&(s=s.reverse()),this.pushStack(s)}}),lt.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?lt.find.matchesSelector(t[0],e)?[t[0]]:[]:lt.find.matches(e,t)},dir:function(e,n,i){for(var s=[],r=e[n];r&&9!==r.nodeType&&(i===t||1!==r.nodeType||!lt(r).is(i));)1===r.nodeType&&s.push(r),r=r[n];return s},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ut="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Gt=/ jQuery\d+="(?:null|\d+)"/g,Xt=new RegExp("<(?:"+Ut+")[\\s/>]","i"),Yt=/^\s+/,Kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Jt=/<([\w:]+)/,Qt=/<tbody/i,Zt=/<|&#?\w+;/,en=/<(?:script|style|link)/i,tn=/^(?:checkbox|radio)$/i,nn=/checked\s*(?:[^=]|=\s*.checked.)/i,sn=/^$|\/(?:java|ecma)script/i,rn=/^true\/(.*)/,on=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,an={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:lt.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ln=d(X),cn=ln.appendChild(X.createElement("div"));an.optgroup=an.option,an.tbody=an.tfoot=an.colgroup=an.caption=an.thead,an.th=an.td,lt.fn.extend({text:function(e){return lt.access(this,function(e){return e===t?lt.text(this):this.empty().append((this[0]&&this[0].ownerDocument||X).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(lt.isFunction(e))return this.each(function(t){lt(this).wrapAll(e.call(this,t))});if(this[0]){var t=lt(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return lt.isFunction(e)?this.each(function(t){lt(this).wrapInner(e.call(this,t))}):this.each(function(){var t=lt(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=lt.isFunction(e);return this.each(function(n){lt(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){lt.nodeName(this,"body")||lt(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||lt.filter(e,[n]).length>0)&&(t||1!==n.nodeType||lt.cleanData(b(n)),n.parentNode&&(t&&lt.contains(n.ownerDocument,n)&&m(b(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&lt.cleanData(b(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&lt.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return lt.clone(this,e,t)})},html:function(e){return lt.access(this,function(e){var n=this[0]||{},i=0,s=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Gt,""):t;if(!("string"!=typeof e||en.test(e)||!lt.support.htmlSerialize&&Xt.test(e)||!lt.support.leadingWhitespace&&Yt.test(e)||an[(Jt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Kt,"<$1></$2>");try{for(;s>i;i++)n=this[i]||{},1===n.nodeType&&(lt.cleanData(b(n,!1)),n.innerHTML=e);n=0}catch(r){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=lt.isFunction(e);return t||"string"==typeof e||(e=lt(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(lt(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){e=tt.apply([],e);var s,r,o,a,l,c,u=0,h=this.length,d=this,m=h-1,v=e[0],y=lt.isFunction(v);if(y||!(1>=h||"string"!=typeof v||lt.support.checkClone)&&nn.test(v))return this.each(function(s){var r=d.eq(s);y&&(e[0]=v.call(this,s,n?r.html():t)),r.domManip(e,n,i)});if(h&&(c=lt.buildFragment(e,this[0].ownerDocument,!1,this),s=c.firstChild,1===c.childNodes.length&&(c=s),s)){for(n=n&&lt.nodeName(s,"tr"),a=lt.map(b(c,"script"),f),o=a.length;h>u;u++)r=c,u!==m&&(r=lt.clone(r,!0,!0),o&&lt.merge(a,b(r,"script"))),i.call(n&&lt.nodeName(this[u],"table")?p(this[u],"tbody"):this[u],r,u);if(o)for(l=a[a.length-1].ownerDocument,lt.map(a,g),u=0;o>u;u++)r=a[u],sn.test(r.type||"")&&!lt._data(r,"globalEval")&&lt.contains(l,r)&&(r.src?lt.ajax({url:r.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):lt.globalEval((r.text||r.textContent||r.innerHTML||"").replace(on,"")));c=s=null}return this}}),lt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){lt.fn[e]=function(e){for(var n,i=0,s=[],r=lt(e),o=r.length-1;o>=i;i++)n=i===o?this:this.clone(!0),lt(r[i])[t](n),nt.apply(s,n.get());return this.pushStack(s)}}),lt.extend({clone:function(e,t,n){var i,s,r,o,a,l=lt.contains(e.ownerDocument,e);if(lt.support.html5Clone||lt.isXMLDoc(e)||!Xt.test("<"+e.nodeName+">")?r=e.cloneNode(!0):(cn.innerHTML=e.outerHTML,cn.removeChild(r=cn.firstChild)),!(lt.support.noCloneEvent&&lt.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||lt.isXMLDoc(e)))for(i=b(r),a=b(e),o=0;null!=(s=a[o]);++o)i[o]&&y(s,i[o]);if(t)if(n)for(a=a||b(e),i=i||b(r),o=0;null!=(s=a[o]);o++)v(s,i[o]);else v(e,r);return i=b(r,"script"),i.length>0&&m(i,!l&&b(e,"script")),i=a=s=null,r},buildFragment:function(e,t,n,i){for(var s,r,o,a,l,c,u,h=e.length,p=d(t),f=[],g=0;h>g;g++)if(r=e[g],r||0===r)if("object"===lt.type(r))lt.merge(f,r.nodeType?[r]:r);else if(Zt.test(r)){for(a=a||p.appendChild(t.createElement("div")),l=(Jt.exec(r)||["",""])[1].toLowerCase(),u=an[l]||an._default,a.innerHTML=u[1]+r.replace(Kt,"<$1></$2>")+u[2],s=u[0];s--;)a=a.lastChild;if(!lt.support.leadingWhitespace&&Yt.test(r)&&f.push(t.createTextNode(Yt.exec(r)[0])),!lt.support.tbody)for(r="table"!==l||Qt.test(r)?"<table>"!==u[1]||Qt.test(r)?0:a:a.firstChild,s=r&&r.childNodes.length;s--;)lt.nodeName(c=r.childNodes[s],"tbody")&&!c.childNodes.length&&r.removeChild(c);for(lt.merge(f,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else f.push(t.createTextNode(r));for(a&&p.removeChild(a),lt.support.appendChecked||lt.grep(b(f,"input"),_),g=0;r=f[g++];)if((!i||-1===lt.inArray(r,i))&&(o=lt.contains(r.ownerDocument,r),a=b(p.appendChild(r),"script"),o&&m(a),n))for(s=0;r=a[s++];)sn.test(r.type||"")&&n.push(r);return a=null,p},cleanData:function(e,t){for(var n,i,s,r,o=0,a=lt.expando,l=lt.cache,c=lt.support.deleteExpando,u=lt.event.special;null!=(n=e[o]);o++)if((t||lt.acceptData(n))&&(s=n[a],r=s&&l[s])){if(r.events)for(i in r.events)u[i]?lt.event.remove(n,i):lt.removeEvent(n,i,r.handle);l[s]&&(delete l[s],c?delete n[a]:typeof n.removeAttribute!==G?n.removeAttribute(a):n[a]=null,Z.push(s))}}});var un,hn,dn,pn=/alpha\([^)]*\)/i,fn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,mn=/^(none|table(?!-c[ea]).+)/,vn=/^margin/,yn=new RegExp("^("+ct+")(.*)$","i"),bn=new RegExp("^("+ct+")(?!px)[a-z%]+$","i"),_n=new RegExp("^([+-])=("+ct+")","i"),wn={BODY:"block"},xn={position:"absolute",visibility:"hidden",display:"block"},kn={letterSpacing:0,fontWeight:400},Sn=["Top","Right","Bottom","Left"],Cn=["Webkit","O","Moz","ms"];lt.fn.extend({css:function(e,n){return lt.access(this,function(e,n,i){var s,r,o={},a=0;if(lt.isArray(n)){for(r=hn(e),s=n.length;s>a;a++)o[n[a]]=lt.css(e,n[a],!1,r);return o}return i!==t?lt.style(e,n,i):lt.css(e,n)},e,n,arguments.length>1)},show:function(){return k(this,!0)},hide:function(){return k(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:x(this))?lt(this).show():lt(this).hide()})}}),lt.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=dn(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":lt.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,l=lt.camelCase(n),c=e.style;if(n=lt.cssProps[l]||(lt.cssProps[l]=w(c,l)),a=lt.cssHooks[n]||lt.cssHooks[l],i===t)return a&&"get"in a&&(r=a.get(e,!1,s))!==t?r:c[n];if(o=typeof i,"string"===o&&(r=_n.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(lt.css(e,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||lt.cssNumber[l]||(i+="px"),lt.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(c[n]="inherit"),a&&"set"in a&&(i=a.set(e,i,s))===t)))try{c[n]=i}catch(u){}}},css:function(e,n,i,s){var r,o,a,l=lt.camelCase(n);return n=lt.cssProps[l]||(lt.cssProps[l]=w(e.style,l)),a=lt.cssHooks[n]||lt.cssHooks[l],a&&"get"in a&&(o=a.get(e,!0,i)),o===t&&(o=dn(e,n,s)),"normal"===o&&n in kn&&(o=kn[n]),""===i||i?(r=parseFloat(o),i===!0||lt.isNumeric(r)?r||0:o):o},swap:function(e,t,n,i){var s,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];s=n.apply(e,i||[]);for(r in t)e.style[r]=o[r];return s}}),e.getComputedStyle?(hn=function(t){return e.getComputedStyle(t,null)},dn=function(e,n,i){var s,r,o,a=i||hn(e),l=a?a.getPropertyValue(n)||a[n]:t,c=e.style;return a&&(""!==l||lt.contains(e.ownerDocument,e)||(l=lt.style(e,n)),bn.test(l)&&vn.test(n)&&(s=c.width,r=c.minWidth,o=c.maxWidth,c.minWidth=c.maxWidth=c.width=l,l=a.width,c.width=s,c.minWidth=r,c.maxWidth=o)),l}):X.documentElement.currentStyle&&(hn=function(e){return e.currentStyle},dn=function(e,n,i){var s,r,o,a=i||hn(e),l=a?a[n]:t,c=e.style;return null==l&&c&&c[n]&&(l=c[n]),bn.test(l)&&!gn.test(n)&&(s=c.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),c.left="fontSize"===n?"1em":l,l=c.pixelLeft+"px",c.left=s,o&&(r.left=o)),""===l?"auto":l}),lt.each(["height","width"],function(e,t){lt.cssHooks[t]={get:function(e,n,i){return n?0===e.offsetWidth&&mn.test(lt.css(e,"display"))?lt.swap(e,xn,function(){return T(e,t,i)}):T(e,t,i):void 0},set:function(e,n,i){var s=i&&hn(e);return S(e,n,i?C(e,t,i,lt.support.boxSizing&&"border-box"===lt.css(e,"boxSizing",!1,s),s):0)}}}),lt.support.opacity||(lt.cssHooks.opacity={get:function(e,t){return fn.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,s=lt.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===lt.trim(r.replace(pn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=pn.test(r)?r.replace(pn,s):r+" "+s)}}),lt(function(){lt.support.reliableMarginRight||(lt.cssHooks.marginRight={get:function(e,t){return t?lt.swap(e,{display:"inline-block"},dn,[e,"marginRight"]):void 0}}),!lt.support.pixelPosition&&lt.fn.position&&lt.each(["top","left"],function(e,t){lt.cssHooks[t]={get:function(e,n){return n?(n=dn(e,t),bn.test(n)?lt(e).position()[t]+"px":n):void 0}}})}),lt.expr&&lt.expr.filters&&(lt.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!lt.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||lt.css(e,"display"))},lt.expr.filters.visible=function(e){return!lt.expr.filters.hidden(e)}),lt.each({margin:"",padding:"",border:"Width"},function(e,t){lt.cssHooks[e+t]={expand:function(n){for(var i=0,s={},r="string"==typeof n?n.split(" "):[n];4>i;i++)s[e+Sn[i]+t]=r[i]||r[i-2]||r[0];return s}},vn.test(e)||(lt.cssHooks[e+t].set=S)});var Tn=/%20/g,Pn=/\[\]$/,En=/\r?\n/g,Nn=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;lt.fn.extend({serialize:function(){return lt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=lt.prop(this,"elements");return e?lt.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!lt(this).is(":disabled")&&An.test(this.nodeName)&&!Nn.test(e)&&(this.checked||!tn.test(e))}).map(function(e,t){var n=lt(this).val();return null==n?null:lt.isArray(n)?lt.map(n,function(e){return{name:t.name,value:e.replace(En,"\r\n")}}):{name:t.name,value:n.replace(En,"\r\n")}}).get()}}),lt.param=function(e,n){var i,s=[],r=function(e,t){t=lt.isFunction(t)?t():null==t?"":t,s[s.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=lt.ajaxSettings&&lt.ajaxSettings.traditional),lt.isArray(e)||e.jquery&&!lt.isPlainObject(e))lt.each(e,function(){r(this.name,this.value)});else for(i in e)N(i,e[i],n,r);return s.join("&").replace(Tn,"+")},lt.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){lt.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),lt.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var Mn,Ln,In=lt.now(),$n=/\?/,On=/#.*$/,Dn=/([?&])_=[^&]*/,Hn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,jn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rn=/^(?:GET|HEAD)$/,Fn=/^\/\//,zn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Bn=lt.fn.load,qn={},Wn={},Vn="*/".concat("*");try{Ln=Y.href}catch(Un){Ln=X.createElement("a"),Ln.href="",Ln=Ln.href}Mn=zn.exec(Ln.toLowerCase())||[],lt.fn.load=function(e,n,i){if("string"!=typeof e&&Bn)return Bn.apply(this,arguments);var s,r,o,a=this,l=e.indexOf(" ");return l>=0&&(s=e.slice(l,e.length),e=e.slice(0,l)),lt.isFunction(n)?(i=n,n=t):n&&"object"==typeof n&&(o="POST"),a.length>0&&lt.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){r=arguments,a.html(s?lt("<div>").append(lt.parseHTML(e)).find(s):e)}).complete(i&&function(e,t){a.each(i,r||[e.responseText,t,e])}),this},lt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){lt.fn[t]=function(e){return this.on(t,e)}}),lt.each(["get","post"],function(e,n){lt[n]=function(e,i,s,r){return lt.isFunction(i)&&(r=r||s,s=i,i=t),lt.ajax({url:e,type:n,dataType:r,data:i,success:s})}}),lt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ln,type:"GET",isLocal:jn.test(Mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":lt.parseJSON,"text xml":lt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,lt.ajaxSettings),t):L(lt.ajaxSettings,e)},ajaxPrefilter:A(qn),ajaxTransport:A(Wn),ajax:function(e,n){function i(e,n,i,s){var r,h,y,b,w,k=n;2!==_&&(_=2,l&&clearTimeout(l),u=t,a=s||"",x.readyState=e>0?4:0,i&&(b=I(d,x,i)),e>=200&&300>e||304===e?(d.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(lt.lastModified[o]=w),w=x.getResponseHeader("etag"),w&&(lt.etag[o]=w)),204===e?(r=!0,k="nocontent"):304===e?(r=!0,k="notmodified"):(r=$(d,b),k=r.state,h=r.data,y=r.error,r=!y)):(y=k,(e||!k)&&(k="error",0>e&&(e=0))),x.status=e,x.statusText=(n||k)+"",r?g.resolveWith(p,[h,k,x]):g.rejectWith(p,[x,k,y]),x.statusCode(v),v=t,c&&f.trigger(r?"ajaxSuccess":"ajaxError",[x,d,r?h:y]),m.fireWith(p,[x,k]),c&&(f.trigger("ajaxComplete",[x,d]),--lt.active||lt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var s,r,o,a,l,c,u,h,d=lt.ajaxSetup({},n),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?lt(p):lt.event,g=lt.Deferred(),m=lt.Callbacks("once memory"),v=d.statusCode||{},y={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!h)for(h={};t=Hn.exec(a);)h[t[1].toLowerCase()]=t[2];t=h[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return _||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)v[t]=[v[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return u&&u.abort(t),i(0,t),this}};if(g.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,d.url=((e||d.url||Ln)+"").replace(On,"").replace(Fn,Mn[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=lt.trim(d.dataType||"*").toLowerCase().match(ut)||[""],null==d.crossDomain&&(s=zn.exec(d.url.toLowerCase()),d.crossDomain=!(!s||s[1]===Mn[1]&&s[2]===Mn[2]&&(s[3]||("http:"===s[1]?80:443))==(Mn[3]||("http:"===Mn[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=lt.param(d.data,d.traditional)),M(qn,d,n,x),2===_)return x;c=d.global,c&&0===lt.active++&&lt.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Rn.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=($n.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Dn.test(o)?o.replace(Dn,"$1_="+In++):o+($n.test(o)?"&":"?")+"_="+In++)),d.ifModified&&(lt.lastModified[o]&&x.setRequestHeader("If-Modified-Since",lt.lastModified[o]),lt.etag[o]&&x.setRequestHeader("If-None-Match",lt.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",d.contentType),x.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Vn+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)x.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(p,x,d)===!1||2===_))return x.abort();w="abort";for(r in{success:1,error:1,complete:1})x[r](d[r]);if(u=M(Wn,d,n,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,d]),d.async&&d.timeout>0&&(l=setTimeout(function(){x.abort("timeout")},d.timeout));try{_=1,u.send(y,i)}catch(k){if(!(2>_))throw k;i(-1,k)}}else i(-1,"No Transport");return x},getScript:function(e,n){return lt.get(e,t,n,"script")},getJSON:function(e,t,n){return lt.get(e,t,n,"json")}}),lt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return lt.globalEval(e),e}}}),lt.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)
}),lt.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=X.head||lt("head")[0]||X.documentElement;return{send:function(t,s){n=X.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||s(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Gn=[],Xn=/(=)\?(?=&|$)|\?\?/;lt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gn.pop()||lt.expando+"_"+In++;return this[e]=!0,e}}),lt.ajaxPrefilter("json jsonp",function(n,i,s){var r,o,a,l=n.jsonp!==!1&&(Xn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(r=n.jsonpCallback=lt.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Xn,"$1"+r):n.jsonp!==!1&&(n.url+=($n.test(n.url)?"&":"?")+n.jsonp+"="+r),n.converters["script json"]=function(){return a||lt.error(r+" was not called"),a[0]},n.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},s.always(function(){e[r]=o,n[r]&&(n.jsonpCallback=i.jsonpCallback,Gn.push(r)),a&&lt.isFunction(o)&&o(a[0]),a=o=t}),"script"):void 0});var Yn,Kn,Jn=0,Qn=e.ActiveXObject&&function(){var e;for(e in Yn)Yn[e](t,!0)};lt.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&O()||D()}:O,Kn=lt.ajaxSettings.xhr(),lt.support.cors=!!Kn&&"withCredentials"in Kn,Kn=lt.support.ajax=!!Kn,Kn&&lt.ajaxTransport(function(n){if(!n.crossDomain||lt.support.cors){var i;return{send:function(s,r){var o,a,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)l[a]=n.xhrFields[a];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)l.setRequestHeader(a,s[a])}catch(c){}l.send(n.hasContent&&n.data||null),i=function(e,s){var a,c,u,h;try{if(i&&(s||4===l.readyState))if(i=t,o&&(l.onreadystatechange=lt.noop,Qn&&delete Yn[o]),s)4!==l.readyState&&l.abort();else{h={},a=l.status,c=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(h.text=l.responseText);try{u=l.statusText}catch(d){u=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=h.text?200:404}}catch(p){s||r(-1,p)}h&&r(a,u,h,c)},n.async?4===l.readyState?setTimeout(i):(o=++Jn,Qn&&(Yn||(Yn={},lt(e).unload(Qn)),Yn[o]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(t,!0)}}}});var Zn,ei,ti=/^(?:toggle|show|hide)$/,ni=new RegExp("^(?:([+-])=|)("+ct+")([a-z%]*)$","i"),ii=/queueHooks$/,si=[z],ri={"*":[function(e,t){var n,i,s=this.createTween(e,t),r=ni.exec(t),o=s.cur(),a=+o||0,l=1,c=20;if(r){if(n=+r[2],i=r[3]||(lt.cssNumber[e]?"":"px"),"px"!==i&&a){a=lt.css(s.elem,e,!0)||n||1;do l=l||".5",a/=l,lt.style(s.elem,e,a+i);while(l!==(l=s.cur()/o)&&1!==l&&--c)}s.unit=i,s.start=a,s.end=r[1]?a+(r[1]+1)*n:n}return s}]};lt.Animation=lt.extend(R,{tweener:function(e,t){lt.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,s=e.length;s>i;i++)n=e[i],ri[n]=ri[n]||[],ri[n].unshift(t)},prefilter:function(e,t){t?si.unshift(e):si.push(e)}}),lt.Tween=B,B.prototype={constructor:B,init:function(e,t,n,i,s,r){this.elem=e,this.prop=n,this.easing=s||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=r||(lt.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.pos=t=this.options.duration?lt.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=lt.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){lt.fx.step[e.prop]?lt.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[lt.cssProps[e.prop]]||lt.cssHooks[e.prop])?lt.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},lt.each(["toggle","show","hide"],function(e,t){var n=lt.fn[t];lt.fn[t]=function(e,i,s){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,i,s)}}),lt.fn.extend({fadeTo:function(e,t,n,i){return this.filter(x).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var s=lt.isEmptyObject(e),r=lt.speed(t,n,i),o=function(){var t=R(this,lt.extend({},e),r);o.finish=function(){t.stop(!0)},(s||lt._data(this,"finish"))&&t.stop(!0)};return o.finish=o,s||r.queue===!1?this.each(o):this.queue(r.queue,o)},stop:function(e,n,i){var s=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",r=lt.timers,o=lt._data(this);if(n)o[n]&&o[n].stop&&s(o[n]);else for(n in o)o[n]&&o[n].stop&&ii.test(n)&&s(o[n]);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(r[n].anim.stop(i),t=!1,r.splice(n,1));(t||!i)&&lt.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=lt._data(this),i=n[e+"queue"],s=n[e+"queueHooks"],r=lt.timers,o=i?i.length:0;for(n.finish=!0,lt.queue(this,e,[]),s&&s.cur&&s.cur.finish&&s.cur.finish.call(this),t=r.length;t--;)r[t].elem===this&&r[t].queue===e&&(r[t].anim.stop(!0),r.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),lt.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){lt.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),lt.speed=function(e,t,n){var i=e&&"object"==typeof e?lt.extend({},e):{complete:n||!n&&t||lt.isFunction(e)&&e,duration:e,easing:n&&t||t&&!lt.isFunction(t)&&t};return i.duration=lt.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in lt.fx.speeds?lt.fx.speeds[i.duration]:lt.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){lt.isFunction(i.old)&&i.old.call(this),i.queue&&lt.dequeue(this,i.queue)},i},lt.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},lt.timers=[],lt.fx=B.prototype.init,lt.fx.tick=function(){var e,n=lt.timers,i=0;for(Zn=lt.now();i<n.length;i++)e=n[i],e()||n[i]!==e||n.splice(i--,1);n.length||lt.fx.stop(),Zn=t},lt.fx.timer=function(e){e()&&lt.timers.push(e)&&lt.fx.start()},lt.fx.interval=13,lt.fx.start=function(){ei||(ei=setInterval(lt.fx.tick,lt.fx.interval))},lt.fx.stop=function(){clearInterval(ei),ei=null},lt.fx.speeds={slow:600,fast:200,_default:400},lt.fx.step={},lt.expr&&lt.expr.filters&&(lt.expr.filters.animated=function(e){return lt.grep(lt.timers,function(t){return e===t.elem}).length}),lt.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){lt.offset.setOffset(this,e,t)});var n,i,s={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return n=o.documentElement,lt.contains(n,r)?(typeof r.getBoundingClientRect!==G&&(s=r.getBoundingClientRect()),i=W(o),{top:s.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},lt.offset={setOffset:function(e,t,n){var i=lt.css(e,"position");"static"===i&&(e.style.position="relative");var s,r,o=lt(e),a=o.offset(),l=lt.css(e,"top"),c=lt.css(e,"left"),u=("absolute"===i||"fixed"===i)&&lt.inArray("auto",[l,c])>-1,h={},d={};u?(d=o.position(),s=d.top,r=d.left):(s=parseFloat(l)||0,r=parseFloat(c)||0),lt.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(h.top=t.top-a.top+s),null!=t.left&&(h.left=t.left-a.left+r),"using"in t?t.using.call(e,h):o.css(h)}},lt.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===lt.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),lt.nodeName(e[0],"html")||(n=e.offset()),n.top+=lt.css(e[0],"borderTopWidth",!0),n.left+=lt.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-lt.css(i,"marginTop",!0),left:t.left-n.left-lt.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||X.documentElement;e&&!lt.nodeName(e,"html")&&"static"===lt.css(e,"position");)e=e.offsetParent;return e||X.documentElement})}}),lt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);lt.fn[e]=function(s){return lt.access(this,function(e,s,r){var o=W(e);return r===t?o?n in o?o[n]:o.document.documentElement[s]:e[s]:(o?o.scrollTo(i?lt(o).scrollLeft():r,i?r:lt(o).scrollTop()):e[s]=r,void 0)},e,s,arguments.length,null)}}),lt.each({Height:"height",Width:"width"},function(e,n){lt.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,s){lt.fn[s]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(s===!0||r===!0?"margin":"border");return lt.access(this,function(n,i,s){var r;return lt.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+e],r["scroll"+e],n.body["offset"+e],r["offset"+e],r["client"+e])):s===t?lt.css(n,i,a):lt.style(n,i,s,a)},n,o?s:t,o,null)}})}),e.jQuery=e.$=lt,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return lt})}(window),function(e,t){"undefined"!=typeof exports?t(e,exports,require("underscore")):"function"==typeof define&&define.amd?define("backbone",["underscore","jquery","exports"],function(n,i,s){e.Backbone=t(e,s,n,i)}):e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,i){var s=e.Backbone,r=[],o=r.push,a=r.slice,l=r.splice;t.VERSION="1.0.0",t.$=i,t.noConflict=function(){return e.Backbone=s,this},t.emulateHTTP=!1,t.emulateJSON=!1;var c=t.Events={on:function(e,t,n){if(!h(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!h(this,"once",e,[t,i])||!t)return this;var s=this,r=n.once(function(){s.off(e,r),t.apply(this,arguments)});return r._callback=t,this.on(e,r,i)},off:function(e,t,i){var s,r,o,a,l,c,u,d;if(!this._events||!h(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(a=e?[e]:n.keys(this._events),l=0,c=a.length;c>l;l++)if(e=a[l],o=this._events[e]){if(this._events[e]=s=[],t||i)for(u=0,d=o.length;d>u;u++)r=o[u],(t&&t!==r.callback&&t!==r.callback._callback||i&&i!==r.context)&&s.push(r);s.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!h(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&d(n,t),i&&d(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var s=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var r in i)i[r].off(t,n,this),s&&delete this._listeners[r];return this}},u=/\s+/,h=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(u.test(n)){for(var r=n.split(u),o=0,a=r.length;a>o;o++)e[t].apply(e,[r[o]].concat(i));return!1}return!0},d=function(e,t){var n,i=-1,s=e.length,r=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r,o,a);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){c[t]=function(t,i,s){var r=this._listeners||(this._listeners={}),o=t._listenerId||(t._listenerId=n.uniqueId("l"));return r[o]=t,"object"==typeof i&&(s=this),t[e](i,s,this),this}}),c.bind=c.on,c.unbind=c.off,n.extend(t,c);var f=t.Model=function(e,t){var i,s=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},n.extend(this,n.pick(t,g)),t.parse&&(s=this.parse(s,t)||{}),(i=n.result(this,"defaults"))&&(s=n.defaults({},s,i)),this.set(s,t),this.changed={},this.initialize.apply(this,arguments)},g=["url","urlRoot","collection"];n.extend(f.prototype,c,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var s,r,o,a,l,c,u,h;if(null==e)return this;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;o=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)t=r[s],n.isEqual(h[s],t)||a.push(s),n.isEqual(u[s],t)?delete this.changed[s]:this.changed[s]=t,o?delete h[s]:h[s]=t;if(!l){a.length&&(this._pending=!0);for(var d=0,p=a.length;p>d;d++)this.trigger("change:"+a[d],this,h[a[d]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in e)n.isEqual(s[r],t=e[r])||((i||(i={}))[r]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),t.trigger("sync",t,n,e),void 0):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,i){var s,r,o,a=this.attributes;if(null==e||"object"==typeof e?(s=e,i=t):(s={})[e]=t,!(!s||i&&i.wait||this.set(s,i)))return!1;if(i=n.extend({validate:!0},i),!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},a,s)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=a;var t=l.parse(e,i);return i.wait&&(t=n.extend(s||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),l.trigger("sync",l,e,i),void 0)},j(this,i),r=this.isNew()?"create":i.patch?"patch":"update","patch"===r&&(i.attrs=s),o=this.sync(r,this,i),s&&i.wait&&(this.attributes=a),o},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,s=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&s(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;j(this,e);var r=this.sync("delete",this,e);return e.wait||s(),r},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t||{},{validationError:i})),!1):!0}});var m=["keys","values","pairs","invert","pick","omit"];n.each(m,function(e){f.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var v=t.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},y={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};n.extend(v.prototype,c,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.defaults(t||{},b))},remove:function(e,t){e=n.isArray(e)?e.slice():[e],t||(t={});var i,s,r,o;for(i=0,s=e.length;s>i;i++)o=this.get(e[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,t.silent||(t.index=r,o.trigger("remove",o,this,t)),this._removeReference(o));return this},set:function(e,t){t=n.defaults(t||{},y),t.parse&&(e=this.parse(e,t)),n.isArray(e)||(e=e?[e]:[]);var i,s,r,a,c,u=t.at,h=this.comparator&&null==u&&t.sort!==!1,d=n.isString(this.comparator)?this.comparator:null,p=[],f=[],g={};for(i=0,s=e.length;s>i;i++)(r=this._prepareModel(e[i],t))&&((a=this.get(r))?(t.remove&&(g[a.cid]=!0),t.merge&&(a.set(r.attributes,t),h&&!c&&a.hasChanged(d)&&(c=!0))):t.add&&(p.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(t.remove){for(i=0,s=this.length;s>i;++i)g[(r=this.models[i]).cid]||f.push(r);f.length&&this.remove(f,t)}if(p.length&&(h&&(c=!0),this.length+=p.length,null!=u?l.apply(this.models,[u,0].concat(p)):o.apply(this.models,p)),c&&this.sort({silent:!0}),t.silent)return this;for(i=0,s=p.length;s>i;i++)(r=p[i]).trigger("add",r,this,t);return c&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,n.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,i){t||(t=this.comparator);var s=n.isFunction(t)?t:function(e){return e.get(t)};return n.sortedIndex(this.models,e,s,i)},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,s=t.success;return t.success=function(n){t.wait&&i.add(e,t),s&&s(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var _=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(_,function(e){v.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy"];n.each(w,function(e){v.prototype[e]=function(t,i){var s=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,s,i)}});var x=t.View=function(e){this.cid=n.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},k=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];n.extend(x.prototype,c,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var s=t.match(k),r=s[1],o=s[2];i=n.bind(i,this),r+=".delegateEvents"+this.cid,""===o?this.$el.on(r,i):this.$el.on(r,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=n.extend({},n.result(this,"options"),e)),n.extend(this,n.pick(e,S)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,s){var r=C[e];n.defaults(s||(s={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:r,dataType:"json"};if(s.url||(o.url=n.result(i,"url")||H()),null!=s.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",s.emulateJSON&&(o.data._method=r);var a=s.beforeSend;s.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",r),a?a.apply(this,arguments):void 0}}"GET"===o.type||s.emulateJSON||(o.processData=!1),"PATCH"!==o.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=t.ajax(n.extend(o,s));return i.trigger("request",i,l,s),l};var C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var T=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},P=/\((.*?)\)/g,E=/(\(\?)?:\w+/g,N=/\*\w+/g,A=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(T.prototype,c,{initialize:function(){},route:function(e,i,s){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var r=this;return t.history.route(e,function(n){var o=r._extractParameters(e,n);s&&s.apply(r,o),r.trigger.apply(r,["route:"+i].concat(o)),r.trigger("route",i,o),t.history.trigger("route",r,i,o)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,"\\$&").replace(P,"(?:$1)?").replace(E,function(e,t){return t?e:"([^/]+)"}).replace(N,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e){return e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,$=/msie [\w.]+/,O=/\/$/;M.started=!1,n.extend(M.prototype,c,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(O,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(L,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,r=$.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(I,"/"),r&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var o=this.location,a=o.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!a?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&a&&o.hash&&(this.fragment=this.getHash().replace(L,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!M.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new M;var D=function(e,t){var i,s=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,t);var r=function(){this.constructor=i};return r.prototype=s.prototype,i.prototype=new r,e&&n.extend(i.prototype,e),i.__super__=s.prototype,i};f.extend=v.extend=T.extend=x.extend=M.extend=D;var H=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t}),define("core/config",["underscore"],function(){var e,t;return t="core/config",e={appName:"TidePool",debug:!0,googleAnalyticsKey:"UA-41751970-1",kissKey:"e984c464402cf32c0c208795aeede25f8a24d221",apiServer:"",appSecret:"5bd30dcd2c0b9077bd6b49e8087deb25c0491bd861c99d2d8b2b54c861d039c0",appId:"3035f5284e5ed5c3c09691662b69f4b203050feacb1eb361b75e6edc69ffd46f"},window.apiServerUrl=e.apiServer,e}),define("core/analytics",[],function(){var e,t,n,i,s,r,o,a;return t="core/analytics",i=function(e){var t;return t=t||[],t.push(["_setAccount",e]),t.push(["_setDomainName","tidepool.co"]),t.push(["_setAllowLinker",!0]),function(){var e,t;return e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}()},n=function(e){var t,n,i;return i=function(e){return setTimeout(function(){var t,n,i;return t=document,n=t.getElementsByTagName("script")[0],i=t.createElement("script"),i.type="text/javascript",i.async=!0,i.src=e,n.parentNode.insertBefore(i,n)},1)},n=n||[],t=t||e,i("//i.kissmetrics.com/i.js"),i("//doug1izaerwt3.cloudfront.net/"+t+".1.js")},a=function(e,t){return null!=e&&"undefined"!=typeof _kmq&&null!==_kmq?_kmq.push(["record",e,t]):void 0},o=function(e){return null!=e&&"undefined"!=typeof _gaq&&null!==_gaq?_gaq.push(["_trackPageview"]):void 0},r=function(e,t,n,i){return"undefined"!=typeof eventName&&null!==eventName&&"undefined"!=typeof _gaq&&null!==_gaq?_gaq.push(["_trackEvent",e,t,n,i]):void 0},s=function(e){return"undefined"!=typeof _kmq&&null!==_kmq?_kmq.push(["identity",e]):void 0},e=function(e){var t=this;return e.googleAnalyticsKey&&i(e.googleAnalyticsKey),e.kissKey&&n(e.kissKey),window.onerror=function(e,n,i){return t.track(t.CATEGORIES.jsErr,e,n,i),!1},this},e.prototype={CATEGORIES:{viewPage:"ViewPage: ",viewLightbox:"ViewLightbox: ",jsErr:"JS Error: ",serverError:"Server Error: "},trackPage:function(e){return o(e),a(this.CATEGORIES.viewPage+e)},track:function(e,t,n,i){return null!=e&&null!=t?(r(e,t,n,i),n&&i?a(""+e+":"+t,{label:n,value:i}):a(""+e+":"+t)):void 0},setUserIdentity:function(e){return null!=e?s(e):void 0}},e}),function(){var e={};!function(e){e.VERSION="1.0.rc.1",e.helpers={},e.partials={},e.registerHelper=function(e,t,n){n&&(t.not=n),this.helpers[e]=t},e.registerPartial=function(e,t){this.partials[e]=t},e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new Error("Could not find property '"+e+"'")});var t=Object.prototype.toString,n="[object Function]";e.registerHelper("blockHelperMissing",function(i,s){var r=s.inverse||function(){},o=s.fn,a=t.call(i);return a===n&&(i=i.call(this)),i===!0?o(this):i===!1||null==i?r(this):"[object Array]"===a?i.length>0?e.helpers.each(i,s):r(this):o(i)}),e.K=function(){},e.createFrame=Object.create||function(t){e.K.prototype=t;var n=new e.K;return e.K.prototype=null,n},e.registerHelper("each",function(t,n){var i,s=n.fn,r=n.inverse,o="";if(n.data&&(i=e.createFrame(n.data)),t&&t.length>0)for(var a=0,l=t.length;l>a;a++)i&&(i.index=a),o+=s(t[a],{data:i});else o=r(this);return o}),e.registerHelper("if",function(i,s){var r=t.call(i);return r===n&&(i=i.call(this)),!i||e.Utils.isEmpty(i)?s.inverse(this):s.fn(this)}),e.registerHelper("unless",function(t,n){var i=n.fn,s=n.inverse;return n.fn=s,n.inverse=i,e.helpers["if"].call(this,t,n)}),e.registerHelper("with",function(e,t){return t.fn(e)
}),e.registerHelper("log",function(t){e.log(t)})}(e);var t=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,DATA:27,param:28,STRING:29,INTEGER:30,BOOLEAN:31,hashSegments:32,hashSegment:33,ID:34,EQUALS:35,pathSegments:36,SEP:37,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",27:"DATA",29:"STRING",30:"INTEGER",31:"BOOLEAN",34:"ID",35:"EQUALS",37:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[17,1],[25,2],[25,1],[28,1],[28,1],[28,1],[28,1],[28,1],[26,1],[32,2],[32,1],[33,3],[33,3],[33,3],[33,3],[33,3],[21,1],[36,3],[36,1]],performAction:function(e,t,n,i,s,r){var o=r.length-1;switch(s){case 1:return r[o-1];case 2:this.$=new i.ProgramNode(r[o-2],r[o]);break;case 3:this.$=new i.ProgramNode(r[o]);break;case 4:this.$=new i.ProgramNode([]);break;case 5:this.$=[r[o]];break;case 6:r[o-1].push(r[o]),this.$=r[o-1];break;case 7:this.$=new i.BlockNode(r[o-2],r[o-1].inverse,r[o-1],r[o]);break;case 8:this.$=new i.BlockNode(r[o-2],r[o-1],r[o-1].inverse,r[o]);break;case 9:this.$=r[o];break;case 10:this.$=r[o];break;case 11:this.$=new i.ContentNode(r[o]);break;case 12:this.$=new i.CommentNode(r[o]);break;case 13:this.$=new i.MustacheNode(r[o-1][0],r[o-1][1]);break;case 14:this.$=new i.MustacheNode(r[o-1][0],r[o-1][1]);break;case 15:this.$=r[o-1];break;case 16:this.$=new i.MustacheNode(r[o-1][0],r[o-1][1]);break;case 17:this.$=new i.MustacheNode(r[o-1][0],r[o-1][1],!0);break;case 18:this.$=new i.PartialNode(r[o-1]);break;case 19:this.$=new i.PartialNode(r[o-2],r[o-1]);break;case 20:break;case 21:this.$=[[r[o-2]].concat(r[o-1]),r[o]];break;case 22:this.$=[[r[o-1]].concat(r[o]),null];break;case 23:this.$=[[r[o-1]],r[o]];break;case 24:this.$=[[r[o]],null];break;case 25:this.$=[[new i.DataNode(r[o])],null];break;case 26:r[o-1].push(r[o]),this.$=r[o-1];break;case 27:this.$=[r[o]];break;case 28:this.$=r[o];break;case 29:this.$=new i.StringNode(r[o]);break;case 30:this.$=new i.IntegerNode(r[o]);break;case 31:this.$=new i.BooleanNode(r[o]);break;case 32:this.$=new i.DataNode(r[o]);break;case 33:this.$=new i.HashNode(r[o]);break;case 34:r[o-1].push(r[o]),this.$=r[o-1];break;case 35:this.$=[r[o]];break;case 36:this.$=[r[o-2],r[o]];break;case 37:this.$=[r[o-2],new i.StringNode(r[o])];break;case 38:this.$=[r[o-2],new i.IntegerNode(r[o])];break;case 39:this.$=[r[o-2],new i.BooleanNode(r[o])];break;case 40:this.$=[r[o-2],new i.DataNode(r[o])];break;case 41:this.$=new i.IdNode(r[o]);break;case 42:r[o-2].push(r[o]),this.$=r[o-2];break;case 43:this.$=[r[o]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,27:[1,24],34:[1,26],36:25},{17:27,21:23,27:[1,24],34:[1,26],36:25},{17:28,21:23,27:[1,24],34:[1,26],36:25},{17:29,21:23,27:[1,24],34:[1,26],36:25},{21:30,34:[1,26],36:25},{1:[2,1]},{6:31,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,32],21:23,27:[1,24],34:[1,26],36:25},{10:33,20:[1,34]},{10:35,20:[1,34]},{18:[1,36]},{18:[2,24],21:41,25:37,26:38,27:[1,45],28:39,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,25]},{18:[2,41],27:[2,41],29:[2,41],30:[2,41],31:[2,41],34:[2,41],37:[1,48]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],37:[2,43]},{18:[1,49]},{18:[1,50]},{18:[1,51]},{18:[1,52],21:53,34:[1,26],36:25},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:54,34:[1,26],36:25},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:41,26:55,27:[1,45],28:56,29:[1,42],30:[1,43],31:[1,44],32:40,33:46,34:[1,47],36:25},{18:[2,23]},{18:[2,27],27:[2,27],29:[2,27],30:[2,27],31:[2,27],34:[2,27]},{18:[2,33],33:57,34:[1,58]},{18:[2,28],27:[2,28],29:[2,28],30:[2,28],31:[2,28],34:[2,28]},{18:[2,29],27:[2,29],29:[2,29],30:[2,29],31:[2,29],34:[2,29]},{18:[2,30],27:[2,30],29:[2,30],30:[2,30],31:[2,30],34:[2,30]},{18:[2,31],27:[2,31],29:[2,31],30:[2,31],31:[2,31],34:[2,31]},{18:[2,32],27:[2,32],29:[2,32],30:[2,32],31:[2,32],34:[2,32]},{18:[2,35],34:[2,35]},{18:[2,43],27:[2,43],29:[2,43],30:[2,43],31:[2,43],34:[2,43],35:[1,59],37:[2,43]},{34:[1,60]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,61]},{18:[1,62]},{18:[2,21]},{18:[2,26],27:[2,26],29:[2,26],30:[2,26],31:[2,26],34:[2,26]},{18:[2,34],34:[2,34]},{35:[1,59]},{21:63,27:[1,67],29:[1,64],30:[1,65],31:[1,66],34:[1,26],36:25},{18:[2,42],27:[2,42],29:[2,42],30:[2,42],31:[2,42],34:[2,42],37:[2,42]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,36],34:[2,36]},{18:[2,37],34:[2,37]},{18:[2,38],34:[2,38]},{18:[2,39],34:[2,39]},{18:[2,40],34:[2,40]}],defaultActions:{16:[2,1],24:[2,25],38:[2,23],55:[2,21]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],s=[null],r=[],o=this.table,a="",l=0,c=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;r.push(h);var d=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,g,m,v,y,b,_,w,x={};;){if(g=i[i.length-1],this.defaultActions[g]?m=this.defaultActions[g]:((null===p||"undefined"==typeof p)&&(p=t()),m=o[g]&&o[g][p]),"undefined"==typeof m||!m.length||!m[0]){var k="";if(!u){w=[];for(y in o[g])this.terminals_[y]&&y>2&&w.push("'"+this.terminals_[y]+"'");k=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(k,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:h,expected:w})}}if(m[0]instanceof Array&&m.length>1)throw new Error("Parse Error: multiple actions possible at state: "+g+", token: "+p);switch(m[0]){case 1:i.push(p),s.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(m[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,a=this.lexer.yytext,l=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[m[1]][1],x.$=s[s.length-b],x._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},d&&(x._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,a,c,l,this.yy,m[1],s,r),"undefined"!=typeof v)return v;b&&(i=i.slice(0,2*-1*b),s=s.slice(0,-1*b),r=r.slice(0,-1*b)),i.push(this.productions_[m[1]][0]),s.push(x.$),r.push(x._$),_=o[i[i.length-2]][i[i.length-1]],i.push(_);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,s;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(n=this._input.match(this.rules[r[o]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=o,this.options.flex));o++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){switch(n){case 0:if("\\"!==t.yytext.slice(-1)&&this.begin("mu"),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1),this.begin("emu")),t.yytext)return 14;break;case 1:return 14;case 2:return"\\"!==t.yytext.slice(-1)&&this.popState(),"\\"===t.yytext.slice(-1)&&(t.yytext=t.yytext.substr(0,t.yyleng-1)),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return t.yytext=t.yytext.substr(3,t.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 35;case 13:return 34;case 14:return 34;case 15:return 37;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\"/g,'"'),29;case 20:return t.yytext=t.yytext.substr(1,t.yyleng-2).replace(/\\"/g,'"'),29;case 21:return t.yytext=t.yytext.substr(1),27;case 22:return 31;case 23:return 31;case 24:return 30;case 25:return 34;case 26:return t.yytext=t.yytext.substr(1,t.yyleng-2),34;case 27:return"INVALID";case 28:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,28],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();e.Parser=t,e.parse=function(t){return e.Parser.yy=e.AST,e.Parser.parse(t)},e.print=function(t){return(new e.PrintVisitor).accept(t)},e.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(){}},e.log=function(t,n){e.logger.log(t,n)},function(){e.AST={},e.AST.ProgramNode=function(t,n){this.type="program",this.statements=t,n&&(this.inverse=new e.AST.ProgramNode(n))},e.AST.MustacheNode=function(e,t,n){this.type="mustache",this.escaped=!n,this.hash=t;var i=this.id=e[0],s=this.params=e.slice(1),r=this.eligibleHelper=i.isSimple;this.isHelper=r&&(s.length||t)},e.AST.PartialNode=function(e,t){this.type="partial",this.id=e,this.context=t};var t=function(t,n){if(t.original!==n.original)throw new e.Exception(t.original+" doesn't match "+n.original)};e.AST.BlockNode=function(e,n,i,s){t(e.id,s),this.type="block",this.mustache=e,this.program=n,this.inverse=i,this.inverse&&!this.program&&(this.isInverse=!0)},e.AST.ContentNode=function(e){this.type="content",this.string=e},e.AST.HashNode=function(e){this.type="hash",this.pairs=e},e.AST.IdNode=function(e){this.type="ID",this.original=e.join(".");for(var t=[],n=0,i=0,s=e.length;s>i;i++){var r=e[i];".."===r?n++:"."===r||"this"===r?this.isScoped=!0:t.push(r)}this.parts=t,this.string=t.join("."),this.depth=n,this.isSimple=1===e.length&&!this.isScoped&&0===n},e.AST.DataNode=function(e){this.type="DATA",this.id=e},e.AST.StringNode=function(e){this.type="STRING",this.string=e},e.AST.IntegerNode=function(e){this.type="INTEGER",this.integer=e},e.AST.BooleanNode=function(e){this.type="BOOLEAN",this.bool=e},e.AST.CommentNode=function(e){this.type="comment",this.comment=e}}(),e.Exception=function(){var e=Error.prototype.constructor.apply(this,arguments);for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.message=e.message},e.Exception.prototype=new Error,e.SafeString=function(e){this.string=e},e.SafeString.prototype.toString=function(){return this.string.toString()},function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=/[&<>"'`]/g,i=/[&<>"'`]/,s=function(e){return t[e]||"&amp;"};e.Utils={escapeExpression:function(t){return t instanceof e.SafeString?t.toString():null==t||t===!1?"":i.test(t)?t.replace(n,s):t},isEmpty:function(e){return"undefined"==typeof e?!0:null===e?!0:e===!1?!0:"[object Array]"===Object.prototype.toString.call(e)&&0===e.length?!0:!1}}}(),e.Compiler=function(){},e.JavaScriptCompiler=function(){},function(t,n){t.prototype={compiler:t,disassemble:function(){for(var e,t,n,i=this.opcodes,s=[],r=0,o=i.length;o>r;r++)if(e=i[r],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var a=0;a<e.args.length;a++)n=e.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},guid:0,compile:function(e,t){this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.program(e)},accept:function(e){return this[e.type](e)},program:function(e){var t,n=e.statements;this.opcodes=[];for(var i=0,s=n.length;s>i;i++)t=n[i],this[t.type](t);return this.isSimple=1===s,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,r=n.depths.list.length;r>s;s++)t=n.depths.list[s],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=this.classifyMustache(t);"helper"===s?this.helperMustache(t,n,i):"simple"===s?(this.simpleMustache(t),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("pushLiteral","{}"),this.opcode("blockValue")):(this.ambiguousMustache(t,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("pushLiteral","{}"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("push","{}");for(var s=0,r=i.length;r>s;s++)t=i[s],n=t[1],this.accept(n),this.opcode("assignToHash",t[0])},partial:function(e){var t=e.id;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.original),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){var t=this.options,n=this.classifyMustache(e);"simple"===n?this.simpleMustache(e):"helper"===n?this.helperMustache(e):this.ambiguousMustache(e),e.escaped&&!t.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(e,t,n){var i=e.id,s=i.parts[0];this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s)},simpleMustache:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperMustache:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.knownHelpersOnly)throw new Error("You specified knownHelpersOnly, but used the unknown helper "+s);this.opcode("invokeHelper",i.length,s)}},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){this.options.data=!0,this.opcode("lookupData",e.id)},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){if(isNaN(e))throw new Error("EWOT");0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifyMustache:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var s=e.id.parts[0];i.knownHelpers[s]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.string)):this[t.type](t)},setupMustacheParams:function(e){var t=e.params;return this.pushParams(t),e.hash?this.hash(e.hash):this.opcode("pushLiteral","{}"),t},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("pushLiteral","{}"),i}};var i=function(e){this.value=e};n.prototype={nameLookup:function(e,t){return/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":"buffer += "+e+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,n,i,s){this.environment=t,this.options=n||{},e.log(e.logger.DEBUG,this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.compileStack=[],this.compileChildren(t,n);var r,o=t.opcodes;for(this.i=0,a=o.length;this.i<a;this.i++)r=o[this.i],"DECLARE"===r.opcode?this[r.name]=r.value:this[r.opcode].apply(this,r.args);return this.createFunctionContext(s)},nextOpcode:function(){var e=this.environment.opcodes;return e[this.i+1],e[this.i+1]},eat:function(){this.i=this.i+1},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = helpers || "+t+".helpers;";this.environment.usePartial&&(n=n+" partials = partials || "+t+".partials;"),this.options.data&&(n+=" data = data || {};"),e.push(n)}this.environment.isSimple?e.push(""):e.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(t){var n=this.stackVars.concat(this.registers.list);if(n.length>0&&(this.source[1]=this.source[1]+", "+n.join(", ")),!this.isChild)for(var i in this.context.aliases)this.source[1]=this.source[1]+", "+i+"="+this.context.aliases[i];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var s=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],r=0,o=this.environment.depths.list.length;o>r;r++)s.push("depth"+this.environment.depths.list[r]);if(t)return s.push(this.source.join("\n  ")),Function.apply(this,s);var a="function "+(this.name||"")+"("+s.join(",")+") {\n  "+this.source.join("\n  ")+"}";return e.log(e.logger.DEBUG,a+"\n\n"),a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),t+" = blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.source.push("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.source.push(this.appendToBuffer(this.quotedString(e)))},append:function(){var e=this.popStack();this.source.push("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var e=this.nextOpcode(),t="";this.context.aliases.escapeExpression="this.escapeExpression",e&&"appendContent"===e.opcode&&(t=" + "+this.quotedString(e.args[0]),this.eat(e)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+t))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.pushStack(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+"() : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(e){this.pushStack(this.nameLookup("data",e,"data"))},pushStringParam:function(e){this.pushStackLiteral("depth"+this.lastContext),this.pushString(e)},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){this.pushStack(e)},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t){this.context.aliases.helperMissing="helpers.helperMissing";var n=this.lastHelper=this.setupHelper(e,t);this.register("foundHelper",n.name),this.pushStack("foundHelper ? foundHelper.call("+n.callParams+") "+": helperMissing.call("+n.helperMissingParams+")")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.pushStack(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e){this.context.aliases.functionType='"function"',this.pushStackLiteral("{}");var t=this.setupHelper(0,e),n=this.lastHelper=this.nameLookup("helpers",e,"helper");this.register("foundHelper",n);var i=this.nameLookup("depth"+this.lastContext,e,"context"),s=this.nextStack();this.source.push("if (foundHelper) { "+s+" = foundHelper.call("+t.callParams+"); }"),this.source.push("else { "+s+" = "+i+"; "+s+" = typeof "+s+" === functionType ? "+s+"() : "+s+"; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.pushStack("self.invokePartial("+t.join(", ")+");")},assignToHash:function(e){var t=this.popStack(),n=this.topStack();this.source.push(n+"['"+e+"'] = "+t+";")},compiler:n,compileChildren:function(e,t){for(var n,i,s=e.children,r=0,o=s.length;o>r;r++){n=s[r],i=new this.compiler,this.context.programs.push("");var a=this.context.programs.length;n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,t,this.context)}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,s=[n.index,n.name,"data"],r=0,o=i.length;o>r;r++)t=i[r],1===t?s.push("depth0"):s.push("depth"+(t-1));return 0===i.length?"self.program("+s.join(", ")+")":(s.shift(),"self.programWithDepth("+s.join(", ")+")")},register:function(e,t){this.useRegister(e),this.source.push(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.compileStack.push(new i(e)),e},pushStack:function(e){return this.source.push(this.incrStack()+" = "+e+";"),this.compileStack.push("stack"+this.stackSlot),"stack"+this.stackSlot},replaceStack:function(e){var t=e.call(this,this.topStack());return this.source.push(this.topStack()+" = "+t+";"),"stack"+this.stackSlot},nextStack:function(){var e=this.incrStack();return this.compileStack.push("stack"+this.stackSlot),e},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){var e=this.compileStack.pop();return e instanceof i?e.value:(this.stackSlot--,e)},topStack:function(){var e=this.compileStack[this.compileStack.length-1];return e instanceof i?e.value:e},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(e,t){var n=[];this.setupParams(e,n);var i=this.nameLookup("helpers",t,"helper");return{params:n,name:i,callParams:["depth0"].concat(n).join(", "),helperMissingParams:["depth0",this.quotedString(t)].concat(n).join(", ")}},setupParams:function(e,t){var n,i,s,r=[],o=[];r.push("hash:"+this.popStack()),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(this.context.aliases.self="this",s="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+s));for(var a=0;e>a;a++)n=this.popStack(),t.push(n),this.options.stringParams&&o.push(this.popStack());return this.options.stringParams&&r.push("contexts:["+o.join(",")+"]"),this.options.data&&r.push("data:data"),t.push("{"+r.join(",")+"}"),t.join(", ")}};for(var s="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),r=n.RESERVED_WORDS={},o=0,a=s.length;a>o;o++)r[s[o]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(e)?!0:!1}}(e.Compiler,e.JavaScriptCompiler),e.precompile=function(t,n){n=n||{};var i=e.parse(t),s=(new e.Compiler).compile(i,n);return(new e.JavaScriptCompiler).compile(s,n)},e.compile=function(t,n){function i(){var i=e.parse(t),s=(new e.Compiler).compile(i,n),r=(new e.JavaScriptCompiler).compile(s,n,void 0,!0);return e.template(r)}n=n||{};var s;return function(e,t){return s||(s=i()),s.call(this,e,t)}},e.VM={template:function(t){var n={escapeExpression:e.Utils.escapeExpression,invokePartial:e.VM.invokePartial,programs:[],program:function(t,n,i){var s=this.programs[t];return i?e.VM.program(n,i):s?s:s=this.programs[t]=e.VM.program(n)},programWithDepth:e.VM.programWithDepth,noop:e.VM.noop};return function(i,s){return s=s||{},t.call(n,e,i,s.helpers,s.partials,s.data)}},programWithDepth:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(i,s){return s=s||{},e.apply(this,[i,s.data||t].concat(n))}},program:function(e,t){return function(n,i){return i=i||{},e(n,i.data||t)}},noop:function(){return""},invokePartial:function(t,n,i,s,r,o){var a={helpers:s,partials:r,data:o};if(void 0===t)throw new e.Exception("The partial "+n+" could not be found");if(t instanceof Function)return t(i,a);if(e.compile)return r[n]=e.compile(t,{data:void 0!==o}),r[n](i,a);throw new e.Exception("The partial "+n+" could not be compiled when running in runtime-only mode")}},e.template=e.VM.template,define("Handlebars",[],function(){return e})}(),define("text",["module"],function(e){var t,n,i,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),u=l&&location.hostname,h=l&&(location.port||void 0),d={},p=e.config&&e.config()||{};return t={version:"2.0.7",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")
},createXhr:p.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=r[t];try{e=new ActiveXObject(n)}catch(i){}if(e){r=[n];break}}return e},parseName:function(e){var t,n,i,s=!1,r=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!o||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(s="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,s){var r,o,a,l=t.xdRegExp.exec(e);return l?(r=l[2],o=l[3],o=o.split(":"),a=o[1],o=o[0],!(r&&r!==n||o&&o.toLowerCase()!==i.toLowerCase()||(a||o)&&a!==s)):!0},finishLoad:function(e,n,i,s){i=n?t.strip(i):i,p.isBuild&&(d[e]=i),s(i)},load:function(e,n,i,s){if(s.isBuild&&!s.inlineText)return i(),void 0;p.isBuild=s.isBuild;var r=t.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),a=n.toUrl(o),d=p.useXhr||t.useXhr;!l||d(a,c,u,h)?t.get(a,function(n){t.finishLoad(e,r.strip,n,i)},function(e){i.error&&i.error(e)}):n([o],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)})},write:function(e,n,i){if(d.hasOwnProperty(n)){var s=t.jsEscape(d[n]);i.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,i,s,r){var o=t.parseName(n),a=o.ext?"."+o.ext:"",l=o.moduleName+a,c=i.toUrl(o.moduleName+a)+".js";t.load(l,i,function(){var n=function(e){return s(c,e)};n.asModule=function(e,t){return s.asModule(e,c,t)},t.write(e,l,n,r)},r)}},"node"===p.env||!p.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var s=n.readFileSync(e,"utf8");0===s.indexOf("﻿")&&(s=s.substring(1)),t(s)}catch(r){i(r)}}):"xhr"===p.env||!p.env&&t.createXhr()?t.get=function(e,n,i,s){var r,o=t.createXhr();if(o.open("GET",e,!0),s)for(r in s)s.hasOwnProperty(r)&&o.setRequestHeader(r.toLowerCase(),s[r]);p.onXhr&&p.onXhr(o,e),o.onreadystatechange=function(){var t,s;4===o.readyState&&(t=o.status,t>399&&600>t?(s=new Error(e+" HTTP status: "+t),s.xhr=o,i(s)):n(o.responseText),p.onXhrComplete&&p.onXhrComplete(o,e))},o.send(null)}:"rhino"===p.env||!p.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,s="utf-8",r=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),s)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(o),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===p.env||!p.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,r,o={},a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(a,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),o),r.close(),n.close(),t(o.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),t}),define("text!composite_views/perch.hbs",[],function(){return'{{#if title}}\n    <div class="modal-header">\n        {{#unless mustUseButton}}\n            <button type="button" class="close" data-dismiss="modal">×</button>\n        {{/unless}}\n        <h2>{{title}}</h2>\n    </div>\n{{/if}}\n\n<div class="modal-body" id="PerchBody">\n    {{{content}}}\n\n    {{#if btn1Text}}\n        <button id="PerchBtn1" class="btn {{btn1ClassName}}">{{btn1Text}}</button>\n    {{/if}}\n</div>'}),define("composite_views/perch",["jquery","backbone","Handlebars","text!./perch.hbs"],function(e,t,n,i){var s,r,o,a,l,c;return c="composite_views/perch",l="body",a="#PerchBody",r=t.Model.extend({defaults:{title:"",content:"This is the default message.",onClose:function(){},btn1Text:"Ok",btn1ClassName:"btn-large btn-primary",btn1Callback:function(){},mustUseButton:!1}}),s=t.View.extend({tmpl:n.compile(i),tagName:"aside",className:"perch modal hide fade",events:{"click #PerchBtn1":"_onBtn1Click"},initialize:function(){return e(l).append(this.el)},render:function(){return this.$el.html(this.tmpl(this.model.attributes)),this},_onBtn1Click:function(){var e;return"function"==typeof(e=this.model.attributes).btn1Callback&&e.btn1Callback(),this.hide()},_onBtn2Click:function(){return console.log(""+c+"._onBtn2Click()")},_onModalHidden:function(){var e;return"function"==typeof(e=this.model.attributes).onClose&&e.onClose(),this._viewCleanup()},_showSimpleMsg:function(e){return this._showOptionsObject({msg:e})},_showBackboneView:function(e){return this._childView=e.content,e.content=null,e.title=e.title||null,this._showOptionsObject(e),this._addChildView()},_showOptionsObject:function(e){var t;return e.msg&&(e.content="<p>"+e.msg+"</p>"),this.model.set(e),this._bindDomEvents(),t=e.mustUseButton?"static":!0,this.$el.modal({backdrop:t})},_addChildView:function(){var t;return e(a).prepend(null!=(t=this._childView)?t.render().el:void 0)},_viewCleanup:function(){var e;return this.$el.off("hidden"),null!=this._childView?("function"==typeof(e=this._childView).close&&e.close(),this._childView.remove()):void 0},_bindDomEvents:function(){return this.$el.on("hidden",_.bind(this._onModalHidden,this))},_trackLightbox:function(e){var t;if(!e.supressTracking&&null!=this.options.app){if("string"==typeof e)t=e;else{if(!e.title)return null;t=e.title}return this.options.app.analytics.track(this.options.app.analytics.CATEGORIES.viewLightbox,t,"",e)}},show:function(e){return this.model=new r,e.large?this.$el.removeClass("small"):this.$el.addClass("small"),this.listenTo(this.model,"change",this.render),"string"==typeof e?this._showSimpleMsg(e):(null!=e?e.content:void 0)instanceof t.View?this._showBackboneView(e):this._showOptionsObject(e),this._trackLightbox(e),this},hide:function(){return this.$el.modal("hide")}}),o=new s,o.Klass=s,o}),function(e,t){"function"==typeof define&&define.amd&&define("syphon",["underscore","jquery","backbone"],t)}(this,function(e,t,n){return n.Syphon=function(e,t,n){var i={};i.ignoredTypes=["button","submit","reset","fieldset"],i.serialize=function(e,i){var o={},c=a(i),u=s(e,c);return n.each(u,function(e){var n=t(e),i=r(n),s=c.keyExtractors.get(i),a=s(n),u=c.inputReaders.get(i),h=u(n),d=c.keyAssignmentValidators.get(i);if(d(n,a,h)){var p=c.keySplitter(a);o=l(o,p,h)}}),o},i.deserialize=function(e,i,o){var l=a(o),u=s(e,l),h=c(l,i);n.each(u,function(e){var n=t(e),i=r(n),s=l.keyExtractors.get(i),o=s(n),a=l.inputWriters.get(i),c=h[o];a(n,c)})};var s=function(e,i){var s=o(e),a=s.elements;return a=n.reject(a,function(e){var s,o=r(e),a=i.keyExtractors.get(o),l=a(t(e)),c=n.include(i.ignoredTypes,o),u=n.include(i.include,l),h=n.include(i.exclude,l);return s=u?!1:i.include?!0:h||c})},r=function(e){var n,i=t(e),s=i[0].tagName,r=s;return"input"===s.toLowerCase()&&(n=i.attr("type"),r=n?n:"text"),r.toLowerCase()},o=function(e){return n.isUndefined(e.$el)&&"form"===e.tagName.toLowerCase()?e:e.$el.is("form")?e.el:e.$("form")[0]},a=function(e){var t=n.clone(e)||{};return t.ignoredTypes=n.clone(i.ignoredTypes),t.inputReaders=t.inputReaders||i.InputReaders,t.inputWriters=t.inputWriters||i.InputWriters,t.keyExtractors=t.keyExtractors||i.KeyExtractors,t.keySplitter=t.keySplitter||i.KeySplitter,t.keyJoiner=t.keyJoiner||i.KeyJoiner,t.keyAssignmentValidators=t.keyAssignmentValidators||i.KeyAssignmentValidators,t},l=function(e,t,i){if(!t)return e;var s=t.shift();return e[s]||(e[s]=n.isArray(s)?[]:{}),0===t.length&&(n.isArray(e[s])?e[s].push(i):e[s]=i),t.length>0&&l(e[s],t,i),e},c=function(e,t,i){var s={};return n.each(t,function(t,r){var o={};i&&(r=e.keyJoiner(i,r)),n.isArray(t)?(r+="[]",o[r]=t):n.isObject(t)?o=c(e,t,r):o[r]=t,n.extend(s,o)}),s};return i}(n,t,e),n.Syphon.TypeRegistry=function(){this.registeredTypes={}},n.Syphon.TypeRegistry.extend=n.Model.extend,e.extend(n.Syphon.TypeRegistry.prototype,{get:function(e){var t=this.registeredTypes[e];return t||(t=this.registeredTypes["default"]),t},register:function(e,t){this.registeredTypes[e]=t},registerDefault:function(e){this.registeredTypes["default"]=e},unregister:function(e){this.registeredTypes[e]&&delete this.registeredTypes[e]}}),n.Syphon.KeyExtractorSet=n.Syphon.TypeRegistry.extend(),n.Syphon.KeyExtractors=new n.Syphon.KeyExtractorSet,n.Syphon.KeyExtractors.registerDefault(function(e){return e.prop("name")}),n.Syphon.InputReaderSet=n.Syphon.TypeRegistry.extend(),n.Syphon.InputReaders=new n.Syphon.InputReaderSet,n.Syphon.InputReaders.registerDefault(function(e){return e.val()}),n.Syphon.InputReaders.register("checkbox",function(e){var t=e.prop("checked");return t}),n.Syphon.InputWriterSet=n.Syphon.TypeRegistry.extend(),n.Syphon.InputWriters=new n.Syphon.InputWriterSet,n.Syphon.InputWriters.registerDefault(function(e,t){e.val(t)}),n.Syphon.InputWriters.register("checkbox",function(e,t){e.prop("checked",t)}),n.Syphon.InputWriters.register("radio",function(e,t){e.prop("checked",e.val()===t)}),n.Syphon.KeyAssignmentValidatorSet=n.Syphon.TypeRegistry.extend(),n.Syphon.KeyAssignmentValidators=new n.Syphon.KeyAssignmentValidatorSet,n.Syphon.KeyAssignmentValidators.registerDefault(function(){return!0}),n.Syphon.KeyAssignmentValidators.register("radio",function(e){return e.prop("checked")}),n.Syphon.KeySplitter=function(e){var t=e.match(/[^\[\]]+/g);return e.indexOf("[]")===e.length-2&&(lastKey=t.pop(),t.push([lastKey])),t},n.Syphon.KeyJoiner=function(e,t){return e+"["+t+"]"},n.Syphon}),define("text!scripts/views/user/login_dialog.hbs",[],function(){return'\n<button class="btn btn-block btn-primary btn-large facebook" id="SignInFacebook">\n  <i class="icon-facebook icon-large"></i>\n  Sign in <span class="muted">with</span> Facebook\n</button>\n\n<div class="divider">\n    <b class="rule"></b>\n    <p>Or</p>\n    <b class="rule"></b>\n</div>\n\n\n\n<form id="SigninForm">\n    <h3>\n        Use Your Email\n        <div class="btn-group btn-rocker" data-toggle="buttons-radio">\n            <button id="ActionSignIn" class="btn active" value="signIn" type="button">Sign In</button>\n            <button id="ActionRegister" class="btn" value="register" type="button">Register</button>\n            <input id="LoginType" type="hidden" name="loginType" value="signIn" />\n        </div>\n    </h3>\n\n    <input name="email" class="large input-block-level" type="email" placeholder="Email Address" />\n    <input name="password" class="large input-block-level" type="password" placeholder="Password" />\n    <input name="passwordConfirm" id="Login-confirm" class="large input-block-level" type="password" style="display:none;" placeholder="Confirm Password" />\n\n    <div id="LoginErrorHolder"></div>\n    <button id="Login-submit" class="btn btn-large btn-block" type="submit">Get Started</button>\n\n    <!--<label for="Login-remember" class="small inlineBlock">-->\n        <!--<input name="rememberMe" id="Login-remember" type="checkbox" checked />-->\n        <!--Remember Me-->\n    <!--</label>-->\n    <!--<a id="Login-forgot" class="pull-right small" href="">Forgot Your Password?</a>-->\n</form>\n\n'}),define("text!ui_widgets/hold_please.hbs",[],function(){return'\n<i class="icon-repeat {{iconSize}}"></i>'}),define("ui_widgets/hold_please",["jquery","backbone","Handlebars","text!./hold_please.hbs"],function(e,t,n,i){var s,r;return r="ui_widgets/hold_please",s=t.View.extend({tmpl:n.compile(i),tagName:"b",className:"holdPlease",events:{click:"_clicked"},initialize:function(){},render:function(e){return this.$el.html(this.tmpl({iconSize:e})),this},_clicked:function(e){return e.preventDefault(),e.stopPropagation()},_showOnSelector:function(t,n){return e(t).hasClass("btn-large")&&(n="icon-large"),e(t).addClass("onHold").css("position","relative").append(this.render(n).$el.clone(!0))},_showFullScreen:function(){return this._showOnSelector("body","icon-4x")},_hideInSelector:function(t){return e(t).removeClass("onHold").css("position","").find("."+this.className).remove()},_hideAll:function(){return e("."+this.className).parent().removeClass("onHold").css("position",""),e("."+this.className).remove()},show:function(e){return e?this._showOnSelector(e):this._showFullScreen()},hide:function(e){return e?this._hideInSelector(e):this._hideAll()}}),new s}),define("text!ui_widgets/psst.hbs",[],function(){return'\n<button type="button" class="close" data-dismiss="alert">&times;</button>\n\n{{#if title}}\n    <h4 class="title">{{title}}</h4>\n{{/if}}\n\n{{msg}}\n\n'}),define("ui_widgets/psst",["jquery","backbone","Handlebars","text!./psst.hbs"],function(e,t,n,i){var s,r,o,a,l,c;return c="ui_widgets/psst",o={good:"good",info:"info",question:"question",warn:"warn",error:"error"},l=o.info,a="psst",s=t.View.extend({tagName:"aside",className:""+a+" alert",initialize:function(){return this.tmpl=n.compile(i)},render:function(e){var t;if(!e.msg||!e.sel)throw new Error("Need .msg and .sel");return t={title:e.title||null,msg:e.msg,type:e.type||l,selector:e.sel},this.$el.html(this.tmpl(t)),this.$el.attr("class",""+this.className+" "+t.type),this.$el.clone().prependTo(t.selector),this},_hide:function(){return this.$el.is(":visible")?(this.$el.attr("class",this.className).remove(),this):void 0},_hideAll:function(){return e("."+a).remove()}}),r=new s,r.render=_.bind(r.render,r),r.render.hide=_.bind(r._hideAll,r),r.render.TYPES=o,r.render}),define("bower_components_ext/bootstrap_buttons-radio",["jquery"],function(e){var t,n,i;return n="bower_components_ext/bootstrap_buttons-radio",i='[data-toggle="buttons-radio"]',t=function(t){var n,s,r;return n=t||e(i),r=n.find(".active").val(),r=r||n.find(".active").text().toLowerCase().split(" ").join(""),s=n.find('input[type="hidden"]:first'),s.val(r)},e("body").delegate(i,"click",function(){var n=this;return setTimeout(function(){return t(e(n))},5)}),t}),define("scripts/views/user/login_dialog",["jquery","underscore","backbone","Handlebars","syphon","text!./login_dialog.hbs","ui_widgets/hold_please","ui_widgets/psst","composite_views/perch","bower_components_ext/bootstrap_buttons-radio"],function(e,t,n,i,s,r,o,a,l){var c,u,h,d,p;return h="views/user/login_dialog",u="#Login-confirm",p="#Login-submit",d="#ActionRegister",c=n.View.extend({className:"loginDialog",events:{"click #SignInFacebook":"_clickedSignInFacebook","click #ActionSignIn":"_modeSignIn","click #ActionRegister":"_modeRegister","click #Login-forgot":"_clickedForgotPass","focus input":"_jazzifySubmitBtn",submit:"_submittedForm"},initialize:function(){if(null==this.options.app||null==this.model)throw new Error("Need options.app and a model");return this.tmpl=i.compile(r),this.listenTo(this.model,"sync",this._onSync),this.listenTo(this.model,"invalid",this._onModelInvalid),this.listenTo(this.model,"error",this._onModelError),this._show(),this.options.register?(this.$(d).trigger("click"),this._modeRegister()):void 0},render:function(){return this.$el.html(this.tmpl()),this},_show:function(){return l.show({content:this,btn1Text:null,supressTracking:!0}),this.options.app.analytics.track(this.className,"show")},_jazzifySubmitBtn:function(){return this.$(p).addClass("btn-inverse")},_showErr:function(e){return e=e||"Unknown Error",a.hide(),a({sel:"#LoginErrorHolder",msg:e,type:"error"})},_clickedSignInFacebook:function(t){return this.options.app.session.loginUsingOauth("facebook",{width:1006,height:775}),o.show(e(t.target)),this.options.app.analytics.track(this.className,"Pressed Facebook Sign In")},_clickedForgotPass:function(){return console.log(""+h+"._clickedForgotPass()")},_modeSignIn:function(){return this._isRegisterMode=!1,this.$(u).hide(),this._jazzifySubmitBtn(),a.hide(),this.options.app.analytics.track(this.className,"modeSignIn")},_modeRegister:function(){return this._isRegisterMode=!0,this.$(u).show(),this._jazzifySubmitBtn(),a.hide(),this.options.app.analytics.track(this.className,"modeRegister")},_submittedForm:function(e){var t;return e.preventDefault(),a.hide(),o.show(p),t=s.serialize(e.target),"register"!==t.loginType&&(t.passwordConfirm=""),this.options.app.user.isGuest()||this.options.app.session.logOut(),"register"===t.loginType?(console.log(""+h+".saving register form of user model..."),this.model.set(t),this.options.app.session.register()):(this.model.set(t,{silent:!0}),this.options.app.session.signIn()),this.options.app.analytics.track(this.className,"Submitted Form",t.loginType)},_onSync:function(){return l.hide()},_onModelInvalid:function(e,t){return this._showErr(t),o.hide(p),this.options.app.analytics.track(this.className,"Validation Issue")},_onModelError:function(e,t){return this._showErr(""+t.status+": "+t.statusText),o.hide(p)},hide:function(){return l.hide()}})}),define("text!scripts/views/user/profile_dialog.hbs",[],function(){return'\n\n\n{{#if image}}\n    <i class="avatar interactive">\n        <img src="{{image}}" alt="{{name}}\'s Profile Image" />\n    </i>\n{{else}}\n    <i class="avatar large interactive"></i>\n{{/if}}\n\n\n<form title="{{city}}, {{state}}. {{country}}. DOB: {{date_of_birth}} timezone: {{timezone}}">\n    <input type="text" name="name" placeholder="Name" class="input large input-block-level" value="{{name}}" >\n    <input type="text" name="email" placeholder="email@address.com" class="input large input-block-level" value="{{email}}">\n\n    <div class="btn-group btn-rocker spaceBelow gendered" data-toggle="buttons-radio">\n        <button class="btn active" type="button">Male</button> {{! without a type, buttons are submit by default. http://stackoverflow.com/questions/9643806/form-is-submitted-when-i-click-on-the-button-in-form-how-to-avoid-this }}\n        <button class="btn" type="button">Female</button>\n        <input type="hidden" name="gender" value="{{gender}}" />\n    </div>\n\n    <div id="ProfileErrorHolder"></div>\n\n    <button class="btn btn-large btn-block btn-inverse" type="submit">Save</button>\n</form>\n\n\n'}),define("scripts/views/user/profile_dialog",["jquery","underscore","backbone","Handlebars","text!./profile_dialog.hbs","syphon","ui_widgets/hold_please","ui_widgets/psst","composite_views/perch","bower_components_ext/bootstrap_buttons-radio"],function(e,t,n,i,s,r,o,a,l){var c,u,h,d;return h="views/user/profile_dialog",d="[type=submit]",u="#ProfileErrorHolder",c=n.View.extend({className:"profileDialog",events:{"submit form":"_submitProfile","input change":"_onInputChange"},initialize:function(){return this.tmpl=i.compile(s),this.listenTo(this.model,"error",this._onError),this.listenTo(this.model,"invalid",this._onInvalid),this.listenTo(this.model,"sync",this.hide),this._show()},render:function(){return this.$el.html(this.tmpl(this.model.attributes)),this},_show:function(){return l.show({title:"Profile",content:this,btn1Text:null})},_onInputChange:function(){return a.hide()},_submitProfile:function(e){var t;return console.log(""+h+"._submitProfile()"),e.preventDefault(),a.hide(),o.show(this.$(d)),t=r.serialize(e.target),this.model.save(t,{wait:!0,validateProfile:!0})},_showErr:function(e){return a.hide(),a({sel:u,msg:e,type:"error"}),o.hide(this.$(d))},_onError:function(e,t){var n;return n=0===t.status?"Unknown Server Error":""+t.status+": "+t.statusText,this._showErr(n)},_onInvalid:function(e,t){return this._showErr(t)},hide:function(){return l.hide()}})}),define("core/mediator",["underscore","backbone","composite_views/perch","scripts/views/user/login_dialog","scripts/views/user/profile_dialog"],function(e,t,n,i,s){var r,o;return o="core/mediator",r=t.View.extend({initialize:function(){if(null==this.options.app)throw new Error("Need options.app");return n.options.app=this.options.app,this._mediate()},_mediate:function(){return this.listenTo(this.options.app,"session:showLogin",this._showLogin),this.listenTo(this.options.app,"session:showRegister",this._showRegister),this.listenTo(this.options.app,"session:showProfile",this._showProfile),this.listenTo(this.options.app,"session:logOut",this._actionLogOut)},_showLogin:function(){var e;return e=new i({model:this.options.app.user,app:this.options.app})},_showRegister:function(){var e;return e=new i({model:this.options.app.user,app:this.options.app,register:!0})},_showProfile:function(){var e;return e=new s({model:this.options.app.user})},_actionLogOut:function(){return this.options.app.analytics.track("session","Pressed Log Out"),this.options.app.session.logOut()}})}),define("text!core/layouts/layout.hbs",[],function(){return'\n\n\n\n\n<header class="header">\n    <div class="inner" id="HeaderRegion"></div>\n</header>\n<div class="content clearfix" id="ContentRegion"></div>\n<div class="noDisplay" id="StagingRegion"></div>\n\n\n\n'}),define("text!ui_widgets/site_logo.hbs",[],function(){return'\n<a class="siteLogo" href="#">\n    <h1>TidePool</h1>\n</a>'}),define("core/layouts/layout",["underscore","backbone","Handlebars","text!./layout.hbs","text!ui_widgets/site_logo.hbs"],function(e,t,n,i,s){var r,o;return o="core/layouts/layout",r=t.View.extend({tmpl:n.compile(i),initialize:function(){return $("body").prop("class","background-"+this.className)},_cleanupChildren:function(){var e,t;return null!=(e=this._curView)&&"function"==typeof e.close&&e.close(),null!=(t=this._curView)?t.remove():void 0},show:function(e){return this._cleanupChildren(),this._curView=e,this.$("#ContentRegion").html(this._curView.render().el)},close:function(){return this._cleanupChildren()},resetHeader:function(){return this.$("#HeaderRegion").html(s)}})}),define("text!ui_widgets/main_nav.hbs",[],function(){return'\n<nav class="mainNav">\n    <ul>\n        <li><a href="#about">About</a></li>\n        <li><a href="#team">Team</a></li>\n        <li><a href="#investors">Investors</a></li>\n    </ul>\n</nav>'}),define("text!ui_widgets/user_menu.hbs",[],function(){return'\n\n\n\n{{#if nickname}}\n\n    <button class="btn btn-clear btn-large dropdown-toggle">\n        <ul class="dropdown-menu">\n            <li><a id="ActionShowProfile">\n                <i class="icon-fixed-width icon-user"></i>\n                Profile\n            </a></li>\n            <li><a href="#dashboard">\n                <i class="icon-fixed-width icon-th-large"></i>\n                Dashboard\n            </a></li>\n            <li><a id="ActionLogOut">\n                <i class="icon-fixed-width icon-unlink"></i>\n                Log Out\n            </a></li>\n        </ul>\n        <i class="avatar">\n            {{#if image}}\n                <img src="{{image}}" alt="{{nickname}}\'s Profile Image" />\n            {{/if}}\n        </i>\n        <span title="{{name}}: {{email}}">{{nickname}}</span>\n        <i class="icon-chevron-sign-down muted"></i>\n    </button>\n\n{{else}}\n\n    <button id="ActionShowLogin" class="btn btn-link btn-large" href="">\n        <i class="icon-lock icon-large"></i>\n        {{#if guest}}\n            Guest Log In\n        {{else}}\n            Log In\n        {{/if}}\n    </button>\n\n{{/if}}\n\n\n\n'}),define("ui_widgets/user_menu",["jquery","underscore","backbone","Handlebars","text!./user_menu.hbs"],function(e,t,n,i,s){var r,o;return o="ui_widgets/user_menu",r=n.View.extend({className:"userMenu",tmpl:i.compile(s),events:{"click #ActionShowLogin":"_clickedLogIn","click #ActionLogOut":"_clickedLogOut","click #ActionShowProfile":"_clickedProfile"},start:function(e){if(!e.user)throw new Error("Need an options.user to start");return this.app=e,this.model=this.app.user,this.listenTo(this.model,"change",this.render),this.render(),this},stop:function(){return this.stopListening(),delete this.app,delete this.model},render:function(){var e;return e=this._parseModel(this.model),this.$el.html(this.tmpl(e)),this},_parseModel:function(e){return t.pick(e.attributes,"nickname","email","name","city","image","guest")},_clickedLogIn:function(){var e;return null!=(e=this.app)?e.trigger("session:showLogin"):void 0},_clickedLogOut:function(){var e;return null!=(e=this.app)?e.trigger("session:logOut"):void 0},_clickedProfile:function(){var e;return null!=(e=this.app)?e.trigger("session:showProfile"):void 0}}),new r}),define("core/layouts/layout-site",["underscore","backbone","Handlebars","./layout","text!ui_widgets/main_nav.hbs","ui_widgets/user_menu"],function(e,t,n,i,s,r){var o,a;return a="core/layouts/layout-site",o=i.extend({className:"siteLayout",initialize:function(){return o.__super__.initialize.call(this),this.render()},render:function(){return this.$el.html(this.tmpl()),o.__super__.resetHeader.call(this),r.delegateEvents(),this.$("#HeaderRegion").append(s).append(r.el),this}})}),define("core/layouts/layout-game",["underscore","backbone","Handlebars","./layout","ui_widgets/user_menu"],function(e,t,n,i){var s,r;return r="core/layouts/layout-game",s=i.extend({className:"gameLayout",initialize:function(){return s.__super__.initialize.call(this),this.render()},render:function(){return this.$el.html(this.tmpl()),s.__super__.resetHeader.call(this),this}})}),define("core/layouts/layout-dashboard",["underscore","backbone","Handlebars","./layout","ui_widgets/user_menu"],function(e,t,n,i,s){var r,o;return o="core/layouts/layout-dashboard",r=i.extend({className:"dashboardLayout",initialize:function(){return r.__super__.initialize.call(this),this.render()},render:function(){return this.$el.html(this.tmpl()),r.__super__.resetHeader.call(this),this.$("#HeaderRegion").append(s.el),this}})}),!function(e){e(function(){e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){var t='[data-dismiss="alert"]',n=function(n){e(n).on("click",t,this.close)};n.prototype.close=function(t){function n(){i.trigger("closed").remove()}var i,s=e(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=e(r),t&&t.preventDefault(),i.length||(i=s.hasClass("alert")?s:s.parent()),i.trigger(t=e.Event("close")),t.isDefaultPrevented()||(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.on(e.support.transition.end,n):n())};var i=e.fn.alert;e.fn.alert=function(t){return this.each(function(){var i=e(this),s=i.data("alert");s||i.data("alert",s=new n(this)),"string"==typeof t&&s[t].call(i)})},e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.alert.data-api",t,n.prototype.close)}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,n)};t.prototype.setState=function(e){var t="disabled",n=this.$element,i=n.data(),s=n.is("input")?"val":"html";e+="Text",i.resetText||n.data("resetText",n[s]()),n[s](i[e]||this.options[e]),setTimeout(function(){"loadingText"==e?n.addClass(t).attr(t,t):n.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=function(n){return this.each(function(){var i=e(this),s=i.data("button"),r="object"==typeof n&&n;s||i.data("button",s=new t(this,r)),"toggle"==n?s.toggle():n&&s.setState(n)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.button.data-api","[data-toggle^=button]",function(t){var n=e(t.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};t.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var n=this.getActiveIndex(),i=this;if(!(t>this.$items.length-1||0>t))return this.sliding?this.$element.one("slid",function(){i.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",e(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition.end&&(this.$element.trigger(e.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(t,n){var i,s=this.$element.find(".item.active"),r=n||s[t](),o=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(this.sliding=!0,o&&this.pause(),r=r.length?r:this.$element.find(".item")[l](),i=e.Event("slide",{relatedTarget:r[0],direction:a}),!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=e(c.$indicators.children()[c.getActiveIndex()]);t&&t.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;r.addClass(t),r[0].offsetWidth,s.addClass(a),r.addClass(a),this.$element.one(e.support.transition.end,function(){r.removeClass([t,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var n=e.fn.carousel;e.fn.carousel=function(n){return this.each(function(){var i=e(this),s=i.data("carousel"),r=e.extend({},e.fn.carousel.defaults,"object"==typeof n&&n),o="string"==typeof n?n:r.slide;s||i.data("carousel",s=new t(this,r)),"number"==typeof n?s.to(n):o?s[o]():r.interval&&s.pause().cycle()})},e.fn.carousel.defaults={interval:5e3,pause:"hover"},e.fn.carousel.Constructor=t,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this},e(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var n,i,s=e(this),r=e(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),o=e.extend({},r.data(),s.data());r.carousel(o),(i=s.attr("data-slide-to"))&&r.data("carousel").pause().to(i).cycle(),t.preventDefault()})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.collapse.defaults,n),this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var e=this.$element.hasClass("width");return e?"width":"height"},show:function(){var t,n,i,s;if(!this.transitioning&&!this.$element.hasClass("in")){if(t=this.dimension(),n=e.camelCase(["scroll",t].join("-")),i=this.$parent&&this.$parent.find("> .accordion-group > .in"),i&&i.length){if(s=i.data("collapse"),s&&s.transitioning)return;i.collapse("hide"),s||i.data("collapse",null)}this.$element[t](0),this.transition("addClass",e.Event("show"),"shown"),e.support.transition&&this.$element[t](this.$element[0][n])}},hide:function(){var t;!this.transitioning&&this.$element.hasClass("in")&&(t=this.dimension(),this.reset(this.$element[t]()),this.transition("removeClass",e.Event("hide"),"hidden"),this.$element[t](0))},reset:function(e){var t=this.dimension();return this.$element.removeClass("collapse")[t](e||"auto")[0].offsetWidth,this.$element[null!==e?"addClass":"removeClass"]("collapse"),this
},transition:function(t,n,i){var s=this,r=function(){"show"==n.type&&s.reset(),s.transitioning=0,s.$element.trigger(i)};this.$element.trigger(n),n.isDefaultPrevented()||(this.transitioning=1,this.$element[t]("in"),e.support.transition&&this.$element.hasClass("collapse")?this.$element.one(e.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var n=e.fn.collapse;e.fn.collapse=function(n){return this.each(function(){var i=e(this),s=i.data("collapse"),r=e.extend({},e.fn.collapse.defaults,i.data(),"object"==typeof n&&n);s||i.data("collapse",s=new t(this,r)),"string"==typeof n&&s[n]()})},e.fn.collapse.defaults={toggle:!0},e.fn.collapse.Constructor=t,e.fn.collapse.noConflict=function(){return e.fn.collapse=n,this},e(document).on("click.collapse.data-api","[data-toggle=collapse]",function(t){var n,i=e(this),s=i.attr("data-target")||t.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=e(s).data("collapse")?"toggle":i.data();i[e(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),e(s).collapse(r)})}(window.jQuery),!function(e){function t(){e(i).each(function(){n(e(this)).removeClass("open")})}function n(t){var n,i=t.attr("data-target");return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),n=i&&e(i),n&&n.length||(n=t.parent()),n}var i="[data-toggle=dropdown]",s=function(t){var n=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(){var i,s,r=e(this);if(!r.is(".disabled, :disabled"))return i=n(r),s=i.hasClass("open"),t(),s||i.toggleClass("open"),r.focus(),!1},keydown:function(t){var s,r,o,a,l;if(/(38|40|27)/.test(t.keyCode)&&(s=e(this),t.preventDefault(),t.stopPropagation(),!s.is(".disabled, :disabled"))){if(o=n(s),a=o.hasClass("open"),!a||a&&27==t.keyCode)return 27==t.which&&o.find(i).focus(),s.click();r=e("[role=menu] li:not(.divider):visible a",o),r.length&&(l=r.index(r.filter(":focus")),38==t.keyCode&&l>0&&l--,40==t.keyCode&&l<r.length-1&&l++,~l||(l=0),r.eq(l).focus())}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("dropdown");i||n.data("dropdown",i=new s(this)),"string"==typeof t&&i[t].call(n)})},e.fn.dropdown.Constructor=s,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on(".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",i,s.prototype.toggle).on("keydown.dropdown.data-api",i+", [role=menu]",s.prototype.keydown)}(window.jQuery),!function(e){var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1),t.enforceFocus(),n?t.$element.one(e.support.transition.end,function(){t.$element.focus().trigger("shown")}):t.$element.focus().trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),t.hideModal()})},hideModal:function(){var e=this;this.$element.hide(),this.backdrop(function(){e.removeBackdrop(),e.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&n;if(this.$backdrop=e('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?e.proxy(this.$element[0].focus,this.$element[0]):e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,t):t()):t&&t()}};var n=e.fn.modal;e.fn.modal=function(n){return this.each(function(){var i=e(this),s=i.data("modal"),r=e.extend({},e.fn.modal.defaults,i.data(),"object"==typeof n&&n);s||i.data("modal",s=new t(this,r)),"string"==typeof n?s[n]():r.show&&s.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),i=n.attr("href"),s=e(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),n.data());t.preventDefault(),s.modal(r).one("hide",function(){n.focus()})})}(window.jQuery),!function(e){var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,n,i){var s,r,o,a,l;for(this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.enabled=!0,o=this.options.trigger.split(" "),l=o.length;l--;)a=o[l],"click"==a?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=a&&(s="hover"==a?"mouseenter":"focus",r="hover"==a?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this)));this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return n.options.delay&&n.options.delay.show?(clearTimeout(this.timeout),n.hoverState="in",this.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show),void 0):n.show()},leave:function(t){var n=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),n.options.delay&&n.options.delay.hide?(n.hoverState="out",this.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide),void 0):n.hide()},show:function(){var t,n,i,s,r,o,a=e.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(a),a.isDefaultPrevented())return;switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,t.detach().css({top:0,left:0,display:"block"}),this.options.container?t.appendTo(this.options.container):t.insertAfter(this.$element),n=this.getPosition(),i=t[0].offsetWidth,s=t[0].offsetHeight,r){case"bottom":o={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":o={top:n.top-s,left:n.left+n.width/2-i/2};break;case"left":o={top:n.top+n.height/2-s/2,left:n.left-i};break;case"right":o={top:n.top+n.height/2-s/2,left:n.left+n.width}}this.applyPlacement(o,r),this.$element.trigger("shown")}},applyPlacement:function(e,t){var n,i,s,r,o=this.tip(),a=o[0].offsetWidth,l=o[0].offsetHeight;o.offset(e).addClass(t).addClass("in"),n=o[0].offsetWidth,i=o[0].offsetHeight,"top"==t&&i!=l&&(e.top=e.top+l-i,r=!0),"bottom"==t||"top"==t?(s=0,e.left<0&&(s=-2*e.left,e.left=0,o.offset(e),n=o[0].offsetWidth,i=o[0].offsetHeight),this.replaceArrow(s-a+n,n,"left")):this.replaceArrow(i-l,i,"top"),r&&o.offset(e)},replaceArrow:function(e,t,n){this.arrow().css(n,e?50*(1-e/t)+"%":"")},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){n.off(e.support.transition.end).detach()},500);n.one(e.support.transition.end,function(){clearTimeout(t),n.detach()})}var n=this.tip(),i=e.Event("hide");return this.$element.trigger(i),i.isDefaultPrevented()?void 0:(n.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():n.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var t=this.$element[0];return e.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())},getTitle:function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(t){var n=t?e(t.currentTarget)[this.type](this._options).data(this.type):this;n.tip().hasClass("in")?n.hide():n.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var n=e.fn.tooltip;e.fn.tooltip=function(n){return this.each(function(){var i=e(this),s=i.data("tooltip"),r="object"==typeof n&&n;s||i.data("tooltip",s=new t(this,r)),"string"==typeof n&&s[n]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(window.jQuery),!function(e){var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content")[this.options.html?"html":"text"](n),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,n=this.options;return e=("function"==typeof n.content?n.content.call(t[0]):n.content)||t.attr("data-content")},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var n=e.fn.popover;e.fn.popover=function(n){return this.each(function(){var i=e(this),s=i.data("popover"),r="object"==typeof n&&n;s||i.data("popover",s=new t(this,r)),"string"==typeof n&&s[n]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(window.jQuery),!function(e){function t(t,n){var i,s=e.proxy(this.process,this),r=e(t).is("body")?e(window):e(t);this.options=e.extend({},e.fn.scrollspy.defaults,n),this.$scrollElement=r.on("scroll.scroll-spy.data-api",s),this.selector=(this.options.target||(i=e(t).attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=e("body"),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){var t,n=this;this.offsets=e([]),this.targets=e([]),t=this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#\w/.test(i)&&e(i);return s&&s.length&&[[s.position().top+(!e.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},process:function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),s=this.offsets,r=this.targets,o=this.activeTarget;if(t>=i)return o!=(e=r.last()[0])&&this.activate(e);for(e=s.length;e--;)o!=r[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(r[e])},activate:function(t){var n,i;this.activeTarget=t,e(this.selector).parent(".active").removeClass("active"),i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parent("li").addClass("active"),n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate")}};var n=e.fn.scrollspy;e.fn.scrollspy=function(n){return this.each(function(){var i=e(this),s=i.data("scrollspy"),r="object"==typeof n&&n;s||i.data("scrollspy",s=new t(this,r)),"string"==typeof n&&s[n]()})},e.fn.scrollspy.Constructor=t,e.fn.scrollspy.defaults={offset:10},e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);t.scrollspy(t.data())})})}(window.jQuery),!function(e){var t=function(t){this.element=e(t)};t.prototype={constructor:t,show:function(){var t,n,i,s=this.element,r=s.closest("ul:not(.dropdown-menu)"),o=s.attr("data-target");o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(t=r.find(".active:last a")[0],i=e.Event("show",{relatedTarget:t}),s.trigger(i),i.isDefaultPrevented()||(n=e(o),this.activate(s.parent("li"),r),this.activate(n,n.parent(),function(){s.trigger({type:"shown",relatedTarget:t})})))},activate:function(t,n,i){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),o?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),i&&i()}var r=n.find("> .active"),o=i&&e.support.transition&&r.hasClass("fade");o?r.one(e.support.transition.end,s):s(),r.removeClass("in")}};var n=e.fn.tab;e.fn.tab=function(n){return this.each(function(){var i=e(this),s=i.data("tab");s||i.data("tab",s=new t(this)),"string"==typeof n&&s[n]()})},e.fn.tab.Constructor=t,e.fn.tab.noConflict=function(){return e.fn.tab=n,this},e(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),e(this).tab("show")})}(window.jQuery),!function(e){var t=function(t,n){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,n),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=e(this.options.menu),this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:t.top+t.height,left:t.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var n=this;return t=e.grep(t,function(e){return n.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,n=[],i=[],s=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):s.push(t):n.push(t);return n.concat(i,s)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var n=this;return t=e(t).map(function(t,i){return t=e(n.options.item).attr("data-value",i),t.find("a").html(n.highlighter(i)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),n=t.next();n.length||(n=e(this.$menu.find("li")[0])),n.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this))},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},focus:function(){this.focused=!0},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(e){e.stopPropagation(),e.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var n=e.fn.typeahead;e.fn.typeahead=function(n){return this.each(function(){var i=e(this),s=i.data("typeahead"),r="object"==typeof n&&n;s||i.data("typeahead",s=new t(this,r)),"string"==typeof n&&s[n]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var t=e(this);t.data("typeahead")||t.typeahead(t.data())})}(window.jQuery),!function(e){var t=function(t,n){this.options=e.extend({},e.fn.affix.defaults,n),this.$window=e(window).on("scroll.affix.data-api",e.proxy(this.checkPosition,this)).on("click.affix.data-api",e.proxy(function(){setTimeout(e.proxy(this.checkPosition,this),1)},this)),this.$element=e(t),this.checkPosition()};t.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t,n=e(document).height(),i=this.$window.scrollTop(),s=this.$element.offset(),r=this.options.offset,o=r.bottom,a=r.top,l="affix affix-top affix-bottom";"object"!=typeof r&&(o=a=r),"function"==typeof a&&(a=r.top()),"function"==typeof o&&(o=r.bottom()),t=null!=this.unpin&&i+this.unpin<=s.top?!1:null!=o&&s.top+this.$element.height()>=n-o?"bottom":null!=a&&a>=i?"top":!1,this.affixed!==t&&(this.affixed=t,this.unpin="bottom"==t?s.top-i:null,this.$element.removeClass(l).addClass("affix"+(t?"-"+t:"")))}};var n=e.fn.affix;e.fn.affix=function(n){return this.each(function(){var i=e(this),s=i.data("affix"),r="object"==typeof n&&n;s||i.data("affix",s=new t(this,r)),"string"==typeof n&&s[n]()})},e.fn.affix.Constructor=t,e.fn.affix.defaults={offset:0},e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var t=e(this),n=t.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),t.affix(n)})})}(window.jQuery),define("bootstrap",["jquery"],function(e){return function(){var t;return t||e.jquery}}(this)),define("core/view",["underscore","backbone","./layouts/layout-site","./layouts/layout-game","./layouts/layout-dashboard","ui_widgets/user_menu","composite_views/perch","bootstrap"],function(e,t,n,i,s,r,o){var a,l;return l="core/view",a=t.View.extend({initialize:function(){return $("body").append(this.el),r.start(this.options.app)},render:function(){return this._curLayout.show(this._curView),this.$el.html(this._curLayout.el),this},_cleanupOldView:function(){var e,t;return o.hide(),null!=(e=this._curView)&&"function"==typeof e.close&&e.close(),null!=(t=this._curView)?t.remove():void 0},_loadView:function(e){var t=this;return require([e],function(n){return t._cleanupOldView(),t._curView=new n,t.render(),t.options.app.analytics.trackPage(e)})},asSite:function(e){return this._curLayout=new n({app:this.options.app}),this._loadView(e)},asGame:function(e){return this._curLayout=new i({app:this.options.app}),this._loadView(e)},asDash:function(e){return this._curLayout=new s({app:this.options.app}),this._loadView(e)}})}),define("core/router",["jquery","backbone"],function(e,t){var n,i;return i="routers/main_router",n=t.Router.extend({routes:{"":"showHome",home:"showHome",about:"showAbout",team:"showTeam",investors:"showInvestors",game:"showGame",guestSignup:"showGuestSignup",dashboard:"showDashboard"},initialize:function(e){return this.app=e},showHome:function(){return this.app.view.asSite("pages/home")},showAbout:function(){return this.app.view.asSite("pages/about")},showTeam:function(){return this.app.view.asSite("pages/team")},showInvestors:function(){return this.app.view.asSite("pages/investors")},showGame:function(){return this.app.view.asGame("pages/play_game")},showGuestSignup:function(){return this.app.view.asGame("pages/guest_signup")},showDashboard:function(){return this.app.view.asDash("pages/dashboard/personality")}})}),define("entities/games",["jquery","backbone"],function(e,t){var n,i;return i="entities/games",n=t.Model.extend({urlRoot:""+window.apiServerUrl+"/api/v1/users/-/games",initialize:function(){return this},getLatestWithProfile:function(){var t;return t=e.Deferred(),this.fetch({url:""+this.url()+"/latest_with_profile"}).done(function(){return console.log("Got the latest game"),t.resolve()}).fail(function(){return t.reject()}),t.promise()},create:function(e){return this.save({definition_id:e}),this},nextStage:function(){var e;return e=this.get("stage_completed"),this.save({stage_completed:e+1})}})}),define("entities/user",["underscore","backbone","entities/games"],function(e,t,n){var i,s;return s="entities/user",i=t.Model.extend({urlRoot:""+window.apiServerUrl+"/api/v1/users",defaults:function(){return{id:"-",accessToken:localStorage.access_token}},initialize:function(){return this.on("change:name",this._calculateNickname),this.on("change:email",this._calculateNickname),this.on("change:guest",this._calculateNickname),this.on("error",this._onModelError)},validate:function(e,t){if(e.guest===!0)return null;if(!e.email)return"The email address cannot be blank.";if(t.validateProfile){if(!e.name)return"The name must be filled in."}else{if(!e.password)return"The password cannot be blank.";if(!(e.password.length>=8))return"The password should be 8 or more characters."}if("register"===e.loginType){if(!e.passwordConfirm)return"The confirm password field cannot be blank";if(e.password!==e.passwordConfirm)return"The passwords should match"}return null},_calculateNickname:function(){var e;return this.isGuest()||(e=this.get("name")||this.get("email")),this.set({nickname:e},{silent:!0})},_clearOutLocalStorage:function(){return delete localStorage.access_token,delete localStorage.expires_in,delete localStorage.token_received,delete localStorage.refresh_token,delete localStorage.guest},_onModelError:function(e,t){var n;return console.log(""+s+"._onModelError() xhr.statusText: "+t.statusText),console.log({xhr:t}),401===t.status?null!=(n=this.session)?n.logOut():void 0:void 0},parseHash:function(e){var t,n,i,s;for(n={},i=e.substring(1),s=/([^&=]+)=([^&]*)/g;t=s.exec(i);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n},addAuthentication:function(t,n){var i,s,r,o;return s=window.screenLeft+50,r=window.screenTop+50,o=n.width,i=n.height,window.addAuthRedirect=e.bind(this.onAddAuthRedirect,this),window.open(this.setupAddAuthUrl(t),"Login","width="+o+", height="+i+", left="+s+", top="+r+", menubar=no")},setupAddAuthUrl:function(e){var t,n,i;return t=""+window.apiServerUrl+"/auth/additional",i=""+window.location.protocol+"//"+window.location.host+"/additional_redirect.html#",i=encodeURIComponent(i),n="provider="+e+"&",""+t+"?redirect_uri="+i+"&user_id="+this.get("id")+"&provider="+e},onAddAuthRedirect:function(e,t){var n;return console.log("onAddAuthRedirect called with "+t+" and hash "+e),n=this.parseHash(e),console.log("params are: "+n.user_id+" and "+n.provider),this.trigger("user:authentication_added",n.provider)},isNew:function(){return!this.get("accessToken")},createGame:function(e){var t,i=this;return t=new n,this.isLoggedIn()?t.create(e):this.session.logInAsGuest().done(function(){return t.create(e)}).fail(function(){return i.trigger("error:createGame"),console.log(""+s+".createGame.fail()")}),t},isGuest:function(){return!!this.get("guest")},hasCurrentToken:function(){var e,t,n,i,s;return e=!1,(null!=(s=this.get("accessToken"))?s.length:void 0)&&(t=(new Date).getTime(),n=parseInt(localStorage.expires_in),i=parseInt(localStorage.token_received),null!=n&&null!=i&&i+n>t?e=!0:this._clearOutLocalStorage()),e},isLoggedIn:function(){return this.hasCurrentToken()},reset:function(){return this.clear().set(this.defaults()),this}})}),define("controllers/session_controller",["jquery","underscore","backbone","Handlebars"],function(e,t){var n,i,s;return s="controllers/session_controller",i="/oauth/authorize",n=function(n){var s=this;return this.options=n,this.user=this.options.app.user,this.cfg=this.options.app.cfg,t.bindAll(this,"onUserSync"),this.user.on("sync",this.onUserSync),this._authUrl=""+this.cfg.apiServer+i,e.ajaxSetup({type:"POST",timeout:5e3,headers:{"X-CSRF-Token":e('meta[name="csrf-token"]').attr("content"),Accept:"application/json"},dataType:"json",beforeSend:function(e){var t;return s.user.hasCurrentToken()?(t="Bearer "+s.user.get("accessToken"),e.setRequestHeader("Authorization",t)):void 0}}),this.user.hasCurrentToken()&&this.user.fetch(),this},n.prototype={signIn:function(){var t,n=this;return t=e.Deferred(),this.user.hasCurrentToken()&&!this.user.isGuest()?this.user.fetch().done(function(){return t.resolve("Success")}).fail(function(e,n){return t.reject(n)}):e.ajax({url:this._authUrl,type:"POST",data:{grant_type:"password",response_type:"password",email:this.user.get("email"),password:this.user.get("password"),client_id:this.cfg.appId,client_secret:this.cfg.appSecret}}).done(function(e){return console.log({token:e.access_token}),n._persistLocally(e),n.user.reset().fetch().done(function(){return n.options.app.analytics.track("session","Successful Sign In"),t.resolve("Success")}).fail(function(e,i){return n.options.app.analytics.track("session","Failed Sign In"),t.reject(i)})}).fail(function(e,i){return n.user.trigger("error",n.user,e),t.reject(i)}),t.promise()},register:function(){var t,n=this;return t=e.Deferred(),this.user.save().done(function(){return n.signIn().done(function(){return n.options.app.analytics.track("session","Successful Registration"),t.resolve("Success")}).fail(function(){return n.options.app.analytics.track("session","Failed Registration"),t.reject("Fail")})}),t.promise()},onUserSync:function(e){var t;return t=e.isGuest()?e.attributes.id:e.attributes.email,this.options.app.analytics.setUserIdentity(t)},_clearOutLocalStorage:function(){return delete localStorage.access_token,delete localStorage.expires_in,delete localStorage.token_received,delete localStorage.refresh_token,delete localStorage.guest},_buildExternalServiceUrl:function(e){var t,n,i,s;return i=encodeURIComponent(""+window.location.protocol+"//"+window.location.host+"/redirect.html"),t="provider="+e+"&",n=this.user.get("guest")?"guest_id="+this.user.get("id")+"&":"",s=""+this._authUrl+"?"+t+n+"client_id="+this.cfg.appId+"&redirect_uri="+i+"&response_type=token"},_parseHash:function(e){var t,n,i,s;for(n={},i=e.substring(1),s=/([^&=]+)=([^&]*)/g;t=s.exec(i);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n},_persistLocally:function(e){return localStorage.access_token=e.access_token,localStorage.expires_in=1e3*e.expires_in,localStorage.token_received=(new Date).getTime(),localStorage.refresh_token=e.refresh_token},logInAsGuest:function(){var t;return t=e.Deferred(),this.user.set({guest:!0}),this.register().done(function(){return t.resolve("Success")}).fail(function(){return t.reject("Fail")}),t.promise()},loginUsingOauth:function(e,n){var i,s,r,o;return s=window.screenLeft+50,r=window.screenTop+50,o=n.width,i=n.height,window.OAuthRedirect=t.bind(this.externalAuthServiceCallback,this),window.open(this._buildExternalServiceUrl(e),"Login","width="+o+", height="+i+", left="+s+", top="+r+", menubar=no")},logOut:function(){return this._clearOutLocalStorage(),this.user.reset()},externalAuthServiceCallback:function(e){var t;return t=this._parseHash(e),t.access_token?(this.logOut(),this._persistLocally(t),this.user.reset(),this.user.fetch()):console.log("Odd Error, no token received but redirected"),this.options.app.analytics.track("session","Successful External Auth Login")}},n}),define("core/main",["underscore","backbone","./config","./analytics","./mediator","./view","./router","entities/user","controllers/session_controller"],function(e,t,n,i,s,r,o,a,l){var c,u,h;return h="core/main",c=function(){return this.cfg=n,e.extend(this,t.Events),this.user=new a,this},c.prototype={start:function(){return this.session=new l({app:this}),this.user.session=this.session,this.analytics=new i(this.cfg),this.view=new r({app:this}),this.mediator=new s({app:this}),this.router=new o(this),t.history.start(),this}},u=new c}),define("core",["core/main"],function(e){return e}),define("text!pages/about.hbs",[],function(){return"\n<h2>About Page</h2>\n<p>Sample Content.</p>"}),define("pages/about",["backbone","Handlebars","text!./about.hbs"],function(e,t,n){var i;return i=e.View.extend({className:"aboutPage",initialize:function(){},render:function(){return this.$el.html(n),this}})}),define("text!pages/guest_signup.hbs",[],function(){return'\n<div id="ResultsContainer" class="results">\n    <b class="holdPlease inline">\n        <i class="icon-repeat icon-4x"></i>\n    </b>\n</div>\n\n\n<h2>Learn More About Yourself</h2>\n\n<p>You completed the first TidePool game. That\'s awesome. Sign up to see the full results, play more games, and see reccomendations tailored to your personality and interests.</p>\n\n<button class="btn btn-large btn-primary" id="ActionShowSignup">Sign Up</button>\n\n\n<!--<div id="SignupContainer"></div>-->\n'
}),define("text!pages/guest_signup_personality.hbs",[],function(){return'\n<p class="textAlignCenter">\n    <img src="/images/badges/{{logo_url}}" alt="{{name}}">\n</p>\n\n<h2>\n    <span class="muted">You are </span>\n    {{name}}\n</h2>\n\n<p class=\'large\'>{{one_liner}}</p>\n\n\n'}),function(e){function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function n(){var e=require("util");return"Markdown.mk_block( "+e.inspect(this.toString())+", "+e.inspect(this.trailing)+", "+e.inspect(this.lineNumber)+" )"}function i(e){for(var t=0,n=-1;-1!==(n=e.indexOf("\n",n+1));)t++;return t}function s(e,t){function n(e){this.len_after=e,this.name="close_"+t}var i=e+"_state",s="strong"==e?"em_state":"strong_state";return function(r){if(this[i][0]==t)return this[i].shift(),[r.length,new n(r.length-t.length)];var o=this[s].slice(),a=this[i].slice();this[i].unshift(t);var l=this.processInline(r.substr(t.length)),c=l[l.length-1];if(this[i].shift(),c instanceof n){l.pop();var u=r.length-c.len_after;return[u,[e].concat(l)]}return this[s]=o,this[i]=a,[t.length,t]}}function r(e){for(var t=e.split(""),n=[""],i=!1;t.length;){var s=t.shift();switch(s){case" ":i?n[n.length-1]+=s:n.push("");break;case"'":case'"':i=!i;break;case"\\":s=t.shift();default:n[n.length-1]+=s}}return n}function o(e){return m(e)&&e.length>1&&"object"==typeof e[1]&&!m(e[1])?e[1]:void 0}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function c(e){if("string"==typeof e)return l(e);var t=e.shift(),n={},i=[];for(!e.length||"object"!=typeof e[0]||e[0]instanceof Array||(n=e.shift());e.length;)i.push(arguments.callee(e.shift()));var s="";for(var r in n)s+=" "+r+'="'+l(n[r])+'"';return"img"==t||"br"==t||"hr"==t?"<"+t+s+"/>":"<"+t+s+">"+i.join("")+"</"+t+">"}function u(e,t,n){var i;n=n||{};var s=e.slice(0);"function"==typeof n.preprocessTreeNode&&(s=n.preprocessTreeNode(s,t));var r=o(s);if(r){s[1]={};for(i in r)s[1][i]=r[i];r=s[1]}if("string"==typeof s)return s;switch(s[0]){case"header":s[0]="h"+s[1].level,delete s[1].level;break;case"bulletlist":s[0]="ul";break;case"numberlist":s[0]="ol";break;case"listitem":s[0]="li";break;case"para":s[0]="p";break;case"markdown":s[0]="html",r&&delete r.references;break;case"code_block":s[0]="pre",i=r?2:1;var a=["code"];a.push.apply(a,s.splice(i)),s[i]=a;break;case"inlinecode":s[0]="code";break;case"img":s[1].src=s[1].href,delete s[1].href;break;case"linebreak":s[0]="br";break;case"link":s[0]="a";break;case"link_ref":s[0]="a";var l=t[r.ref];if(!l)return r.original;delete r.ref,r.href=l.href,l.title&&(r.title=l.title),delete r.original;break;case"img_ref":s[0]="img";var l=t[r.ref];if(!l)return r.original;delete r.ref,r.src=l.href,l.title&&(r.title=l.title),delete r.original}if(i=1,r){for(var c in s[1])i=2;1===i&&s.splice(i,1)}for(;i<s.length;++i)s[i]=arguments.callee(s[i],t,n);return s}function h(e){for(var t=o(e)?2:1;t<e.length;)"string"==typeof e[t]?t+1<e.length&&"string"==typeof e[t+1]?e[t]+=e.splice(t+1,1)[0]:++t:(arguments.callee(e[t]),++t)}var d=e.Markdown=function v(e){switch(typeof e){case"undefined":this.dialect=v.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in v.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=v.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};e.parse=function(e,t){var n=new d(t);return n.toTree(e)},e.toHTML=function(t,n,i){var s=e.toHTMLTree(t,n,i);return e.renderJsonML(s)},e.toHTMLTree=function(e,t,n){"string"==typeof e&&(e=this.parse(e,t));var i=o(e),s={};i&&i.references&&(s=i.references);var r=u(e,s,n);return h(r),r};var f=d.mk_block=function(e,i,s){1==arguments.length&&(i="\n\n");var r=new String(e);return r.trailing=i,r.inspect=n,r.toSource=t,void 0!=s&&(r.lineNumber=s),r};d.prototype.split_blocks=function(e){var t,n=/([\s\S]+?)($|\n(?:\s*\n|$)+)/g,s=[],r=1;for(null!=(t=/^(\s*\n)/.exec(e))&&(r+=i(t[0]),n.lastIndex=t[0].length);null!==(t=n.exec(e));)s.push(f(t[1],t[2],r)),r+=i(t[0]);return s},d.prototype.processBlock=function(e,t){var n=this.dialect.block,i=n.__order__;if("__call__"in n)return n.__call__.call(this,e,t);for(var s=0;s<i.length;s++){var r=n[i[s]].call(this,e,t);if(r)return(!m(r)||r.length>0&&!m(r[0]))&&this.debug(i[s],"didn't return a proper array"),r}return[]},d.prototype.processInline=function(e){return this.dialect.inline.__call__.call(this,String(e))},d.prototype.toTree=function(e,t){var n=e instanceof Array?e:this.split_blocks(e),i=this.tree;try{for(this.tree=t||this.tree||["markdown"];n.length;){var s=this.processBlock(n.shift(),n);s.length&&this.tree.push.apply(this.tree,s)}return this.tree}finally{t&&(this.tree=i)}},d.prototype.debug=function(){var e=Array.prototype.slice.call(arguments);e.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,e),"undefined"!=typeof console&&"undefined"!=typeof console.log&&console.log.apply(null,e)},d.prototype.loop_re_over_block=function(e,t,n){for(var i,s=t.valueOf();s.length&&null!=(i=e.exec(s));)s=s.substr(i[0].length),n.call(this,i);return s},d.dialects={},d.dialects.Gruber={block:{atxHeader:function(e,t){var n=e.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(!n)return void 0;var i=["header",{level:n[1].length}];return Array.prototype.push.apply(i,this.processInline(n[2])),n[0].length<e.length&&t.unshift(f(e.substr(n[0].length),e.trailing,e.lineNumber+2)),[i]},setextHeader:function(e,t){var n=e.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(!n)return void 0;var i="="===n[2]?1:2,s=["header",{level:i},n[1]];return n[0].length<e.length&&t.unshift(f(e.substr(n[0].length),e.trailing,e.lineNumber+2)),[s]},code:function(e,t){var n=[],i=/^(?: {0,3}\t| {4})(.*)\n?/;if(!e.match(i))return void 0;e:for(;;){var s=this.loop_re_over_block(i,e.valueOf(),function(e){n.push(e[1])});if(s.length){t.unshift(f(s,e.trailing));break e}if(!t.length)break e;if(!t[0].match(i))break e;n.push(e.trailing.replace(/[^\n]/g,"").substring(2)),e=t.shift()}return[["code_block",n.join("\n")]]},horizRule:function(e,t){var n=e.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(!n)return void 0;var i=[["hr"]];return n[1]&&i.unshift.apply(i,this.processBlock(n[1],[])),n[3]&&t.unshift(f(n[3])),i},lists:function(){function e(e){return new RegExp("(?:^("+l+"{0,"+e+"} {0,3})("+r+")\\s+)|"+"(^"+l+"{0,"+(e-1)+"}[ ]{0,4})")}function t(e){return e.replace(/ {0,3}\t/g,"    ")}function n(e,t,n,i){if(t)return e.push(["para"].concat(n)),void 0;var s=e[e.length-1]instanceof Array&&"para"==e[e.length-1][0]?e[e.length-1]:e;i&&e.length>1&&n.unshift(i);for(var r=0;r<n.length;r++){var o=n[r],a="string"==typeof o;a&&s.length>1&&"string"==typeof s[s.length-1]?s[s.length-1]+=o:s.push(o)}}function i(e,t){for(var n=new RegExp("^("+l+"{"+e+"}.*?\\n?)*$"),i=new RegExp("^"+l+"{"+e+"}","gm"),s=[];t.length>0;){if(n.exec(t[0])){var r=t.shift(),o=r.replace(i,"");s.push(f(o,r.trailing,r.lineNumber))}break}return s}function s(e,t,n){var i=e.list,s=i[i.length-1];if(!(s[1]instanceof Array&&"para"==s[1][0]))if(t+1==n.length)s.push(["para"].concat(s.splice(1)));else{var r=s.pop();s.push(["para"].concat(s.splice(1)),r)}}var r="[*+-]|\\d+\\.",o=/[*+-]/,a=new RegExp("^( {0,3})("+r+")[ 	]+"),l="(?: {0,3}\\t| {4})";return function(r,l){function c(e){var t=o.exec(e[2])?["bulletlist"]:["numberlist"];return p.push({list:t,indent:e[1]}),t}var u=r.match(a);if(!u)return void 0;for(var h,d,p=[],f=c(u),m=!1,v=[p[0].list];;){for(var y=r.split(/(?=\n)/),b="",_=0;_<y.length;_++){var w="",x=y[_].replace(/^\n/,function(e){return w=e,""}),k=e(p.length);if(u=x.match(k),void 0!==u[1]){b.length&&(n(h,m,this.processInline(b),w),m=!1,b=""),u[1]=t(u[1]);var S=Math.floor(u[1].length/4)+1;if(S>p.length)f=c(u),h.push(f),h=f[1]=["listitem"];else{var C=!1;for(d=0;d<p.length;d++)if(p[d].indent==u[1]){f=p[d].list,p.splice(d+1),C=!0;break}C||(S++,S<=p.length?(p.splice(S),f=p[S-1].list):(f=c(u),h.push(f))),h=["listitem"],f.push(h)}w=""}x.length>u[0].length&&(b+=w+x.substr(u[0].length))}b.length&&(n(h,m,this.processInline(b),w),m=!1,b="");var T=i(p.length,l);T.length>0&&(g(p,s,this),h.push.apply(h,this.toTree(T,[])));var P=l[0]&&l[0].valueOf()||"";if(!P.match(a)&&!P.match(/^ /))break;r=l.shift();var E=this.dialect.block.horizRule(r,l);if(E){v.push.apply(v,E);break}g(p,s,this),m=!0}return v}}(),blockquote:function(e,t){if(!e.match(/^>/m))return void 0;var n=[];if(">"!=e[0]){for(var i=e.split(/\n/),s=[];i.length&&">"!=i[0][0];)s.push(i.shift());e=i.join("\n"),n.push.apply(n,this.processBlock(s.join("\n"),[]))}for(;t.length&&">"==t[0][0];){var r=t.shift();e=new String(e+e.trailing+r),e.trailing=r.trailing}var o=e.replace(/^> ?/gm,"");return this.tree,n.push(this.toTree(o,["blockquote"])),n},referenceDefn:function(e,t){var n=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(!e.match(n))return void 0;o(this.tree)||this.tree.splice(1,0,{});var i=o(this.tree);void 0===i.references&&(i.references={});var s=this.loop_re_over_block(n,e,function(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var t=i.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?t.title=e[4]:void 0!==e[5]&&(t.title=e[5])});return s.length&&t.unshift(f(s,e.trailing)),[]},para:function(e){return[["para"].concat(this.processInline(e))]}}},d.dialects.Gruber.inline={__oneElement__:function(e,t,n){var i,s;t=t||this.dialect.inline.__patterns__;var r=new RegExp("([\\s\\S]*?)("+(t.source||t)+")");if(i=r.exec(e),!i)return[e.length,e];if(i[1])return[i[1].length,i[1]];var s;return i[2]in this.dialect.inline&&(s=this.dialect.inline[i[2]].call(this,e.substr(i.index),i,n||[])),s=s||[i[2].length,i[2]]},__call__:function(e,t){function n(e){"string"==typeof e&&"string"==typeof s[s.length-1]?s[s.length-1]+=e:s.push(e)}for(var i,s=[];e.length>0;)i=this.dialect.inline.__oneElement__.call(this,e,t,s),e=e.substr(i.shift()),g(i,n);return s},"]":function(){},"}":function(){},"\\":function(e){return e.match(/^\\[\\`\*_{}\[\]()#\+.!\-]/)?[2,e[1]]:[1,"\\"]},"![":function(e){var t=e.match(/^!\[(.*?)\][ \t]*\([ \t]*(\S*)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(t){t[2]&&"<"==t[2][0]&&">"==t[2][t[2].length-1]&&(t[2]=t[2].substring(1,t[2].length-1)),t[2]=this.dialect.inline.__call__.call(this,t[2],/\\/)[0];var n={alt:t[1],href:t[2]||""};return void 0!==t[4]&&(n.title=t[4]),[t[0].length,["img",n]]}return t=e.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),t?[t[0].length,["img_ref",{alt:t[1],ref:t[2].toLowerCase(),original:t[0]}]]:[2,"!["]},"[":function y(e){var t=String(e),n=d.DialectHelpers.inline_until_char.call(this,e.substr(1),"]");if(!n)return[1,"["];var y,i,s=1+n[0],r=n[1];e=e.substr(s);var o=e.match(/^\s*\([ \t]*(\S+)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(o){var a=o[1];if(s+=o[0].length,a&&"<"==a[0]&&">"==a[a.length-1]&&(a=a.substring(1,a.length-1)),!o[3])for(var l=1,c=0;c<a.length;c++)switch(a[c]){case"(":l++;break;case")":0==--l&&(s-=a.length-c,a=a.substring(0,c))}return a=this.dialect.inline.__call__.call(this,a,/\\/)[0],i={href:a||""},void 0!==o[3]&&(i.title=o[3]),y=["link",i].concat(r),[s,y]}return o=e.match(/^\s*\[(.*?)\]/),o?(s+=o[0].length,i={ref:(o[1]||String(r)).toLowerCase(),original:t.substr(0,s)},y=["link_ref",i].concat(r),[s,y]):1==r.length&&"string"==typeof r[0]?(i={ref:r[0].toLowerCase(),original:t.substr(0,s)},y=["link_ref",i,r[0]],[s,y]):[1,"["]},"<":function(e){var t;return null!=(t=e.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?t[3]?[t[0].length,["link",{href:"mailto:"+t[3]},t[3]]]:"mailto"==t[2]?[t[0].length,["link",{href:t[1]},t[1].substr("mailto:".length)]]:[t[0].length,["link",{href:t[1]},t[1]]]:[1,"<"]},"`":function(e){var t=e.match(/(`+)(([\s\S]*?)\1)/);return t&&t[2]?[t[1].length+t[2].length,["inlinecode",t[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}},d.dialects.Gruber.inline["**"]=s("strong","**"),d.dialects.Gruber.inline.__=s("strong","__"),d.dialects.Gruber.inline["*"]=s("em","*"),d.dialects.Gruber.inline._=s("em","_"),d.buildBlockOrder=function(e){var t=[];for(var n in e)"__order__"!=n&&"__call__"!=n&&t.push(n);e.__order__=t},d.buildInlinePatterns=function(e){var t=[];for(var n in e)if(!n.match(/^__.*__$/)){var i=n.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");t.push(1==n.length?i:"(?:"+i+")")}t=t.join("|"),e.__patterns__=t;var s=e.__call__;e.__call__=function(e,n){return void 0!=n?s.call(this,e,n):s.call(this,e,t)}},d.DialectHelpers={},d.DialectHelpers.inline_until_char=function(e,t){for(var n=0,i=[];;){if(e[n]==t)return n++,[n,i];if(n>=e.length)return null;res=this.dialect.inline.__oneElement__.call(this,e.substr(n)),n+=res[0],i.push.apply(i,res.slice(1))}},d.subclassDialect=function(e){function t(){}function n(){}return t.prototype=e.block,n.prototype=e.inline,{block:new t,inline:new n}},d.buildBlockOrder(d.dialects.Gruber.block),d.buildInlinePatterns(d.dialects.Gruber.inline),d.dialects.Maruku=d.subclassDialect(d.dialects.Gruber),d.dialects.Maruku.processMetaHash=function(e){for(var t=r(e),n={},i=0;i<t.length;++i)if(/^#/.test(t[i]))n.id=t[i].substring(1);else if(/^\./.test(t[i]))n["class"]=n["class"]?n["class"]+t[i].replace(/./," "):t[i].substring(1);else if(/\=/.test(t[i])){var s=t[i].split(/\=/);n[s[0]]=s[1]}return n},d.dialects.Maruku.block.document_meta=function(e){if(e.lineNumber>1)return void 0;if(!e.match(/^(?:\w+:.*\n)*\w+:.*$/))return void 0;o(this.tree)||this.tree.splice(1,0,{});var t=e.split(/\n/);for(p in t){var n=t[p].match(/(\w+):\s*(.*)$/),i=n[1].toLowerCase(),s=n[2];this.tree[1][i]=s}return[]},d.dialects.Maruku.block.block_meta=function(e){var t=e.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(!t)return void 0;var n,i=this.dialect.processMetaHash(t[2]);if(""===t[1]){var s=this.tree[this.tree.length-1];if(n=o(s),"string"==typeof s)return void 0;n||(n={},s.splice(1,0,n));for(a in i)n[a]=i[a];return[]}var r=e.replace(/\n.*$/,""),l=this.processBlock(r,[]);n=o(l[0]),n||(n={},l[0].splice(1,0,n));for(a in i)n[a]=i[a];return l},d.dialects.Maruku.block.definition_list=function(e,t){var n,i=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,s=["dl"];if(!(a=e.match(i)))return void 0;for(var r=[e];t.length&&i.exec(t[0]);)r.push(t.shift());for(var o=0;o<r.length;++o){var a=r[o].match(i),l=a[1].replace(/\n$/,"").split(/\n/),c=a[2].split(/\n:\s+/);for(n=0;n<l.length;++n)s.push(["dt",l[n]]);for(n=0;n<c.length;++n)s.push(["dd"].concat(this.processInline(c[n].replace(/(\n)\s+/,"$1"))))}return[s]},d.dialects.Maruku.inline["{:"]=function(e,t,n){if(!n.length)return[2,"{:"];var i=n[n.length-1];if("string"==typeof i)return[2,"{:"];var s=e.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!s)return[2,"{:"];var r=this.dialect.processMetaHash(s[1]),a=o(i);a||(a={},i.splice(1,0,a));for(var l in r)a[l]=r[l];return[s[0].length,""]},d.buildBlockOrder(d.dialects.Maruku.block),d.buildInlinePatterns(d.dialects.Maruku.inline);var g,m=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};g=Array.prototype.forEach?function(e,t,n){return e.forEach(t,n)}:function(e,t,n){for(var i=0;i<e.length;i++)t.call(n||e,e[i],i,e)},e.renderJsonML=function(e,t){t=t||{},t.root=t.root||!1;var n=[];if(t.root)n.push(c(e));else for(e.shift(),!e.length||"object"!=typeof e[0]||e[0]instanceof Array||e.shift();e.length;)n.push(c(e.shift()));return n.join("\n\n")}}(function(){return"undefined"==typeof exports?(window.markdown={},window.markdown):exports}()),define("markdown",function(e){return function(){var t;return t||e.markdown}}(this)),define("entities/cur_user_personality",["backbone","core","markdown"],function(e,t,n){var i,s,r;return r="entities/cur_user_personality",s=function(e){return n.toHTML(e)},i=e.Model.extend({url:""+t.cfg.apiServer+"/api/v1/users/-/personality",initialize:function(){return this.on("sync",this.onSync),this.on("error",this.onErr)},parse:function(e){var t,n,i,r,o,a;if(n=[],null!=(null!=e?null!=(o=e.profile_description)?o.bullet_description:void 0:void 0)){for(a=e.profile_description.bullet_description,i=0,r=a.length;r>i;i++)t=a[i],n.push(s(t));e.profile_description.bullet_description=n}return e},onSync:function(){},onErr:function(){return console.error(""+r+": Trouble getting the User Personality Model")}})}),define("entities/user_personality_skinny",["backbone"],function(e){var t,n;return n="entities/user_personality_skinny",t=e.Model.extend({defaults:{name:null,one_liner:null,logo_url:null}})}),define("pages/guest_signup",["backbone","Handlebars","text!./guest_signup.hbs","text!./guest_signup_personality.hbs","entities/cur_user_personality","entities/user_personality_skinny","ui_widgets/psst","core"],function(e,t,n,i,s,r,o,a){var l,c,u,h;return c=1,u="#ResultsContainer",h="#SignupContainer",l=e.View.extend({tmplPersonality:t.compile(i),className:"guestSignupPage",events:{"click #ActionShowSignup":"onClickedSignUp"},initialize:function(){return this.personalityFull=new s,this.listenTo(this.personalityFull,"sync",this.onSync),this.listenTo(this.personalityFull,"error",this.onError),this.listenTo(a.user,"sync",this.onUserSync),this.personalityFull.fetch()},render:function(){return this.$el.html(n),this},_renderPersonalityBrief:function(e){return this.$(u).html(this.tmplPersonality(e.attributes))},onSync:function(e){var t,n;return n=e.get("profile_description"),null!=n?(t=new r({name:n.name,one_liner:n.one_liner,logo_url:n.logo_url}),this._renderPersonalityBrief(t)):void 0},onError:function(e,t){return o({sel:u,title:"Doh.",msg:"Trouble getting a read on your personality. "+t.status+": "+t.statusText,type:o.TYPES.error})},onClickedSignUp:function(){return a.analytics.track(this.className,"Pressed Sign Up"),a.trigger("session:showRegister")},onUserSync:function(e){return console.log("user registered or signed in"),e.isGuest()?void 0:a.router.navigate("dashboard",{trigger:!0})}})}),define("text!pages/home.hbs",[],function(){return'<div class="container-fluid">\n\n    <div class="row-fluid spaceBelow">\n        <div class="span12">\n            <h1 class="inlineBlock">Awareness is the beginning of improvement</h1>\n            <a href="#game" class="btn btn-large btn-success pull-right">Get Started</a>\n        </div>\n    </div>\n\n    <div class="row-fluid spaceBelow">\n        <div class="span6">\n            <img src="/images/landing_page/left.jpeg"/>\n        </div>\n        <div class="span6">\n            <img src="/images/landing_page/right.jpeg"/>\n        </div>\n    </div>\n\n  <div class="row-fluid">\n    <div class="span1">\n      <img src="/images/landing_page/diego.jpg"/>\n    </div>\n    <div class="span5">\n      <blockquote>\n        <p>\n          “One of the most exiting ideas I\'ve seen in a while!”\n        </p>\n        <small>\n          Diego Berdakin\n        </small>\n      </blockquote>\n    </div>\n    <div class="span1">\n      <img src="/images/landing_page/heather.jpg"/>\n    </div>\n    <div class="span5">\n      <blockquote>\n        <p>\n          “TidePool has such a smart team tackling a really interesting market. This team is on the money.”\n        </p>\n        <small>\n          Heather Gilchrist\n        </small>\n      </blockquote>\n    </div>\n  </div>\n</div>'}),define("pages/home",["backbone","Handlebars","text!./home.hbs"],function(e,t,n){var i;return i=e.View.extend({className:"homePage",tmpl:t.compile(n),render:function(){return this.$el.html(this.tmpl()),this}})}),define("text!pages/investors.hbs",[],function(){return"\n<h2>Investors Page</h2>\n<p>Sample Content.</p>\n"}),define("pages/investors",["backbone","Handlebars","text!./investors.hbs"],function(e,t,n){var i;return i=e.View.extend({className:"investorsPage",render:function(){return this.$el.html(n),this}})}),define("entities/levels",["backbone"],function(e){var t,n;return n=e.Model.extend({defaults:{friendly_name:"Default Level Name",isComplete:!1},initialize:function(){var e,t;return e=this.get("instructions"),t=e instanceof Array?e[0]:e,this.set("instructionsBrief",t)}}),t=e.Collection.extend({model:n,setComplete:function(e){var t;return t=this.at(e),null!=t?t.set("isComplete",!0):void 0}})}),define("entities/results_calculator",["jquery","backbone"],function(e,t){var n,i,s;return s="entities/results_calculator",i=10,n=t.Model.extend({STATES:{pending:"pending",error:"error",done:"done"},urlRoot:function(){var e;return e=this.get("game_id"),""+window.apiServerUrl+"/api/v1/users/-/games/"+e+"/result"},initialize:function(){return this.startCalculation(),this.on("sync",this.onSync)},pollForProgress:function(t){var n=this;return console.log(""+s+".pollForProgress("+t+")"),e.ajax({type:"GET",url:t}).done(function(e,t,s){switch(200!==s.status&&console.log("Unexpected StatusCode: "+s.status),e.status.state){case n.STATES.pending:return n.attempts+=1,n.attempts>=i?n.trigger("error",n,"Timed out waiting for results."):setTimeout(function(){return n.pollForProgress(e.status.link)},500);case n.STATES.done:return console.log("Done with results"),n.set("status",e.status);case n.STATES.error:return n.trigger("error",n,t);default:return n.trigger("error",n,"Unexpected status "+e.status.state)}}).fail(function(e,t,n){return this.trigger("error",this,t,{jqXHR:e,textStatus:t,errorThrown:n})})},onSync:function(e){return this.pollForProgress(e.attributes.status.link)},startCalculation:function(){return this.attempts=0,this.save()}})}),define("text!ui_widgets/steps_remaining.hbs",[],function(){return'\n{{#each steps}}\n    <div\n        class="step {{#isComplete}}completed{{/isComplete}}"\n        title="{{ friendly_name }}: {{ instructionsBrief }}"\n    >\n    </div>\n{{/each}}\n\n'}),define("ui_widgets/steps_remaining",["jquery","backbone","Handlebars","text!./steps_remaining.hbs"],function(e,t,n,i){var s;return s=t.View.extend({className:"stepsRemaining",initialize:function(){if(!this.collection)throw new Error("Need a collection to build a stepsRemaining view");return this.tmpl=n.compile(i),this.listenTo(this.collection,"change",this._onChange)},render:function(){return this.$el.html(this.tmpl({steps:this.collection.toJSON()})),this},_onChange:function(){return this.render()}})}),define("entities/user_event",["underscore","backbone"],function(e,t){var n,i;return i="entities/user_event",n=t.Model.extend({urlRoot:"/api/v1/user_events",initialize:function(){return this.url=window.apiServerUrl+this.urlRoot},send:function(t){var n,s,r;return r=(new Date).getTime(),n={record_time:r},s=e.extend({},n,t),this.save(s,{error:function(){return console.log(""+i+".save().error()")},success:function(){}})}})}),define("text!game/levels/reaction_time_disc/main.hbs",[],function(){return'\n\n<div id="CircleColorizer">\n    <a id="ReactionTimeTarget" class="circle" href="#">\n        <i class="icon-ok icon-4x"></i>\n    </a>\n</div>\n\n\n\n'}),define("game/levels/reaction_time_disc/main",["jquery","underscore","backbone","Handlebars","entities/user_event","text!./main.hbs","composite_views/perch"],function(e,t,n,i,s,r,o){var a,l,c,u,h,d,p,f,g,m;return f="game/levels/reaction_time_disc",h="#CircleColorizer",m="yellow",g="red",d="target",p="hit",u=750,l={simple:"simple",complex:"complex"},c={started:"test_started",shown:"circle_shown",correct:"correct_circle_clicked",incorrect:"wrong_circle_clicked",completed:"test_completed"},a=n.View.extend({className:"reactionTimeDisc",tmpl:i.compile(r),events:{"click #ReactionTimeTarget":"_onCircleClicked","click .target #ReactionTimeTarget":"_onCorrectClick"},initialize:function(e){return this.stageNo=e.stageNo,this.assessment=e.assessment,this.sequenceType=this.model.get("sequence_type"),this.colorSequence=this.model.get("sequence"),this.sequenceNo=-1,this.numOfSequences=this.colorSequence.length},render:function(){return this.$el.html(this.tmpl()),o.show({msg:this.model.get("instructions"),btn1Text:"I'm Ready",btn1Callback:t.bind(this._start,this),mustUseButton:!0,supressTracking:!0}),this},_start:function(){var t,n;return n=function(){var e,n,i,s;for(i=this.colorSequence,s=[],e=0,n=i.length;n>e;e++)t=i[e],s.push(t.color+":"+t.interval);return s}.call(this).slice(0),this._createUserEvent({event_desc:c.started,color_sequence:n}),e("#infobox").css("visibility","hidden"),this._waitAndShow()},_showCircle:function(){var t,n,i;return this.sequenceNo++,this.sequenceNo<this.numOfSequences&&(t=this.colorSequence[this.sequenceNo],i=this.colorSequence[this.sequenceNo-1],this._createUserEvent({event_desc:c.shown,circle_color:t.color,sequence_no:this.sequenceNo,time_interval:t.interval}),e(h).prop("class",t.color),this.sequenceType===l.simple&&t.color===g?e(h).addClass(d):this.sequenceType===l.complex&&t.color===g&&(null!=i?i.color:void 0)===m&&e(h).addClass(d),n=this.sequenceNo+1,n<this.numOfSequences)?this._waitAndShow():void 0},_waitAndShow:function(){var e;return e=this.colorSequence[this.sequenceNo+1].interval,setTimeout(t.bind(this._showCircle,this),e)},_onCircleClicked:function(e){var t,n;return e.preventDefault(),t=this.colorSequence[this.sequenceNo],n=this.colorSequence[this.sequenceNo-1],this.sequenceNo<=0?this._trackIncorrect():this.sequenceType===l.simple&&t.color===g?this._trackCorrect():this.sequenceType===l.complex&&t.color===g&&n.color===m?this._trackCorrect():this._trackIncorrect()},_onCorrectClick:function(){return e(h).addClass(p),this.sequenceNo===this.numOfSequences-1?(this._createUserEvent({event_desc:c.completed,sequence_no:this.sequenceNo}),setTimeout(t.bind(this.assessment.nextStage,this.assessment),u)):void 0},_trackCorrect:function(){var e;return e=this.colorSequence[this.sequenceNo],e.alreadyTracked?void 0:(this._createUserEvent({event_desc:c.correct,circle_color:e.color,sequence_no:this.sequenceNo}),e.alreadyTracked=!0)},_trackIncorrect:function(){var e;return this._createUserEvent({event_desc:c.incorrect,circle_color:null!=(e=this.colorSequence[this.sequenceNo])?e.color:void 0,sequence_no:this.sequenceNo})},_createUserEvent:function(e){var n,i,r;return n={game_id:this.assessment.get("id"),module:"reaction_time",stage:this.stageNo,sequence_type:this.sequenceType},i=t.extend({},n,e),r=new s,r.send(i)}})}),define("game/levels/reaction_time_disc",["game/levels/reaction_time_disc/main"],function(e){return e}),define("text!game/levels/rank_images/main.hbs",[],function(){return'\n\n<ul id="RankingArea" class="rankingArea connectedSortable">\n\n</ul>\n\n<ul id="UnrankedArea" class="unrankedArea connectedSortable">\n\n</ul>\n\n\n'}),define("text!game/levels/rank_images/rankable_image_view.hbs",[],function(){return'\n\n<img src="{{url}}" alt="{{image_id}}" data-id="{{image_id}}" />\n\n\n'}),define("game/levels/rank_images/rankable_image_view",["backbone","Handlebars","text!./rankable_image_view.hbs"],function(e,t,n){var i,s,r,o;return s="game/levels/rank_images/rankable_image_view",r=".rankImages",o=".dropTarget",i=e.View.extend({tmpl:t.compile(n),className:"rankableImage",initialize:function(){},render:function(){return this.$el.html(this.tmpl(this.model.attributes)),this}})}),define("game/levels/rank_images/rankable_images",["backbone","./rankable_image_view"],function(e,t){var n,i,s,r;return r="game/levels/rank_images/rankable_images Model",i=e.Model.extend({defaults:{rank:null},initialize:function(){return this.view=new t({model:this})}}),s="game/levels/rank_images/rankable_images Collection",n=e.Collection.extend({model:i})}),define("jqueryui/core",["jquery"],function(e){!function(e,t){function n(t,n){var s,r,o,a=t.nodeName.toLowerCase();return"area"===a?(s=t.parentNode,r=s.name,t.href&&r&&"map"===s.nodeName.toLowerCase()?(o=e("img[usemap=#"+r+"]")[0],!!o&&i(o)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var s=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(n,i){return"number"==typeof n?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),i&&i.call(t)},n)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,s,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var i=e.attr(t,"tabindex"),s=isNaN(i);return(s||i>=0)&&n(t,!s)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,i){function s(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(n){return n===t?a["inner"+i].call(this):this.each(function(){e(this).css(o,s(this,n)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(o,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,i){var s,r=e.ui[t].prototype;for(s in i)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([n,i[s]])},call:function(e,t,n){var i,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}},hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",s=!1;return t[i]>0?!0:(t[i]=1,s=t[i]>0,t[i]=0,s)}})}(e)}),define("jqueryui/widget",["jquery"],function(e){!function(e,t){var n=0,i=Array.prototype.slice,s=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(r){}s(t)},e.widget=function(t,n,i){var s,r,o,a,l={},c=t.split(".")[0];t=t.split(".")[1],s=c+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[c]=e[c]||{},r=e[c][t],o=e[c][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(i,function(t,i){return e.isFunction(i)?(l[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)
},s=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,r=this._superApply;return this._super=e,this._superApply=s,t=i.apply(this,arguments),this._super=n,this._superApply=r,t}}(),void 0):(l[t]=i,void 0)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:r?a.widgetEventPrefix:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:s}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,o,n._proto)}),delete r._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){for(var s,r,o=i.call(arguments,1),a=0,l=o.length;l>a;a++)for(s in o[a])r=o[a][s],o[a].hasOwnProperty(s)&&r!==t&&(n[s]=e.isPlainObject(r)?e.isPlainObject(n[s])?e.widget.extend({},n[s],r):e.widget.extend({},r):r);return n},e.widget.bridge=function(n,s){var r=s.prototype.widgetFullName||n;e.fn[n]=function(o){var a="string"==typeof o,l=i.call(arguments,1),c=this;return o=!a&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,a?this.each(function(){var i,s=e.data(this,r);return s?e.isFunction(s[o])&&"_"!==o.charAt(0)?(i=s[o].apply(s,l),i!==s&&i!==t?(c=i&&i.jquery?c.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,r);t?t.option(o||{})._init():e.data(this,r,new s(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var s,r,o,a=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(a={},s=n.split("."),n=s.shift(),s.length){for(r=a[n]=e.widget.extend({},this.options[n]),o=0;o<s.length-1;o++)r[s[o]]=r[s[o]]||{},r=r[s[o]];if(n=s.pop(),i===t)return r[n]===t?null:r[n];r[n]=i}else{if(i===t)return this.options[n]===t?null:this.options[n];a[n]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var s,r=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=s=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,s=this.widget()),e.each(i,function(i,o){function a(){return t||r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?r[o]:o).apply(r,arguments):void 0}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=i.match(/^(\w+)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?s.delegate(u,c,a):n.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var s,r,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(s in r)s in n||(n[s]=r[s]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,s,r){"string"==typeof s&&(s={effect:s});var o,a=s?s===!0||"number"==typeof s?n:s.effect||n:t;s=s||{},"number"==typeof s&&(s={duration:s}),o=!e.isEmptyObject(s),s.complete=r,s.delay&&i.delay(s.delay),o&&e.effects&&e.effects.effect[a]?i[t](s):a!==t&&i[a]?i[a](s.duration,s.easing,r):i.queue(function(n){e(this)[t](),r&&r.call(i[0]),n()})}})}(e)}),define("jqueryui/mouse",["jquery","./widget"],function(e){!function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,s=1===n.which,r="string"==typeof this.options.cancel&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;return s&&!r&&this._mouseCapture(n)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(e)}),define("jqueryui/sortable",["jquery","./core","./mouse","./widget"],function(e){!function(e){function t(e,t,n){return e>t&&t+n>e}function n(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||n(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var i=null,s=!1,r=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")===r?(i=e(this),!1):void 0}),e.data(t.target,r.widgetName+"-item")===r&&(i=e(t.target)),i?!this.options.handle||n||(e(this.options.handle,i).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s)?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,n,i){var s,r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,i,s,r,o=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],s=i.item[0],r=this._intersectsWithPointer(i),r&&i.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===r?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(t,i),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var i=this,s=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){i._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&i.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n.each(function(){i.push(e(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,i=this.positionAbs.top,s=i+this.helperProportions.height,r=e.left,o=r+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>a&&l>i+c,d="y"===this.options.axis||t+u>r&&o>t+u,p=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:r<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&a<i+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var n="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),i="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=n&&i,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return s?this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(e){var n=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&i||"left"===r&&!i:s&&("down"===s&&n||"up"===s&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,i,s,r,o=[],a=[],l=this._connectWith();if(l&&t)for(n=l.length-1;n>=0;n--)for(s=e(l[n]),i=s.length-1;i>=0;i--)r=e.data(s[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&a.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=a.length-1;n>=0;n--)a[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,i,s,r,o,a,l,c,u=this.items,h=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(s=e(d[n]),i=s.length-1;i>=0;i--)r=e.data(s[i],this.widgetFullName),r&&r!==this&&!r.options.disabled&&(h.push([e.isFunction(r.options.items)?r.options.items.call(r.element[0],t,{item:this.currentItem}):e(r.options.items,r.element),r]),this.containers.push(r));for(n=h.length-1;n>=0;n--)for(o=h[n][1],a=h[n][0],i=0,c=a.length;c>i;i++)l=e(a[i]),l.data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,s,r;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,i.item):i.item,t||(i.width=s.outerWidth(),i.height=s.outerHeight()),r=s.offset(),i.left=r.left,i.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)r=this.containers[n].element.offset(),this.containers[n].containerCache.left=r.left,this.containers[n].containerCache.top=r.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=t.currentItem[0].nodeName.toLowerCase(),s=e("<"+i+">",t.document[0]).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===i?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(s)}):"img"===i&&s.attr("src",t.currentItem.attr("src")),n||s.css("visibility","hidden"),s},update:function(e,s){(!n||i.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(i.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),i.placeholder.update(t,t.placeholder)},_contactContainers:function(i){var s,r,o,a,l,c,u,h,d,p,f=null,g=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(f&&e.contains(this.containers[s].element[0],f.element[0]))continue;f=this.containers[s],g=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",i,this._uiHash(this)),this.containers[s].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",i,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(o=1e4,a=null,p=f.floating||n(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],r=this.items.length-1;r>=0;r--)e.contains(this.containers[g].element[0],this.items[r].item[0])&&this.items[r].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[r].top,this.items[r].height))&&(h=this.items[r].item.offset()[l],d=!1,Math.abs(h-u)>Math.abs(h+this.items[r][c]-u)&&(d=!0,h+=this.items[r][c]),Math.abs(h-u)<o&&(o=Math.abs(h-u),a=this.items[r],this.direction=d?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;a?this._rearrange(i,a,null,!0):this._rearrange(i,null,this.containers[g].element,!0),this._trigger("change",i,this._uiHash()),this.containers[g]._trigger("change",i,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",i,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||e("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],n=e(s.containment).offset(),i="hidden"!==e(t).css("overflow"),this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*i}},_generatePosition:function(t){var n,i,s=this.options,r=t.pageX,o=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-s.grid[1]:n+s.grid[1]:n,i=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0],r=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-s.grid[0]:i+s.grid[0]:i)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,n,i){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!i)})},_clear:function(e,t){this.reverting=!1;var n,i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);
this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(e)}),define("text!ui_widgets/proceed.hbs",[],function(){return'\n<i class="icon-circle-blank"></i>\n<i class="icon-arrow-right"></i>'}),define("ui_widgets/proceed",["jquery","backbone","text!./proceed.hbs"],function(e,t,n){var i,s,r;return s="ui_widgets/proceed",r="body",i=t.View.extend({tagName:"button",className:"proceed",events:{click:"onClick"},initialize:function(){return _.bindAll(this,"show","hide")},render:function(){return this.$el.is(":visible")?void 0:(this.$el.html(n),e(r).append(this.el),this.delegateEvents(),this._animateIn(),this)},_animateIn:function(){var e=this;return this.$el.removeClass("bounceIn"),setTimeout(function(){return e.$el.addClass("bounceIn",1)})},onClick:function(){return this.trigger("click")},show:function(){return this.render()},hide:function(){return this.remove()}}),new i}),define("game/levels/rank_images/main",["backbone","Handlebars","text!./main.hbs","./rankable_images","entities/user_event","jqueryui/sortable","ui_widgets/proceed"],function(e,t,n,i,s,r,o){var a,l,c,u,h,d,p,f;return c="game/levels/rank_images",h="#RankingArea",f="#UnrankedArea",p=".connectedSortable",u='<li class="message">Rank from best to worst by clicking or dragging images.</li>',d="image_rank",l={started:"test_started",ranked:"image_ranked",unranked:"image_rank_cleared",dragged:"image_drag_start",completed:"test_completed"},a=e.View.extend({className:"rankImages",initialize:function(){return this.collection=new i(this.model.get("image_sequence")),_.bindAll(this,"onOver","onSortStart","onSortEnd","onUnrankedImageClick","onRankedImageClick","onProceedClick"),this.listenTo(this.collection,"change:rank",this.onRankChange),this.listenToOnce(o,"click",this.onProceedClick),this.render(),this._trackStart()},render:function(){var e=this;return this.$el.html(n),this.collection.each(function(t){return e.$(f).append(t.view.render().el)}),this.$msg=$(u),this._checkOnMsg(),this.$(p).sortable({placeholder:"rankableImage placeholder",connectWith:p,cancel:"."+this.$msg.prop("class"),over:this.onOver,start:this.onSortStart,stop:this.onSortEnd}),this.$(p).disableSelection(),this.$(f).on("click",".rankableImage",this.onUnrankedImageClick),this.$(h).on("click",".rankableImage",this.onRankedImageClick),this},_checkOnMsg:function(){return this.$(h).children().length?this._hideMsg():this._showMsg()},_showMsg:function(){return this.$(h).append(this.$msg)},_hideMsg:function(){return this.$msg.remove()},_userTasksFinished:function(){return o.show()},_userTasksUnfinished:function(){return o.hide()},_checkOnRanks:function(){var e;return this.collection.each(function(e){return e.view.$el.parent(h).length?e.set({rank:e.view.$el.index()+1}):e.set({rank:e.defaults.rank})}),e=this.collection.filter(function(e){return e.get("rank")}),e.length===this.collection.length?this._userTasksFinished():this._userTasksUnfinished()},onUnrankedImageClick:function(e){return this.$(h).append(e.currentTarget),this._checkOnMsg(),this._checkOnRanks()},onRankedImageClick:function(e){return this.$(f).append(e.currentTarget),this._checkOnMsg(),this._checkOnRanks()},onProceedClick:function(){return this._trackEnd(),this.options.assessment.nextStage(),o.hide()},onOver:function(){return this._checkOnMsg()},onSortStart:function(e,t){var n;return n=$(e.currentTarget).find("img").data("id"),this._trackDragged(n),t.helper.appendTo("body")},onSortEnd:function(){return this._checkOnRanks()},onRankChange:function(e,t){return-1===t?this._trackRankCleared(e.attributes.image_id,e.previous("rank")):this._trackRanked(e.attributes.image_id,t)},_trackUserEvent:function(e){var t,n;return t={game_id:this.options.assessment.get("id"),module:d,stage:this.options.stageNo},n=new s,n.send(_.extend(t,e))},_trackStart:function(){return this._trackUserEvent({event_desc:l.started,image_sequence:this.collection.toJSON()})},_trackRanked:function(e,t){return this._trackUserEvent({image_no:e,rank:t,event_desc:l.ranked})},_trackRankCleared:function(e,t){return this._trackUserEvent({image_no:e,rank:t,event_desc:l.unranked})},_trackDragged:function(e){return this._trackUserEvent({image_no:e,event_desc:l.dragged})},_trackEnd:function(){return this._trackUserEvent({event_desc:l.completed})}})}),define("game/levels/rank_images",["game/levels/rank_images/main"],function(e){return e}),define("entities/circles",["backbone"],function(e){var t,n,i,s;return s="game/levels/circle_proximity/circles Model",n=e.Model.extend({maxSize:4,sizeToScale:[.4,.7,1,1.3,1.6],sizeToClass:["size1","size2","size3","size4","size5"],defaults:{trait1:"",trait2:"",abbreviation:"",size:2,selfProximityPx:null,selfProximityRank:null,selfOverlapPx:null,selfOverlapRatio:null,image:null,userChangedSize:!1,userChangedPos:!1,width:null,top:0,left:0,pos:{x:0,y:0}},initialize:function(){return this._calcAbbreviation(),this.set("size",2),this.on("change:size",this.onChangeSize),this.on("change:pos",this.onChangePos)},_calcAbbreviation:function(){var e,t,n;return t=this.get("trait1").charAt(0),n=this.get("trait2").charAt(0),e=""+t+"<em>/</em>"+n,this.set("abbreviation",e)},onChangeSize:function(){return this.set("userChangedSize",!0)},onChangePos:function(){return this.set("userChangedPos",!0)},getScale:function(){return this.sizeToScale[this.get("size")]}}),i="game/levels/circle_proximity/circles Collection",t=e.Collection.extend({model:n})}),define("text!game/levels/circle_size/instructions.hbs",[],function(){return"<p>\n    Here are a number of psychological traits that may or may not describe you.\n</p>\n<p>\n    Simply collapse or expand each circle to indicate how well the trait describes you.\n</p>\n<p>\n    You must change the size of all circles.\n</p>"}),define("game/levels/circle_size/circle_view",["backbone"],function(e){var t,n;return n="game/levels/circle_proximity/circle_view",t=e.View.extend({className:"circle",initialize:function(){return this.listenTo(this.model,"change:size",this.onChangeSize)},render:function(){return this.$el.html(this.model.get("abbreviation")),this.setClassBySize(this.model.get("size")),this},onChangeSize:function(e,t){return this.setClassBySize(t)},removeSizeClass:function(){var e,t,n,i,s;for(i=this.model.sizeToClass,s=[],t=0,n=i.length;n>t;t++)e=i[t],s.push(this.$el.removeClass(e));return s},setClassBySize:function(e){return this.removeSizeClass(),this.$el.addClass(this.model.sizeToClass[e])}})}),define("text!game/levels/circle_size/sizey_view.hbs",[],function(){return'\n<div class="slider"></div>\n\n<label>\n    {{trait1}}<br/>\n    {{trait2}}\n</label>'}),define("jqueryui/slider",["jquery","./core","./mouse","./widget"],function(e){!function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,n,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),r="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];for(n=i.values&&i.values.length||1,s.length>n&&(s.slice(n).remove(),s=s.slice(0,n)),t=s.length;n>t;t++)o.push(r);this.handles=s.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,n="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),n="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(n+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):this.range=e([])},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,i,s,r,o,a,l,c,u=this,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(i-u.values(t));(s>n||s===n&&(t===u._lastChangedValue||u.values(t)===h.min))&&(s=n,r=e(this),o=t)}),a=this._start(t,o),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,r.addClass("ui-state-active").focus(),l=r.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-r.width()/2,top:t.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,i),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,i,s,r;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=n/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),s=this._valueMax()-this._valueMin(),r=this._valueMin()+i*s,this._trimAlignValue(r)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i,s,r;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(s=this.values(),s[t]=n,r=this._trigger("slide",e,{handle:this.handles[t],value:n,values:s}),i=this.values(t?0:1),r!==!1&&this.values(t,n,!0))):n!==this.value()&&(r=this._trigger("slide",e,{handle:this.handles[t],value:n}),r!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var i,s,r;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,s=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,s=0;switch("range"===t&&this.options.range===!0&&("min"===n?(this.options.value=this._values(0),this.options.values=null):"max"===n&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;s>i;i+=1)this._change(null,i);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(n=this.options.values.slice(),i=0;i<n.length;i+=1)n[i]=this._trimAlignValue(n[i]);return n}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,i=e-n;return 2*Math.abs(n)>=t&&(i+=n>0?t:-t),parseFloat(i.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,s,r,o=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){n=100*((l.values(i)-l._valueMin())/(l._valueMax()-l._valueMin())),u["horizontal"===l.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===i&&l.range.stop(1,1)[c?"animate":"css"]({left:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:a.animate})):(0===i&&l.range.stop(1,1)[c?"animate":"css"]({bottom:n+"%"},a.animate),1===i&&l.range[c?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:a.animate}))),t=n}):(i=this.value(),s=this._valueMin(),r=this._valueMax(),n=r!==s?100*((i-s)/(r-s)):0,u["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:n+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:n+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(n){var i,s,r,o,a=e(n.target).data("ui-slider-handle-index");switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(n.target).addClass("ui-state-active"),i=this._start(n,a),i===!1))return}switch(o=this.options.step,s=r=this.options.values&&this.options.values.length?this.values(a):this.value(),n.keyCode){case e.ui.keyCode.HOME:r=this._valueMin();break;case e.ui.keyCode.END:r=this._valueMax();break;case e.ui.keyCode.PAGE_UP:r=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:r=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;r=this._trimAlignValue(s+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;r=this._trimAlignValue(s-o)}this._slide(n,a,r)},click:function(e){e.preventDefault()},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})}(e)}),define("game/levels/circle_size/sizey_view",["backbone","Handlebars","./circle_view","text!./sizey_view.hbs","jqueryui/slider"],function(e,t,n,i){var s,r,o,a;return o="game/levels/circle_proximity/sizey_view",a=".slider",r=".circle",s=e.View.extend({className:"sizey",tmpl:t.compile(i),initialize:function(){return _.bindAll(this,"onSlide"),this.circle=new n({model:this.model})},render:function(){return this.$el.html(this.circle.render().el),this.$el.append(this.tmpl(this.model.attributes)),this.$el.find(a).slider({value:this.model.get("size"),max:this.model.maxSize,slide:this.onSlide}),this},_setWidthBySize:function(e){return this.model.set({width:this.model.sizeToScale[e]*this.$(r).width()})},onSlide:function(e,t){return this.model.set({size:t.value}),this._setWidthBySize(t.value)},close:function(){return this.model.get("width")||this._setWidthBySize(this.model.get("size")),this.remove(),this}})}),define("game/levels/circle_size/main",["underscore","backbone","entities/circles","text!./instructions.hbs","./sizey_view","composite_views/perch","ui_widgets/proceed"],function(e,t,n,i,s,r,o){var a,l,c,u;return c="game/levels/circle_size",u=0,l={resized:"circle_resized"},a=t.View.extend({className:"circleSize",initialize:function(){return this.listenTo(this.collection,"change:userChangedSize",this.onChangeUserChangedSize),this.listenTo(this.collection,"change:size",this.onChangeSize),this.listenToOnce(o,"click",this._close),e.bindAll(this,"render"),r.show({content:i,btn1Text:"I'm Ready",btn1Callback:this.render,mustUseButton:!0,supressTracking:!0})},render:function(){var e=this;return this.collection.each(function(t){return t.view=new s({model:t}),e.$el.append(t.view.render().el)}),this},_checkDone:function(){var e;return e=this.collection.filter(function(e){return e.get("userChangedSize")}),e.length>=this.collection.length-u?!0:void 0},_close:function(){return this.collection.each(function(e){return e.view.close()}),o.hide(),this.trigger("done"),this.remove()},onChangeSize:function(e,t){var n;return null!=(n=this.options.runner)?"function"==typeof n.track?n.track({event_desc:l.resized,circle_no:e.collection.indexOf(e),new_size:t}):void 0:void 0},onChangeUserChangedSize:function(){return this._checkDone()?o.show():void 0}})}),define("game/levels/circle_size",["game/levels/circle_size/main"],function(e){return e}),define("text!game/levels/circle_proximity/instructions.hbs",[],function(){return"\n<p>\n    Next place each of the circles in position to the new circle representing you.\n</p>\n<p>\n    Place each trait anywhere on the screen so that it best represents how important that trait is to you.\n</p>\n"}),define("text!game/levels/circle_proximity/self.hbs",[],function(){return'\n<div class="line"></div>\n<i class="icon-user"></i>\n<div class="borderPatrol"></div>\n\n'}),define("game/levels/circle_proximity/self_view",["backbone","text!./self.hbs"],function(e,t){var n,i,s;return n=e.Model.extend({defaults:{pxSize:200,size:200,top:200,left:0}}),s="game/levels/circle_proximity/self_view",i=e.View.extend({id:"SelfCircle",className:"self",initialize:function(){return this.model=new n},render:function(){return this.$el.html(t),this},_setCssStyling:function(e){return this.$el.css({top:e.top,left:e.left})},_calculateSelfCenter:function(){return this._center={x:this.$el.parent().width()/2,y:this.model.get("top")+this.getSelfRadius()},this._center},getSelfCenter:function(){return this._center||this._calculateSelfCenter()},getSelfRadius:function(){return this._radius||this.model.get("pxSize")/2},position:function(){var e;return e=this.getSelfCenter().x-this.model.get("pxSize")/2,this.model.set({left:e}),this._setCssStyling(this.model.attributes),this}})}),define("text!game/levels/circle_proximity/proxy_view.hbs",[],function(){return'\n\n<div class="circle">\n    {{{abbreviation}}}\n</div>\n\n<label>\n    <span class="inner">\n        <b class="fluff arrowTop"></b>\n        {{trait1}}<br/>\n        {{trait2}}\n    </span>\n</label>\n\n'}),define("jqueryui/draggable",["jquery","./core","./mouse","./widget"],function(e){!function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,s=this.options;return s.containment?"window"===s.containment?(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):"document"===s.containment?(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top],void 0):s.containment.constructor===Array?(this.containment=s.containment,void 0):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),n=e(s.containment),i=n[0],i&&(t="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n),void 0):(this.containment=null,void 0)},_convertPositionTo:function(t,n){n||(n=this.position);var i="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*i}},_generatePosition:function(t){var n,i,s,r,o=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=n?s-this.offset.click.top>=n[1]||s-this.offset.click.top>n[3]?s:s-this.offset.click.top>=n[1]?s-o.grid[1]:s+o.grid[1]:s,r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?r-this.offset.click.left>=n[0]||r-this.offset.click.left>n[2]?r:r-this.offset.click.left>=n[0]?r-o.grid[0]:r+o.grid[0]:r)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var i=e(this).data("ui-draggable"),s=i.options,r=e.extend({},n,{item:i.element});i.sortables=[],e(s.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,r))
})},stop:function(t,n){var i=e(this).data("ui-draggable"),s=e.extend({},n,{item:i.element});e.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,n){var i=e(this).data("ui-draggable"),s=this;e.each(i.sortables,function(){var r=!1,o=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(r=!1),r})),r?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",t),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",t),i.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var i=e(n.helper),s=e(this).data("ui-draggable").options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),i=n.options,s=!1;n.scrollParent[0]!==document&&"HTML"!==n.scrollParent[0].tagName?(i.axis&&"x"===i.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-n.overflowOffset.top<i.scrollSensitivity&&(n.scrollParent[0].scrollTop=s=n.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"===i.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-n.overflowOffset.left<i.scrollSensitivity&&(n.scrollParent[0].scrollLeft=s=n.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"===i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"===i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),i=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:i.top,left:i.left})})},drag:function(t,n){var i,s,r,o,a,l,c,u,h,d,p=e(this).data("ui-draggable"),f=p.options,g=f.snapTolerance,m=n.offset.left,v=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(h=p.snapElements.length-1;h>=0;h--)a=p.snapElements[h].left,l=a+p.snapElements[h].width,c=p.snapElements[h].top,u=c+p.snapElements[h].height,a-g>v||m>l+g||c-g>b||y>u+g||!e.contains(p.snapElements[h].item.ownerDocument,p.snapElements[h].item)?(p.snapElements[h].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(i=Math.abs(c-b)<=g,s=Math.abs(u-y)<=g,r=Math.abs(a-v)<=g,o=Math.abs(l-m)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),d=i||s||r||o,"outer"!==f.snapMode&&(i=Math.abs(c-y)<=g,s=Math.abs(u-b)<=g,r=Math.abs(a-m)<=g,o=Math.abs(l-v)<=g,i&&(n.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),s&&(n.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),r&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[h].snapping&&(i||s||r||o||d)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[h].item})),p.snapElements[h].snapping=i||s||r||o||d)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=this.data("ui-draggable").options,i=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});i.length&&(t=parseInt(e(i[0]).css("zIndex"),10)||0,e(i).each(function(n){e(this).css("zIndex",t+n)}),this.css("zIndex",t+i.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var i=e(n.helper),s=e(this).data("ui-draggable").options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n){var i=e(this).data("ui-draggable").options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}})}(e)}),define("game/levels/circle_proximity/proxy_view",["underscore","backbone","Handlebars","text!./proxy_view.hbs","jqueryui/draggable"],function(e,t,n,i){var s,r,o,a,l,c,u,h;return u="game/levels/circle_proximity/proxy_view",l=".circle",o="yay",h="showLabel",c=".ui-draggable",r={dragStart:"circle_start_move",dragStop:"circle_end_move"},a=function(e,t){var n;return n={x:e.x-t.x,y:e.y-t.y}},s=t.View.extend({className:"proxy "+h,tmpl:n.compile(i),initialize:function(){return e.bindAll(this,"onDragStart","onDrag","onDragStop")},render:function(){return this.$el.html(this.tmpl(this.model.attributes)),this.$(l).addClass(this.model.sizeToClass[this.model.attributes.size]),this._makeDraggable(),this},_makeDraggable:function(){return this.$el.draggable({handle:l,stack:c,start:this.onDragStart,drag:this.onDrag,stop:this.onDragStop})},_shimmerSelf:function(){var e,t=this;if(null!=(e=this.options.selfView)?e.$el:void 0)return this.options.selfView.$el.removeClass(o),setTimeout(function(){return t.options.selfView.$el.addClass(o,1)})},_showLine:function(){return null!=this.options.$line?this.options.$line.show():void 0},_maintainLine:function(e,t){var n,i,s,r,o;if(null!=this.options.$line)return r=this.coordToCenter({x:t.position.left,y:t.position.top}),s=this._calculateDistanceFromSelf(r),o=(s-200)/200,o>1&&(o=1),0>o&&(o=0),o=1-o,i=a(r,this.options.selfView.getSelfCenter()),n=180/Math.PI*Math.acos(i.y/s),i.x>0&&(n*=-1),this.options.$line.css({height:s,opacity:o,"-webkit-transform":"rotate("+n+"deg)","-moz-transform":"rotate("+n+"deg)","-o-transform":"rotate("+n+"deg)","-ms-transform":"rotate("+n+"deg)",transform:"rotate("+n+"deg)"})},_hideLine:function(){return null!=this.options.$line?this.options.$line.hide():void 0},_calculateDistanceFromSelf:function(e){var t,n,i;return i=this.options.selfView.getSelfCenter(),n=a(e,i),t=Math.sqrt(n.x*n.x+n.y*n.y)},_updateModelSelfOverlap:function(){var e,t,n,i,s;return s=this.options.selfView.getSelfRadius(),e=this.getCircleSize()/2,t=this.model.get("selfProximityPx"),s+e>t?(i=s+e-t,i>2*e&&(i=2*e)):i=null,n=i/(2*e),this.model.set({selfOverlapPx:i,selfOverlapRatio:n})},_updateModelPosition:function(e){var t;return t=this.coordToCenter({x:e.left,y:e.top}),this.model.set({pos:{x:t.x,y:t.y},left:e.left,top:e.top,selfProximityPx:Math.round(this._calculateDistanceFromSelf(t))}),this._updateModelSelfOverlap()},onChangePos:function(){},onDragStart:function(){var e;return this.$el.removeClass(h),this._showLine(),"function"==typeof(e=this.options).track?e.track({event_desc:r.dragStart,circle_no:this.model.collection.indexOf(this.model),circle:this.model.toJSON()}):void 0},onDrag:function(e,t){return this._maintainLine(e,t)},onDragStop:function(e,t){var n;return this._shimmerSelf(),this._hideLine(),this._updateModelPosition(t.position),"function"==typeof(n=this.options).track?n.track({event_desc:r.dragStop,circle_no:this.model.collection.indexOf(this.model),circle:this.model.toJSON()}):void 0},positionByCenter:function(e){var t;return t=this.centerToCoord(e),this.$el.css({left:Math.round(t.x),top:Math.round(t.y)})},getCircleSize:function(){return this._width=this._width||this.$(l).width(),this._width},coordToCenter:function(e){var t,n;return n=this.getCircleSize()/2,t={x:e.x+n,y:e.y+n}},centerToCoord:function(e){var t,n;return n=this.getCircleSize()/2,t={x:e.x-n,y:e.y-n}}})}),define("game/levels/circle_proximity/main",["underscore","backbone","entities/circles","text!./instructions.hbs","composite_views/perch","./self_view","./proxy_view","ui_widgets/proceed"],function(e,t,n,i,s,r,o,a){var l,c,u,h;return h="game/levels/circle_proximity",c={dragStart:"",dragStop:""},u=function(e){return e*Math.PI/180},l=t.View.extend({className:"circleProximity",initialize:function(){return this.listenTo(this.collection,"change:userChangedPos",this.onChangeUserChangedPos),this.listenToOnce(a,"click",this._close),s.show({content:i,btn1Text:"I'm Ready",btn1Callback:e.bind(this.render,this),mustUseButton:!0,supressTracking:!0})},render:function(){var e,t=this;return this.selfView=new r,this.$el.html(this.selfView.render().el),this.selfView.position(),this.$line=this.$(".line"),e=this.selfView.$el.width()/2,this.$line.css({left:e,top:e}),this.collection.each(function(e){var n;return e.view=new o({model:e,$line:t.$line,selfView:t.selfView,track:null!=(n=t.options.runner)?n.track:void 0}),t.$el.append(e.view.render().el)}),this._positionCirclesAround(this.selfView.getSelfCenter()),this},_positionCirclesAround:function(e){var t,n,i,s;return t=this.collection.length,s=360/t,n=s/2+270,i=250,this.collection.each(function(t){return t.view.positionByCenter({x:Math.cos(u(n))*i+e.x,y:Math.sin(u(n))*i+e.y}),n+=s})},_checkDone:function(){var e;return e=this.collection.filter(function(e){return e.get("userChangedPos")}),e.length===this.collection.length?!0:void 0},_close:function(){return this.collection.each(function(e){return e.view.remove()}),a.hide(),this.trigger("done"),this.remove()},onChangeUserChangedPos:function(){return this._checkDone()?a.show():void 0}})}),define("game/levels/circle_proximity",["game/levels/circle_proximity/main"],function(e){return e}),define("game/levels/circle_size_and_proximity",["jquery","underscore","backbone","Handlebars","entities/user_event","entities/circles","game/levels/circle_size","game/levels/circle_proximity"],function(e,t,n,i,s,r,o,a){var l,c,u,h;return u="game/levels/circle_size_and_proximity",h="circles_test",c={started:"test_started",startedSizing:"size_circles_started",startedProximity:"move_circles_started",completed:"test_completed"},l=n.View.extend({className:"circleSizeAndProximity",initialize:function(){return this.track({event_desc:c.started}),this.circlesCollection=new r(this.model.get("circles")),t.bindAll(this,"track")},render:function(){return this._showCircleSize(),this},_showCircleSize:function(){return this.curView=new o({collection:this.circlesCollection,runner:this}),this.$el.html(this.curView.el),this.track({event_desc:c.startedSizing}),this.circlesCollection=this.curView.collection,this.listenToOnce(this.curView,"done",this._showCircleProximity)},_showCircleProximity:function(){return this.curView=new a({collection:this.circlesCollection,runner:this}),this.$el.html(this.curView.el),this.track({event_desc:c.startedProximity,circles:this.circlesCollection.toJSON()}),this.listenToOnce(this.curView,"done",this.onTestDone)},onTestDone:function(){return this.remove(),this.track({event_desc:c.completed,circles:this.circlesCollection.toJSON(),self_coord:{top:this.curView.selfView.getSelfCenter().y-this.curView.selfView.getSelfRadius(),left:this.curView.selfView.getSelfCenter().x-this.curView.selfView.getSelfRadius(),size:2*this.curView.selfView.getSelfRadius()}}),this.options.assessment.nextStage()},track:function(e){var n,i;return n={game_id:this.options.assessment.get("id"),module:h,stage:this.options.stageNo},i=new s,i.send(t.extend(n,e))}})}),define("text!game/calculate_results.hbs",[],function(){return'\n<h1>Congratulations!</h1>\n<h3>You have completed the game.</h3>\n<p id="StatusMessage" class="muted">\n    Calculating Results...\n</p>\n\n<b class="holdPlease inline">\n    <i class="icon-repeat icon-4x"></i>\n</b>\n\n'}),define("game/calculate_results",["backbone","Handlebars","text!./calculate_results.hbs","core","composite_views/perch"],function(e,t,n,i,s){var r,o,a;return o="game/calculate_results",a="#StatusMessage",r=e.View.extend({className:"calculateResults",initialize:function(){return this.listenTo(this.model,"change",this.onChange),this.listenTo(this.model,"error",this.onError),i.analytics.track(this.className,"Starting game results calculation")},render:function(){return this.$el.html(n),this},_updateStatusMsg:function(e){return e.attributes.status.message?this.$(a).text(e.attributes.status.message):void 0},_showResults:function(){return i.user.isGuest()?i.router.navigate("guestSignup",{trigger:!0}):i.router.navigate("dashboard",{trigger:!0})},_gotGameResults:function(){return i.analytics.track(this.className,"Successfully calculated game results"),this._showResults()},onError:function(e,t){return i.analytics.track(this.className,"Error Getting game results"),s.show({title:"Doh. Pretty Srs Error.",msg:t,btn1Text:"Ok",onClose:function(){return i.router.navigate("home",{trigger:!0})},mustUseButton:!0})},onChange:function(e){return this._updateStatusMsg(e),e.attributes.status.state===e.STATES.done?this._gotGameResults():void 0}})}),define("pages/play_game",["backbone","Handlebars","core","composite_views/perch","entities/levels","entities/results_calculator","ui_widgets/steps_remaining","game/levels/reaction_time_disc","game/levels/rank_images","game/levels/circle_size_and_proximity","game/calculate_results"],function(Backbone,Handlebars,app,perch,LevelsCollection,Results,StepsRemainingView,ReactionTime,ImageRank,CirclesTest,CalculateResultsView){var Me,_defaultGame,_me,_stepsRemainingContainer,_views;return _me="pages/playGame",_defaultGame=1,_stepsRemainingContainer="#HeaderRegion",_views={ReactionTime:"ReactionTime",ImageRank:"ImageRank",CirclesTest:"CirclesTest"},Me=Backbone.View.extend({className:"playGamePage",initialize:function(){return this.curGame=app.user.createGame(),this._register_events()},_register_events:function(){return this.listenTo(this.curGame,"error",this._curGameErr),this.listenTo(this.curGame,"sync",this._onGameSync),this.listenTo(this.curGame,"change:stage_completed",this._onStageChanged)},_showWelcome:function(e){return this._trackLevels(),perch.show({title:"Welcome",msg:e.attributes.definition.instructions,btn1Text:"Start",onClose:_.bind(this.curGame.nextStage,this.curGame),mustUseButton:!0})},_onGameSync:function(){},_onStageChanged:function(e){var t,n,i;return t=e.attributes.stage_completed,n=e.attributes.stages.length,null!=(i=this.levels)&&i.setComplete(t),-1===t?this._showWelcome(e):n>t?this._showLevel(t):t===n?this._calculateResults(e):console.log(""+_me+"._curGameSync: unusual curStage: "+t)},_curGameErr:function(){return console.log(""+_me+"._curGameErr()"),console.error(""+_me+": Error on the curGame model")},_trackLevels:function(){return this.levels=new LevelsCollection(this.curGame.get("stages")),this.stepsRemaining=new StepsRemainingView({collection:this.levels}),$(_stepsRemainingContainer).append(this.stepsRemaining.render().el)},_showLevel:function(stageId){var ViewClass,curStage,viewClassString,_ref;return curStage=this.curGame.get("stages")[stageId],viewClassString=_views[curStage.view_name],app.analytics.track(this.className,"game/1/level/"+stageId,"levelName",viewClassString),ViewClass=eval(viewClassString),null!=(_ref=this.curLevel)&&_ref.remove(),this.curLevel=new ViewClass({model:new Backbone.Model(curStage),assessment:this.curGame,stageNo:stageId}),this.$el.html(this.curLevel.render().el)},_calculateResults:function(e){return this.curLevel=new CalculateResultsView({model:new Results({game_id:e.get("id")})}),this.$el.html(this.curLevel.render().el)}})}),define("text!pages/team.hbs",[],function(){return"\n<h2>Team Page</h2>\n<p>Sample Content.</p>\n"}),define("pages/team",["backbone","Handlebars","text!./team.hbs"],function(e,t,n){var i;return i=e.View.extend({className:"teamPage",render:function(){return this.$el.html(n),this}})}),define("text!pages/dashboard/personality.hbs",[],function(){return'\n\n<div id="WidgetMaster" class="widgetMaster">\n\n</div>\n\n\n\n\n'}),define("text!dashboard/widget-coreResults.hbs",[],function(){return'\n\n<div class="widget">\n\n    <p class="hero">\n        {{#if logo_url}}\n            <img class="personalityBadge" src="/images/badges/{{logo_url}}" alt="{{name}}">\n        {{/if}}\n        {{one_liner}}\n    </p>\n    <ul>\n        {{#each bullet_description}}\n            <li>\n                <i class="icon-bookmark icon-2x"></i>\n                {{{ this }}}\n            </li>\n        {{/each}}\n    </ul>\n</div>\n\n\n'}),define("dashboard/widget-coreResults",["backbone","Handlebars","text!./widget-coreResults.hbs","composite_views/perch","markdown"],function(e,t,n,i,s){var r,o;return o=".widget",r=e.View.extend({tmpl:t.compile(n),className:"holder coreResults doubleWide tall",tagName:"section",events:{click:"onClick"},initialize:function(){return this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(this.tmpl(this.model.attributes)),this},onClick:function(){var e;return e=s.toHTML(this.model.attributes.description),i.show({large:!0,title:this.model.attributes.name,msg:e,btn1Text:"Ok"})}})}),define("text!dashboard/widget-chart.hbs",[],function(){return'\n\n<div class="widget">\n    <h3>{{name}}</h3>\n    <canvas width="130" height="130"></canvas>\n    <ul class="key">\n    {{#each chartValues}}\n        <li title="{{value}}">\n            <i class="swatch" style="background-color:{{color}}"></i>\n            {{label}}\n        </li>\n    {{/each}}\n    </ul>\n</div>\n\n\n\n\n\n'}),define("dashboard/chartColors",[],function(){return["rgb(24,143,244)","rgb(255,210,0)","rgb(248,109,24)","#e43e45","rgb(127,76,174)","rgb(48,101,199)","#35a589"]});var Chart=function(e){function t(e,t,n){return e=r((e-t.graphMin)/(t.steps*t.stepValue),1,0),n*t.steps*e}function n(e,t,n,i){function s(){l+=o;var c=e.animation?r(a(l),null,0):1;i.clearRect(0,0,u,h),e.scaleOverlay?(n(c),t()):(t(),n(c)),1>=l?y(s):"function"==typeof e.onAnimationComplete&&e.onAnimationComplete()}var o=e.animation?1/r(e.animationSteps,Number.MAX_VALUE,1):1,a=c[e.animationEasing],l=e.animation?0:1;"function"!=typeof t&&(t=function(){}),y(s)}function i(e,t,n,i,r,o){var a;for(e=Math.floor(Math.log(i-r)/Math.LN10),r=Math.floor(r/(1*Math.pow(10,e)))*Math.pow(10,e),i=Math.ceil(i/(1*Math.pow(10,e)))*Math.pow(10,e)-r,e=Math.pow(10,e),a=Math.round(i/e);n>a||a>t;)e=n>a?e/2:2*e,a=Math.round(i/e);return t=[],s(o,t,a,r,e),{steps:a,stepValue:e,graphMin:r,labels:t}}function s(e,t,n,i,s){if(e)for(var r=1;n+1>r;r++)t.push(a(e,{value:(i+s*r).toFixed(0!=s%1?s.toString().split(".")[1].length:0)}))}function r(e,t,n){return!isNaN(parseFloat(t))&&isFinite(t)&&e>t?t:!isNaN(parseFloat(n))&&isFinite(n)&&n>e?n:e}function o(e,t){var n,i={};for(n in e)i[n]=e[n];for(n in t)i[n]=t[n];return i}function a(e,t){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):b[e]=b[e]||a(document.getElementById(e).innerHTML);return t?n(t):n}var l=this,c={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return 1>(e/=.5)?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return 1>(e/=.5)?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return 1>(e/=.5)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return 1>(e/=.5)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0==e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1==e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0==e?0:1==e?1:1>(e/=.5)?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return 1>(e/=.5)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,i=1;return 0==e?0:1==(e/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/n)))},easeOutElastic:function(e){var t=1.70158,n=0,i=1;return 0==e?0:1==(e/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin(2*(1*e-t)*Math.PI/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,i=1;return 0==e?0:2==(e/=.5)?1:(n||(n=.3*1.5),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),1>e?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/n):.5*i*Math.pow(2,-10*(e-=1))*Math.sin(2*(1*e-t)*Math.PI/n)+1)},easeInBack:function(e){return 1*(e/=1)*e*(2.70158*e-1.70158)},easeOutBack:function(e){return 1*((e=e/1-1)*e*(2.70158*e+1.70158)+1)},easeInOutBack:function(e){var t=1.70158;return 1>(e/=.5)?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-c.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*c.easeInBounce(2*e):.5*c.easeOutBounce(2*e-1)+.5}},u=e.canvas.width,h=e.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=u+"px",e.canvas.style.height=h+"px",e.canvas.height=h*window.devicePixelRatio,e.canvas.width=u*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(t,n){l.PolarArea.defaults={scaleOverlay:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var i=n?o(l.PolarArea.defaults,n):l.PolarArea.defaults;return new d(t,i,e)},this.Radar=function(t,n){l.Radar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var i=n?o(l.Radar.defaults,n):l.Radar.defaults;return new p(t,i,e)},this.Pie=function(t,n){l.Pie.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var i=n?o(l.Pie.defaults,n):l.Pie.defaults;return new f(t,i,e)},this.Doughnut=function(t,n){l.Doughnut.defaults={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null};var i=n?o(l.Doughnut.defaults,n):l.Doughnut.defaults;return new g(t,i,e)},this.Line=function(t,n){l.Line.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var i=n?o(l.Line.defaults,n):l.Line.defaults;return new m(t,i,e)},this.Bar=function(t,n){l.Bar.defaults={scaleOverlay:!1,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null};var i=n?o(l.Bar.defaults,n):l.Bar.defaults;return new v(t,i,e)};var d=function(e,r,o){var a,l,c,d,p,f,g,m,v;for(p=Math.min.apply(Math,[u,h])/2,p-=Math.max.apply(Math,[.5*r.scaleFontSize,.5*r.scaleLineWidth]),d=2*r.scaleFontSize,r.scaleShowLabelBackdrop&&(d+=2*r.scaleBackdropPaddingY,p-=1.5*r.scaleBackdropPaddingY),m=p,d=d?d:5,a=Number.MIN_VALUE,l=Number.MAX_VALUE,c=0;c<e.length;c++)e[c].value>a&&(a=e[c].value),e[c].value<l&&(l=e[c].value);c=Math.floor(m/(.66*d)),d=Math.floor(.5*(m/d)),v=r.scaleShowLabels?r.scaleLabel:null,r.scaleOverride?(g={steps:r.scaleSteps,stepValue:r.scaleStepWidth,graphMin:r.scaleStartValue,labels:[]},s(v,g.labels,g.steps,r.scaleStartValue,r.scaleStepWidth)):g=i(m,c,d,a,l,v),f=p/g.steps,n(r,function(){for(var e=0;e<g.steps;e++)if(r.scaleShowLine&&(o.beginPath(),o.arc(u/2,h/2,f*(e+1),0,2*Math.PI,!0),o.strokeStyle=r.scaleLineColor,o.lineWidth=r.scaleLineWidth,o.stroke()),r.scaleShowLabels){o.textAlign="center",o.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily;var t=g.labels[e];if(r.scaleShowLabelBackdrop){var n=o.measureText(t).width;o.fillStyle=r.scaleBackdropColor,o.beginPath(),o.rect(Math.round(u/2-n/2-r.scaleBackdropPaddingX),Math.round(h/2-f*(e+1)-.5*r.scaleFontSize-r.scaleBackdropPaddingY),Math.round(n+2*r.scaleBackdropPaddingX),Math.round(r.scaleFontSize+2*r.scaleBackdropPaddingY)),o.fill()}o.textBaseline="middle",o.fillStyle=r.scaleFontColor,o.fillText(t,u/2,h/2-f*(e+1))}},function(n){var i=-Math.PI/2,s=2*Math.PI/e.length,a=1,l=1;for(r.animation&&(r.animateScale&&(a=n),r.animateRotate&&(l=n)),n=0;n<e.length;n++)o.beginPath(),o.arc(u/2,h/2,a*t(e[n].value,g,f),i,i+l*s,!1),o.lineTo(u/2,h/2),o.closePath(),o.fillStyle=e[n].color,o.fill(),r.segmentShowStroke&&(o.strokeStyle=r.segmentStrokeColor,o.lineWidth=r.segmentStrokeWidth,o.stroke()),i+=l*s},o)},p=function(e,o,a){var l,c,d,p,f,g,m,v,y;for(e.labels||(e.labels=[]),f=Math.min.apply(Math,[u,h])/2,p=2*o.scaleFontSize,l=v=0;l<e.labels.length;l++)a.font=o.pointLabelFontStyle+" "+o.pointLabelFontSize+"px "+o.pointLabelFontFamily,c=a.measureText(e.labels[l]).width,c>v&&(v=c);for(f-=Math.max.apply(Math,[v,1.5*(o.pointLabelFontSize/2)]),f-=o.pointLabelFontSize,v=f=r(f,null,0),p=p?p:5,l=Number.MIN_VALUE,c=Number.MAX_VALUE,d=0;d<e.datasets.length;d++)for(y=0;y<e.datasets[d].data.length;y++)e.datasets[d].data[y]>l&&(l=e.datasets[d].data[y]),e.datasets[d].data[y]<c&&(c=e.datasets[d].data[y]);d=Math.floor(v/(.66*p)),p=Math.floor(.5*(v/p)),y=o.scaleShowLabels?o.scaleLabel:null,o.scaleOverride?(m={steps:o.scaleSteps,stepValue:o.scaleStepWidth,graphMin:o.scaleStartValue,labels:[]},s(y,m.labels,m.steps,o.scaleStartValue,o.scaleStepWidth)):m=i(v,d,p,l,c,y),g=f/m.steps,n(o,function(){var t=2*Math.PI/e.datasets[0].data.length;if(a.save(),a.translate(u/2,h/2),o.angleShowLineOut){a.strokeStyle=o.angleLineColor,a.lineWidth=o.angleLineWidth;for(var n=0;n<e.datasets[0].data.length;n++)a.rotate(t),a.beginPath(),a.moveTo(0,0),a.lineTo(0,-f),a.stroke()}for(n=0;n<m.steps;n++){if(a.beginPath(),o.scaleShowLine){a.strokeStyle=o.scaleLineColor,a.lineWidth=o.scaleLineWidth,a.moveTo(0,-g*(n+1));for(var i=0;i<e.datasets[0].data.length;i++)a.rotate(t),a.lineTo(0,-g*(n+1));a.closePath(),a.stroke()}o.scaleShowLabels&&(a.textAlign="center",a.font=o.scaleFontStyle+" "+o.scaleFontSize+"px "+o.scaleFontFamily,a.textBaseline="middle",o.scaleShowLabelBackdrop&&(i=a.measureText(m.labels[n]).width,a.fillStyle=o.scaleBackdropColor,a.beginPath(),a.rect(Math.round(-i/2-o.scaleBackdropPaddingX),Math.round(-g*(n+1)-.5*o.scaleFontSize-o.scaleBackdropPaddingY),Math.round(i+2*o.scaleBackdropPaddingX),Math.round(o.scaleFontSize+2*o.scaleBackdropPaddingY)),a.fill()),a.fillStyle=o.scaleFontColor,a.fillText(m.labels[n],0,-g*(n+1)))
}for(n=0;n<e.labels.length;n++){a.font=o.pointLabelFontStyle+" "+o.pointLabelFontSize+"px "+o.pointLabelFontFamily,a.fillStyle=o.pointLabelFontColor;var i=Math.sin(t*n)*(f+o.pointLabelFontSize),s=Math.cos(t*n)*(f+o.pointLabelFontSize);a.textAlign=t*n==Math.PI||0==t*n?"center":t*n>Math.PI?"right":"left",a.textBaseline="middle",a.fillText(e.labels[n],i,-s)}a.restore()},function(n){var i=2*Math.PI/e.datasets[0].data.length;a.save(),a.translate(u/2,h/2);for(var s=0;s<e.datasets.length;s++){a.beginPath(),a.moveTo(0,-1*n*t(e.datasets[s].data[0],m,g));for(var r=1;r<e.datasets[s].data.length;r++)a.rotate(i),a.lineTo(0,-1*n*t(e.datasets[s].data[r],m,g));if(a.closePath(),a.fillStyle=e.datasets[s].fillColor,a.strokeStyle=e.datasets[s].strokeColor,a.lineWidth=o.datasetStrokeWidth,a.fill(),a.stroke(),o.pointDot)for(a.fillStyle=e.datasets[s].pointColor,a.strokeStyle=e.datasets[s].pointStrokeColor,a.lineWidth=o.pointDotStrokeWidth,r=0;r<e.datasets[s].data.length;r++)a.rotate(i),a.beginPath(),a.arc(0,-1*n*t(e.datasets[s].data[r],m,g),o.pointDotRadius,2*Math.PI,!1),a.fill(),a.stroke();a.rotate(i)}a.restore()},a)},f=function(e,t,i){for(var s=0,r=Math.min.apply(Math,[h/2,u/2])-5,o=0;o<e.length;o++)s+=e[o].value;n(t,null,function(n){var o=-Math.PI/2,a=1,l=1;for(t.animation&&(t.animateScale&&(a=n),t.animateRotate&&(l=n)),n=0;n<e.length;n++){var c=2*(l*e[n].value/s)*Math.PI;i.beginPath(),i.arc(u/2,h/2,a*r,o,o+c),i.lineTo(u/2,h/2),i.closePath(),i.fillStyle=e[n].color,i.fill(),t.segmentShowStroke&&(i.lineWidth=t.segmentStrokeWidth,i.strokeStyle=t.segmentStrokeColor,i.stroke()),o+=c}},i)},g=function(e,t,i){for(var s=0,r=Math.min.apply(Math,[h/2,u/2])-5,o=r*(t.percentageInnerCutout/100),a=0;a<e.length;a++)s+=e[a].value;n(t,null,function(n){var a=-Math.PI/2,l=1,c=1;for(t.animation&&(t.animateScale&&(l=n),t.animateRotate&&(c=n)),n=0;n<e.length;n++){var d=2*(c*e[n].value/s)*Math.PI;i.beginPath(),i.arc(u/2,h/2,l*r,a,a+d,!1),i.arc(u/2,h/2,l*o,a+d,a,!0),i.closePath(),i.fillStyle=e[n].color,i.fill(),t.segmentShowStroke&&(i.lineWidth=t.segmentStrokeWidth,i.strokeStyle=t.segmentStrokeColor,i.stroke()),a+=d}},i)},m=function(e,r,o){var a,l,c,d,p,f,g,m,v,y,b,_,w,x=0;for(p=h,o.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily,y=1,d=0;d<e.labels.length;d++)a=o.measureText(e.labels[d]).width,y=a>y?a:y;for(u/e.labels.length<y?(x=45,u/e.labels.length<Math.cos(x)*y?(x=90,p-=y):p-=Math.sin(x)*y):p-=r.scaleFontSize,d=r.scaleFontSize,p=p-5-d,a=Number.MIN_VALUE,l=Number.MAX_VALUE,c=0;c<e.datasets.length;c++)for(m=0;m<e.datasets[c].data.length;m++)e.datasets[c].data[m]>a&&(a=e.datasets[c].data[m]),e.datasets[c].data[m]<l&&(l=e.datasets[c].data[m]);if(c=Math.floor(p/(.66*d)),d=Math.floor(.5*(p/d)),m=r.scaleShowLabels?r.scaleLabel:"",r.scaleOverride?(g={steps:r.scaleSteps,stepValue:r.scaleStepWidth,graphMin:r.scaleStartValue,labels:[]},s(m,g.labels,g.steps,r.scaleStartValue,r.scaleStepWidth)):g=i(p,c,d,a,l,m),f=Math.floor(p/g.steps),d=1,r.scaleShowLabels){for(o.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily,a=0;a<g.labels.length;a++)l=o.measureText(g.labels[a]).width,d=l>d?l:d;d+=10}b=u-d-y,v=Math.floor(b/(e.labels.length-1)),_=u-y/2-b,w=p+r.scaleFontSize/2,n(r,function(){o.lineWidth=r.scaleLineWidth,o.strokeStyle=r.scaleLineColor,o.beginPath(),o.moveTo(u-y/2+5,w),o.lineTo(u-y/2-b-5,w),o.stroke(),x>0?(o.save(),o.textAlign="right"):o.textAlign="center",o.fillStyle=r.scaleFontColor;for(var t=0;t<e.labels.length;t++)o.save(),x>0?(o.translate(_+t*v,w+r.scaleFontSize),o.rotate(-(x*(Math.PI/180))),o.fillText(e.labels[t],0,0),o.restore()):o.fillText(e.labels[t],_+t*v,w+r.scaleFontSize+3),o.beginPath(),o.moveTo(_+t*v,w+3),r.scaleShowGridLines&&t>0?(o.lineWidth=r.scaleGridLineWidth,o.strokeStyle=r.scaleGridLineColor,o.lineTo(_+t*v,5)):o.lineTo(_+t*v,w+3),o.stroke();for(o.lineWidth=r.scaleLineWidth,o.strokeStyle=r.scaleLineColor,o.beginPath(),o.moveTo(_,w+5),o.lineTo(_,5),o.stroke(),o.textAlign="right",o.textBaseline="middle",t=0;t<g.steps;t++)o.beginPath(),o.moveTo(_-3,w-(t+1)*f),r.scaleShowGridLines?(o.lineWidth=r.scaleGridLineWidth,o.strokeStyle=r.scaleGridLineColor,o.lineTo(_+b+5,w-(t+1)*f)):o.lineTo(_-.5,w-(t+1)*f),o.stroke(),r.scaleShowLabels&&o.fillText(g.labels[t],_-8,w-(t+1)*f)},function(n){function i(i,s){return w-n*t(e.datasets[i].data[s],g,f)}for(var s=0;s<e.datasets.length;s++){o.strokeStyle=e.datasets[s].strokeColor,o.lineWidth=r.datasetStrokeWidth,o.beginPath(),o.moveTo(_,w-n*t(e.datasets[s].data[0],g,f));for(var a=1;a<e.datasets[s].data.length;a++)r.bezierCurve?o.bezierCurveTo(_+v*(a-.5),i(s,a-1),_+v*(a-.5),i(s,a),_+v*a,i(s,a)):o.lineTo(_+v*a,i(s,a));if(o.stroke(),r.datasetFill?(o.lineTo(_+v*(e.datasets[s].data.length-1),w),o.lineTo(_,w),o.closePath(),o.fillStyle=e.datasets[s].fillColor,o.fill()):o.closePath(),r.pointDot)for(o.fillStyle=e.datasets[s].pointColor,o.strokeStyle=e.datasets[s].pointStrokeColor,o.lineWidth=r.pointDotStrokeWidth,a=0;a<e.datasets[s].data.length;a++)o.beginPath(),o.arc(_+v*a,w-n*t(e.datasets[s].data[a],g,f),r.pointDotRadius,0,2*Math.PI,!0),o.fill(),o.stroke()}},o)},v=function(e,r,o){var a,l,c,d,p,f,g,m,v,y,b,_,w,x,k=0;for(p=h,o.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily,y=1,d=0;d<e.labels.length;d++)a=o.measureText(e.labels[d]).width,y=a>y?a:y;for(u/e.labels.length<y?(k=45,u/e.labels.length<Math.cos(k)*y?(k=90,p-=y):p-=Math.sin(k)*y):p-=r.scaleFontSize,d=r.scaleFontSize,p=p-5-d,a=Number.MIN_VALUE,l=Number.MAX_VALUE,c=0;c<e.datasets.length;c++)for(m=0;m<e.datasets[c].data.length;m++)e.datasets[c].data[m]>a&&(a=e.datasets[c].data[m]),e.datasets[c].data[m]<l&&(l=e.datasets[c].data[m]);if(c=Math.floor(p/(.66*d)),d=Math.floor(.5*(p/d)),m=r.scaleShowLabels?r.scaleLabel:"",r.scaleOverride?(g={steps:r.scaleSteps,stepValue:r.scaleStepWidth,graphMin:r.scaleStartValue,labels:[]},s(m,g.labels,g.steps,r.scaleStartValue,r.scaleStepWidth)):g=i(p,c,d,a,l,m),f=Math.floor(p/g.steps),d=1,r.scaleShowLabels){for(o.font=r.scaleFontStyle+" "+r.scaleFontSize+"px "+r.scaleFontFamily,a=0;a<g.labels.length;a++)l=o.measureText(g.labels[a]).width,d=l>d?l:d;d+=10}b=u-d-y,v=Math.floor(b/e.labels.length),x=(v-2*r.scaleGridLineWidth-2*r.barValueSpacing-(r.barDatasetSpacing*e.datasets.length-1)-(r.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length,_=u-y/2-b,w=p+r.scaleFontSize/2,n(r,function(){o.lineWidth=r.scaleLineWidth,o.strokeStyle=r.scaleLineColor,o.beginPath(),o.moveTo(u-y/2+5,w),o.lineTo(u-y/2-b-5,w),o.stroke(),k>0?(o.save(),o.textAlign="right"):o.textAlign="center",o.fillStyle=r.scaleFontColor;for(var t=0;t<e.labels.length;t++)o.save(),k>0?(o.translate(_+t*v,w+r.scaleFontSize),o.rotate(-(k*(Math.PI/180))),o.fillText(e.labels[t],0,0),o.restore()):o.fillText(e.labels[t],_+t*v+v/2,w+r.scaleFontSize+3),o.beginPath(),o.moveTo(_+(t+1)*v,w+3),o.lineWidth=r.scaleGridLineWidth,o.strokeStyle=r.scaleGridLineColor,o.lineTo(_+(t+1)*v,5),o.stroke();for(o.lineWidth=r.scaleLineWidth,o.strokeStyle=r.scaleLineColor,o.beginPath(),o.moveTo(_,w+5),o.lineTo(_,5),o.stroke(),o.textAlign="right",o.textBaseline="middle",t=0;t<g.steps;t++)o.beginPath(),o.moveTo(_-3,w-(t+1)*f),r.scaleShowGridLines?(o.lineWidth=r.scaleGridLineWidth,o.strokeStyle=r.scaleGridLineColor,o.lineTo(_+b+5,w-(t+1)*f)):o.lineTo(_-.5,w-(t+1)*f),o.stroke(),r.scaleShowLabels&&o.fillText(g.labels[t],_-8,w-(t+1)*f)},function(n){o.lineWidth=r.barStrokeWidth;for(var i=0;i<e.datasets.length;i++){o.fillStyle=e.datasets[i].fillColor,o.strokeStyle=e.datasets[i].strokeColor;for(var s=0;s<e.datasets[i].data.length;s++){var a=_+r.barValueSpacing+v*s+x*i+r.barDatasetSpacing*i+r.barStrokeWidth*i;o.beginPath(),o.moveTo(a,w),o.lineTo(a,w-n*t(e.datasets[i].data[s],g,f)+r.barStrokeWidth/2),o.lineTo(a+x,w-n*t(e.datasets[i].data[s],g,f)+r.barStrokeWidth/2),o.lineTo(a+x,w),r.barShowStroke&&o.stroke(),o.closePath(),o.fill()}}},o)},y=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},b={}};define("chart",function(e){return function(){var t;return t||e.Chart}}(this)),define("dashboard/widget-personalityChart",["backbone","Handlebars","text!./widget-chart.hbs","./chartColors","chart"],function(e,t,n,i,s){var r,o,a,l;return o="canvas",l=".widget",a="Personality",r=e.View.extend({tmpl:t.compile(n),className:"holder personalityChart",tagName:"section",initialize:function(){},render:function(){var e,t;return t=this._prepareData(),this.$el.html(this.tmpl(t)),e=this.$(o),this._renderChartOnCanvas(e,t.chartValues),this},_prepareData:function(){var e,t,n,s,r,o;n={},e=[],t=_.clone(i),o=this.model.attributes;for(s in o)r=o[s],e.push({label:s,color:t.pop(),value:r});return n.chartValues=e,n.name=a,n},_renderChartOnCanvas:function(e,t){var n,i,r;return r={scaleShowLine:!1,scaleShowLabels:!1,scaleOverride:!0,scaleStartValue:0,scaleSteps:100},i=e[0].getContext("2d"),n=new s(i).PolarArea(t,r)},_drawKey:function(){}})}),define("dashboard/widget-interestsChart",["underscore","backbone","Handlebars","text!./widget-chart.hbs","./chartColors","chart"],function(e,t,n,i,s,r){var o,a,l,c;return a="canvas",c=".widget",l="Interests",o=t.View.extend({tmpl:n.compile(i),className:"holder personalityChart",tagName:"section",initialize:function(){},render:function(){var e,t;return t=this._prepareData(),this.$el.html(this.tmpl(t)),e=this.$(a),this._renderChartOnCanvas(e,t.chartValues),this},_prepareData:function(){var t,n,i,r,o,a;i={},t=[],n=e.clone(s),a=this.model.attributes;for(r in a)o=a[r],t.push({label:r,color:n.pop(),value:o});return i.chartValues=t,i.name=l,i},_renderChartOnCanvas:function(e,t){var n,i,s;return s={percentageInnerCutout:33},i=e[0].getContext("2d"),n=new r(i).Doughnut(t,s)}})}),define("text!dashboard/widget-dailyRecc.hbs",[],function(){return'\n<div class="widget featured">\n    <h3>Daily Recomendations</h3>\n    <p>Today\'s recommendation has been specifically selected for your personality type!</p>\n    <i class="icon icon-bulb-circle"></i>\n</div>\n\n\n'}),define("text!dashboard/widget-dailyReccDetails.hbs",[],function(){return'\n<div class="dailyReccDetails">\n\n    <hgroup>\n        <i class="icon icon-bulb-circle pull-left"></i>\n        <h2 class="title">Daily Recommendation</h2>\n        <p class="strong">\n            Based on your personality, TidePool recommends this <em>{{link_type}}</em>.\n        </p>\n    </hgroup>\n\n    <p>{{sentence}}</p>\n    {{#if link}}\n        <a href="{{link}}" id="ActionRecommendationLink" class="footer" target="_blank">\n            <i class="linkType icon-{{style}}"></i>\n            <span class="icon-stack pull-right">\n                <i class="icon-circle-blank icon-stack-base"></i>\n                <i class="icon-arrow-right"></i>\n            </span>\n            {{link_title}}\n        </a>\n    {{/if}}\n\n</div>\n\n\n\n'}),define("entities/recommendations",["backbone","core"],function(e,t){var n,i;return i="entities/recommendations",n=e.Model.extend({urlRoot:""+t.cfg.apiServer+"/api/v1/users/-/recommendations",latest:function(){return this.id="latest",this.fetch()}})}),define("dashboard/widget-dailyRecc",["backbone","Handlebars","text!./widget-dailyRecc.hbs","text!./widget-dailyReccDetails.hbs","entities/recommendations","composite_views/perch","core"],function(e,t,n,i,s,r,o){var a,l,c,u;return u=".widget",l="dailyRecc",c="#ActionRecommendationLink",a=e.View.extend({tmplDetails:t.compile(i),className:"holder dailyRecc",tagName:"section",events:{click:"onClick"},initialize:function(){return this.model=new s,this.listenTo(this.model,"sync",this.render),this.model.latest()},render:function(){var e;switch(this.$el.html(n),e=this.model.attributes,e.link_type){case"Book":e.style="book";break;case"App":e.style="cloud-download";break;case"Video":e.style="youtube-play"}return this._detailsMarkup=this.tmplDetails(e),this},onClick:function(){return this._detailsMarkup?(r.show({content:this._detailsMarkup,btn1Text:null,supressTracking:!0,large:!0}),o.analytics.track(l,"Recommendation Shown"),$(c).one("click",this.onReccClick)):void 0},onReccClick:function(){return o.analytics.track(l,"Recommendation Clicked")}})}),define("text!dashboard/widget-personalityReport.hbs",[],function(){return'\n\n<div class="widget premium hasFooter">\n    <h3>Personality Report</h3>\n    <!--<b class="dogEar"></b>-->\n    <p>\n        Seize control of your unconscious cognitive stengths with a personality report today!\n    </p>\n    <i class="icon icon-documents-circle"></i>\n    <div class="footer">Pre-Order Now</div>\n</div>\n\n'}),define("composite_views/perch-psst",["jquery","backbone","Handlebars","./perch"],function(e,t,n,i){var s,r,o;return o="composite_views/perch-psst",r="",s=i.Klass.extend({_showOptionsObject:function(e){var t;return e.msg&&(e.content="<p>"+e.msg+"</p>"),this.model.set(e),this._bindDomEvents(),t=e.mustUseButton?"static":!0,this.$el.modal({backdrop:t})}}),new s}),define("dashboard/widget-personalityReport",["backbone","Handlebars","text!./widget-personalityReport.hbs","composite_views/perch-psst","core"],function(e,t,n,i,s){var r,o;return o=".widget",r=e.View.extend({className:"holder personlityReport",tagName:"section",events:{click:"onClick"},initialize:function(){},render:function(){return this.$el.html(n),this},onClick:function(){var e;return e=s.user.attributes.email?"Thanks for your interest, we'll notify you at <strong>"+s.user.attributes.email+"</strong> when your report is available":"Thanks for your interest, we'll notify you when your report is available",i.show({msg:e,icon:"icon-check",btn1Text:null})}})}),define("pages/dashboard/personality",["backbone","Handlebars","entities/cur_user_personality","text!./personality.hbs","core","composite_views/perch","dashboard/widget-coreResults","dashboard/widget-personalityChart","dashboard/widget-interestsChart","dashboard/widget-dailyRecc","dashboard/widget-personalityReport"],function(e,t,n,i,s,r,o,a,l,c,u){var h,d;return d="#WidgetMaster",h=e.View.extend({className:"dashboardPage",initialize:function(){return this.model=new n,_.bindAll(this,"_getPersonality"),this._getPersonality(),this.listenTo(this.model,"sync",this.onModelSync),this.listenTo(this.model,"error",this.onModelErr),this.listenTo(s.user,"sync",this.onUserSync),this.listenTo(s,"session:logOut",this.onLogOut)},render:function(){return this.$el.html(i),this},_getPersonality:function(){return s.user.isLoggedIn()?this.model.fetch():s.trigger("session:showLogin")},_emptyWidgets:function(){return this.$(d).empty()},_addWidgets:function(){var t,n,i,s,r,h;return this._emptyWidgets(),t=this.$(d),n=new o({model:new e.Model(this.model.attributes.profile_description)}),t.append(n.render().el),r=new a({model:new e.Model(this.model.attributes.big5_score)}),t.append(r.render().el),h=new u,t.append(h.render().el),s=new l({model:new e.Model(this.model.attributes.holland6_score)}),t.append(s.render().el),i=new c,t.append(i.el)},onUserSync:function(){return this._getPersonality()},onLogOut:function(){return s.router.navigate("home",{trigger:!0})},onModelSync:function(){return this._addWidgets()},onModelErr:function(){return r.show({title:"You Must Be Veeery Special...",msg:"So Sorry, we're having trouble getting your personality data.",btn1Text:"Darn"})}})});
//@ sourceMappingURL=main.js.map